<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tesseract: /tesseract/src/textord/makerow.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tesseract
   &#160;<span id="projectnumber">5.0.0-alpha-619-ge9db</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a01106.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">makerow.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;vector&gt;</code><br />
<code>#include &quot;<a class="el" href="a00254_source.html">blobbox.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00284_source.html">ccstruct.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00302_source.html">detlinefit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00455_source.html">statistc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01061_source.html">drawtord.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01007_source.html">blkocc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01139_source.html">sortflts.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01115_source.html">oldbasel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01181_source.html">textord.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01193_source.html">tordmain.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01208_source.html">underlin.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01109_source.html">makerow.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00584_source.html">tprintf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01202_source.html">tovars.h</a>&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
</div>
<p><a href="a01106_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:a01818"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01818.html">tesseract</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af64730edc37ce30d66430f2dd54a2089"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#af64730edc37ce30d66430f2dd54a2089">MAX_HEIGHT_MODES</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:af64730edc37ce30d66430f2dd54a2089"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">make_single_row</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Arrange the blobs into a single row... well actually, if there is only a single blob, it makes 2 rows, in case the top-level blob is a container of the real blobs to recognize. </p>
</div></td></tr>
<tr class="memitem:a8aaaa024c4b9d1e61fd2c92a0b679f2b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a8aaaa024c4b9d1e61fd2c92a0b679f2b">make_single_row</a> (<a class="el" href="a02858.html">ICOORD</a> page_tr, bool allow_sub_blobs, <a class="el" href="a02674.html">TO_BLOCK</a> *block, TO_BLOCK_LIST *blocks)</td></tr>
<tr class="separator:a8aaaa024c4b9d1e61fd2c92a0b679f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">make_rows</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Arrange the blobs into rows. </p>
</div></td></tr>
<tr class="memitem:ade98619ec77aab7e466a06b0940088a5"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ade98619ec77aab7e466a06b0940088a5">make_rows</a> (<a class="el" href="a02858.html">ICOORD</a> page_tr, TO_BLOCK_LIST *port_blocks)</td></tr>
<tr class="separator:ade98619ec77aab7e466a06b0940088a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">make_initial_textrows</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Arrange the good blobs into rows of text. </p>
</div></td></tr>
<tr class="memitem:a245049058986f065020d28b6c7e369d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a245049058986f065020d28b6c7e369d5">make_initial_textrows</a> (<a class="el" href="a02858.html">ICOORD</a> page_tr, <a class="el" href="a02674.html">TO_BLOCK</a> *block, <a class="el" href="a02866.html">FCOORD</a> rotation, bool testing_on)</td></tr>
<tr class="separator:a245049058986f065020d28b6c7e369d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">fit_lms_line</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Fit an LMS line to a row. </p>
</div></td></tr>
<tr class="memitem:ab33fbd787683743809a9c6036d541ee9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ab33fbd787683743809a9c6036d541ee9">fit_lms_line</a> (<a class="el" href="a02670.html">TO_ROW</a> *row)</td></tr>
<tr class="separator:ab33fbd787683743809a9c6036d541ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">find_best_dropout_row</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Delete this row if it has a neighbour with better dropout characteristics. true is returned if the row should be deleted. </p>
</div></td></tr>
<tr class="memitem:a0483d7251f1054b0ab8697a9cbc0997c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a0483d7251f1054b0ab8697a9cbc0997c">find_best_dropout_row</a> (<a class="el" href="a02670.html">TO_ROW</a> *row, int32_t <a class="el" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>, float dist_limit, int32_t line_index, TO_ROW_IT *row_it, bool testing_on)</td></tr>
<tr class="separator:a0483d7251f1054b0ab8697a9cbc0997c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">deskew_block_coords</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Compute the bounding box of all the blobs in the block if they were deskewed without actually doing it. </p>
</div></td></tr>
<tr class="memitem:afcd9d2bb6d7f6b16e31ed5a75799f43d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a02898.html">TBOX</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#afcd9d2bb6d7f6b16e31ed5a75799f43d">deskew_block_coords</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block, float gradient)</td></tr>
<tr class="separator:afcd9d2bb6d7f6b16e31ed5a75799f43d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">compute_line_occupation</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Compute the pixel projection back on the y axis given the global skew. Also compute the 1st derivative. </p>
</div></td></tr>
<tr class="memitem:ab53d0e7dc865a6960ecbb2dd8d3eee11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ab53d0e7dc865a6960ecbb2dd8d3eee11">compute_line_occupation</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block, float gradient, int32_t min_y, int32_t max_y, int32_t *occupation, int32_t *deltas)</td></tr>
<tr class="separator:ab53d0e7dc865a6960ecbb2dd8d3eee11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a2d5c881bb140c9199880bcadb6336e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a8a2d5c881bb140c9199880bcadb6336e">compute_occupation_threshold</a> (int32_t low_window, int32_t high_window, int32_t line_count, int32_t *occupation, int32_t *thresholds)</td></tr>
<tr class="separator:a8a2d5c881bb140c9199880bcadb6336e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">compute_dropout_distances</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Compute the distance from each coordinate to the nearest dropout. </p>
</div></td></tr>
<tr class="memitem:a03acb44a5531c614c00fd012c88e799b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a03acb44a5531c614c00fd012c88e799b">compute_dropout_distances</a> (int32_t *occupation, int32_t *thresholds, int32_t line_count)</td></tr>
<tr class="separator:a03acb44a5531c614c00fd012c88e799b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">expand_rows</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Expand each row to the least of its allowed size and touching its neighbours. If the expansion would entirely swallow a neighbouring row then do so. </p>
</div></td></tr>
<tr class="memitem:a51573e6a073161cf5c4e9b16040406e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a51573e6a073161cf5c4e9b16040406e2">expand_rows</a> (<a class="el" href="a02858.html">ICOORD</a> page_tr, <a class="el" href="a02674.html">TO_BLOCK</a> *block, float gradient, <a class="el" href="a02866.html">FCOORD</a> rotation, int32_t block_edge, bool testing_on)</td></tr>
<tr class="separator:a51573e6a073161cf5c4e9b16040406e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c80d96579d43cb4e29057c8f1e0f41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#af6c80d96579d43cb4e29057c8f1e0f41">adjust_row_limits</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block)</td></tr>
<tr class="separator:af6c80d96579d43cb4e29057c8f1e0f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">compute_row_stats</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Compute the linespacing and offset. </p>
</div></td></tr>
<tr class="memitem:a9857b40ae88ca6fdca117868eb476d01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a9857b40ae88ca6fdca117868eb476d01">compute_row_stats</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block, bool testing_on)</td></tr>
<tr class="separator:a9857b40ae88ca6fdca117868eb476d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">fill_heights</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Fill the given heights with heights of the blobs that are legal candidates for estimating xheight. </p>
</div></td></tr>
<tr class="memitem:a0bb04d9973fd564b4ada5c96c24adb09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a0bb04d9973fd564b4ada5c96c24adb09">fill_heights</a> (<a class="el" href="a02670.html">TO_ROW</a> *row, float gradient, int min_height, int max_height, <a class="el" href="a02918.html">STATS</a> *heights, <a class="el" href="a02918.html">STATS</a> *floating_heights)</td></tr>
<tr class="separator:a0bb04d9973fd564b4ada5c96c24adb09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">compute_xheight_from_modes</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Given a <a class="el" href="a02918.html">STATS</a> object heights, looks for two most frequently occurring heights that look like xheight and xheight + ascrise. If found, sets the values of *xheight and *ascrise accordingly, otherwise sets xheight to any most frequently occurring height and sets *ascrise to 0. Returns the number of times xheight occurred in heights. For each mode that is considered for being an xheight the count of floating blobs (stored in floating_heights) is subtracted from the total count of the blobs of this height. This is done because blobs that sit far above the baseline could represent valid ascenders, but it is highly unlikely that such a character's height will be an xheight (e.g. -, ', =, ^, &lsquo;, ", &rsquo;, etc) If cap_only, then force finding of only the top mode. </p>
</div></td></tr>
<tr class="memitem:a4c2a6be7aee93caa4d9f9ca9f919b2a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a4c2a6be7aee93caa4d9f9ca9f919b2a1">compute_xheight_from_modes</a> (<a class="el" href="a02918.html">STATS</a> *heights, <a class="el" href="a02918.html">STATS</a> *floating_heights, bool cap_only, int min_height, int max_height, float *xheight, float *ascrise)</td></tr>
<tr class="separator:a4c2a6be7aee93caa4d9f9ca9f919b2a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">compute_row_descdrop</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Estimates the descdrop of this row. This function looks for "significant" descenders of lowercase letters (those that could not just be the small descenders of upper case letters like Q,J). The function also takes into account how many potential ascenders this row might contain. If the number of potential ascenders along with descenders is close to the expected fraction of the total number of blobs in the row, the function returns the descender height, returns 0 otherwise. </p>
</div></td></tr>
<tr class="memitem:aa7e4a0a63f3a32dff3bdf329b09ebe3f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aa7e4a0a63f3a32dff3bdf329b09ebe3f">compute_row_descdrop</a> (<a class="el" href="a02670.html">TO_ROW</a> *row, float gradient, int xheight_blob_count, <a class="el" href="a02918.html">STATS</a> *asc_heights)</td></tr>
<tr class="separator:aa7e4a0a63f3a32dff3bdf329b09ebe3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">compute_height_modes</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Find the top maxmodes values in the input array and put their indices in the output in the order in which they occurred. </p>
</div></td></tr>
<tr class="memitem:a1f885e71201e4d2dc7db3c78a98cbb91"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a1f885e71201e4d2dc7db3c78a98cbb91">compute_height_modes</a> (<a class="el" href="a02918.html">STATS</a> *heights, int32_t min_height, int32_t max_height, int32_t *modes, int32_t maxmodes)</td></tr>
<tr class="separator:a1f885e71201e4d2dc7db3c78a98cbb91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">correct_row_xheight</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Adjust the xheight etc of this row if not within reasonable limits of the average for the block. </p>
</div></td></tr>
<tr class="memitem:a816de2bcfeae782b4ba8506075925284"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a816de2bcfeae782b4ba8506075925284">correct_row_xheight</a> (<a class="el" href="a02670.html">TO_ROW</a> *row, float xheight, float ascrise, float descdrop)</td></tr>
<tr class="separator:a816de2bcfeae782b4ba8506075925284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">separate_underlines</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Test wide objects for being potential underlines. If they are then put them in a separate list in the block. </p>
</div></td></tr>
<tr class="memitem:a9147d87f5794548cee3480b5b4f2e0de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a9147d87f5794548cee3480b5b4f2e0de">separate_underlines</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block, float gradient, <a class="el" href="a02866.html">FCOORD</a> rotation, bool testing_on)</td></tr>
<tr class="separator:a9147d87f5794548cee3480b5b4f2e0de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">pre_associate_blobs</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Associate overlapping blobs and fake chop wide blobs. </p>
</div></td></tr>
<tr class="memitem:a18cd081fdb5a70768e2a93473418c13a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a18cd081fdb5a70768e2a93473418c13a">pre_associate_blobs</a> (<a class="el" href="a02858.html">ICOORD</a> page_tr, <a class="el" href="a02674.html">TO_BLOCK</a> *block, <a class="el" href="a02866.html">FCOORD</a> rotation, bool testing_on)</td></tr>
<tr class="separator:a18cd081fdb5a70768e2a93473418c13a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">fit_parallel_rows</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Re-fit the rows in the block to the given gradient. </p>
</div></td></tr>
<tr class="memitem:a28df0de48e824ccc887c91caeaf2e7d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a28df0de48e824ccc887c91caeaf2e7d8">fit_parallel_rows</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block, float gradient, <a class="el" href="a02866.html">FCOORD</a> rotation, int32_t block_edge, bool testing_on)</td></tr>
<tr class="separator:a28df0de48e824ccc887c91caeaf2e7d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">fit_parallel_lms</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Fit an LMS line to a row. Make the fit parallel to the given gradient and set the row accordingly. </p>
</div></td></tr>
<tr class="memitem:a7f6f87295a49c2966d0487e5fdddad3f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a7f6f87295a49c2966d0487e5fdddad3f">fit_parallel_lms</a> (float gradient, <a class="el" href="a02670.html">TO_ROW</a> *row)</td></tr>
<tr class="separator:a7f6f87295a49c2966d0487e5fdddad3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">make_baseline_spline</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Fit an LMS line to a row. Make the fit parallel to the given gradient and set the row accordingly. </p>
</div></td></tr>
<tr class="memitem:aff7570e5894808af04a93d3e967c65a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aff7570e5894808af04a93d3e967c65a2">make_baseline_spline</a> (<a class="el" href="a02670.html">TO_ROW</a> *row, <a class="el" href="a02674.html">TO_BLOCK</a> *block)</td></tr>
<tr class="separator:aff7570e5894808af04a93d3e967c65a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">segment_baseline</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Divide the baseline up into segments which require a different quadratic fitted to them. Return true if enough blobs were far enough away to need a quadratic. </p>
</div></td></tr>
<tr class="memitem:a13d7697b36af130fcde8ddf67cf3f9f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a13d7697b36af130fcde8ddf67cf3f9f1">segment_baseline</a> (<a class="el" href="a02670.html">TO_ROW</a> *row, <a class="el" href="a02674.html">TO_BLOCK</a> *block, int32_t &amp;segments, int32_t *xstarts)</td></tr>
<tr class="separator:a13d7697b36af130fcde8ddf67cf3f9f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">linear_spline_baseline</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Divide the baseline up into segments which require a different quadratic fitted to them. </p><dl class="section return"><dt>Returns</dt><dd>true if enough blobs were far enough away to need a quadratic. </dd></dl>
</div></td></tr>
<tr class="memitem:aec82b0edd2573bede6a0d9f4bdaf0782"><td class="memItemLeft" align="right" valign="top">double *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aec82b0edd2573bede6a0d9f4bdaf0782">linear_spline_baseline</a> (<a class="el" href="a02670.html">TO_ROW</a> *row, <a class="el" href="a02674.html">TO_BLOCK</a> *block, int32_t &amp;segments, int32_t xstarts[])</td></tr>
<tr class="separator:aec82b0edd2573bede6a0d9f4bdaf0782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">assign_blobs_to_rows</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Make enough rows to allocate all the given blobs to one. If a block skew is given, use that, else attempt to track it. </p>
</div></td></tr>
<tr class="memitem:aadee27bcfa70b6b74be490c1ab356672"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aadee27bcfa70b6b74be490c1ab356672">assign_blobs_to_rows</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block, float *gradient, int pass, bool reject_misses, bool make_new_rows, bool drawing_skew)</td></tr>
<tr class="separator:aadee27bcfa70b6b74be490c1ab356672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">most_overlapping_row</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Return the row which most overlaps the blob. </p>
</div></td></tr>
<tr class="memitem:a99339b09e5fe1e853068a49be9aea95f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fd">OVERLAP_STATE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a99339b09e5fe1e853068a49be9aea95f">most_overlapping_row</a> (TO_ROW_IT *row_it, <a class="el" href="a02670.html">TO_ROW</a> *&amp;best_row, float top, float bottom, float rowsize, bool testing_blob)</td></tr>
<tr class="separator:a99339b09e5fe1e853068a49be9aea95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">blob_x_order</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Sort function to sort blobs in x from page left. </p>
</div></td></tr>
<tr class="memitem:a71e57df4cbaf6a0d8fb156f0604d1033"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a71e57df4cbaf6a0d8fb156f0604d1033">blob_x_order</a> (const void *item1, const void *item2)</td></tr>
<tr class="separator:a71e57df4cbaf6a0d8fb156f0604d1033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">row_y_order</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Sort function to sort rows in y from page top. </p>
</div></td></tr>
<tr class="memitem:ab27bf80d814903a9eb48e81b2cc09acc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ab27bf80d814903a9eb48e81b2cc09acc">row_y_order</a> (const void *item1, const void *item2)</td></tr>
<tr class="separator:ab27bf80d814903a9eb48e81b2cc09acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">row_spacing_order</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Qsort style function to compare 2 TO_ROWS based on their spacing value. </p>
</div></td></tr>
<tr class="memitem:aa3013c07bcccb3f1efeb4686ed340609"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aa3013c07bcccb3f1efeb4686ed340609">row_spacing_order</a> (const void *item1, const void *item2)</td></tr>
<tr class="separator:aa3013c07bcccb3f1efeb4686ed340609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">mark_repeated_chars</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Mark blobs marked with BTFT_LEADER in repeated sets using the repeated_set member of <a class="el" href="a02666.html">BLOBNBOX</a>. </p>
</div></td></tr>
<tr class="memitem:a20d1c5d4b6ae64bf80b24a155aa7c189"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a20d1c5d4b6ae64bf80b24a155aa7c189">mark_repeated_chars</a> (<a class="el" href="a02670.html">TO_ROW</a> *row)</td></tr>
<tr class="separator:a20d1c5d4b6ae64bf80b24a155aa7c189"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aab5148b0f0769704bb959d0c186270de"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aab5148b0f0769704bb959d0c186270de">textord_heavy_nr</a> = false</td></tr>
<tr class="separator:aab5148b0f0769704bb959d0c186270de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b6384540f5043c74a97ec6a642d0bbf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a9b6384540f5043c74a97ec6a642d0bbf">textord_show_initial_rows</a> = false</td></tr>
<tr class="separator:a9b6384540f5043c74a97ec6a642d0bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450c7ef1f93c14c7f3e1d70cb44ef1f9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a450c7ef1f93c14c7f3e1d70cb44ef1f9">textord_show_parallel_rows</a> = false</td></tr>
<tr class="separator:a450c7ef1f93c14c7f3e1d70cb44ef1f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb70d23ca372b31c22ad99bce5f8aa70"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> = false</td></tr>
<tr class="separator:abb70d23ca372b31c22ad99bce5f8aa70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73aa7e6e50011cbd9114a4cd34dbcf47"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a73aa7e6e50011cbd9114a4cd34dbcf47">textord_show_final_rows</a> = false</td></tr>
<tr class="separator:a73aa7e6e50011cbd9114a4cd34dbcf47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a311b9c50853dfa06be5da69721d9f341"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a311b9c50853dfa06be5da69721d9f341">textord_show_final_blobs</a> = false</td></tr>
<tr class="separator:a311b9c50853dfa06be5da69721d9f341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58237d13dfff6d1379f501ba5e14bc9b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a58237d13dfff6d1379f501ba5e14bc9b">textord_test_landscape</a> = false</td></tr>
<tr class="separator:a58237d13dfff6d1379f501ba5e14bc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee4d483a054b2bb0a7990a22641dd69"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#abee4d483a054b2bb0a7990a22641dd69">textord_parallel_baselines</a> = true</td></tr>
<tr class="separator:abee4d483a054b2bb0a7990a22641dd69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afae95a2fffdf477ce99240ad90e63ee2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#afae95a2fffdf477ce99240ad90e63ee2">textord_straight_baselines</a> = false</td></tr>
<tr class="separator:afae95a2fffdf477ce99240ad90e63ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94687b9094ddaccb7a022e61cdc53a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ad94687b9094ddaccb7a022e61cdc53a3">textord_old_baselines</a> = true</td></tr>
<tr class="separator:ad94687b9094ddaccb7a022e61cdc53a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7718429051854813a160987de497731c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a7718429051854813a160987de497731c">textord_old_xheight</a> = false</td></tr>
<tr class="separator:a7718429051854813a160987de497731c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f67dd9a83c5bcda44414b45dd30899"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aa6f67dd9a83c5bcda44414b45dd30899">textord_fix_xheight_bug</a> = true</td></tr>
<tr class="separator:aa6f67dd9a83c5bcda44414b45dd30899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd49f8db9fa1e1a650d0a2b1f75c096"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aadd49f8db9fa1e1a650d0a2b1f75c096">textord_fix_makerow_bug</a> = true</td></tr>
<tr class="separator:aadd49f8db9fa1e1a650d0a2b1f75c096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa915328b291b12eac45b757d25d770c6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a> = false</td></tr>
<tr class="separator:aa915328b291b12eac45b757d25d770c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b8c104a388b836300c6aaf9592c66f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a23b8c104a388b836300c6aaf9592c66f">textord_test_x</a> = -INT32_MAX</td></tr>
<tr class="separator:a23b8c104a388b836300c6aaf9592c66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7548cdecc88963c89ab9d235a6c6531"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ac7548cdecc88963c89ab9d235a6c6531">textord_test_y</a> = -INT32_MAX</td></tr>
<tr class="separator:ac7548cdecc88963c89ab9d235a6c6531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e0651148ade15830933aa26b1e63c2f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a2e0651148ade15830933aa26b1e63c2f">textord_min_blobs_in_row</a> = 4</td></tr>
<tr class="separator:a2e0651148ade15830933aa26b1e63c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d851b1e7567c7e037b3b7aded37ba9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a02d851b1e7567c7e037b3b7aded37ba9">textord_spline_minblobs</a> = 8</td></tr>
<tr class="separator:a02d851b1e7567c7e037b3b7aded37ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3f1e0813b0d1a67ec8fb489e1d11034"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aa3f1e0813b0d1a67ec8fb489e1d11034">textord_spline_medianwin</a> = 6</td></tr>
<tr class="separator:aa3f1e0813b0d1a67ec8fb489e1d11034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a995fba1cadc1bb12bd1861d2e1d4bf4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a995fba1cadc1bb12bd1861d2e1d4bf4a">textord_min_xheight</a> = 10</td></tr>
<tr class="separator:a995fba1cadc1bb12bd1861d2e1d4bf4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab35d11ccffc21ae40e9f6dd51b4b81a8"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ab35d11ccffc21ae40e9f6dd51b4b81a8">textord_spline_shift_fraction</a> = 0.02</td></tr>
<tr class="separator:ab35d11ccffc21ae40e9f6dd51b4b81a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512a2aea945d1488b28317c79753bd5b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a512a2aea945d1488b28317c79753bd5b">textord_spline_outlier_fraction</a> = 0.1</td></tr>
<tr class="separator:a512a2aea945d1488b28317c79753bd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f7b13f26dd172ac8ac430ef10ff62fb"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a0f7b13f26dd172ac8ac430ef10ff62fb">textord_skew_ile</a> = 0.5</td></tr>
<tr class="separator:a0f7b13f26dd172ac8ac430ef10ff62fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99da077fe5f1eb152819880a9e6be164"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a99da077fe5f1eb152819880a9e6be164">textord_skew_lag</a> = 0.02</td></tr>
<tr class="separator:a99da077fe5f1eb152819880a9e6be164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fd4348aaf95237fce879822760e2b25"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a3fd4348aaf95237fce879822760e2b25">textord_linespace_iqrlimit</a> = 0.2</td></tr>
<tr class="separator:a3fd4348aaf95237fce879822760e2b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadab669cb0e97eb0aa1b93215c45828b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aadab669cb0e97eb0aa1b93215c45828b">textord_width_limit</a> = 8</td></tr>
<tr class="separator:aadab669cb0e97eb0aa1b93215c45828b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a061c9707b8142c110e65e138c3790ffd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a061c9707b8142c110e65e138c3790ffd">textord_chop_width</a> = 1.5</td></tr>
<tr class="separator:a061c9707b8142c110e65e138c3790ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cbebb25ca3a3a0ac4b6009907c7a51d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a6cbebb25ca3a3a0ac4b6009907c7a51d">textord_minxh</a> = 0.25</td></tr>
<tr class="separator:a6cbebb25ca3a3a0ac4b6009907c7a51d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7874c297cd608146eacd6782da2536"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#acb7874c297cd608146eacd6782da2536">textord_min_linesize</a> = 1.25</td></tr>
<tr class="separator:acb7874c297cd608146eacd6782da2536"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dcb3e14fc8bb00dcde4f03e25f3ac5b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a9dcb3e14fc8bb00dcde4f03e25f3ac5b">textord_excess_blobsize</a> = 1.3</td></tr>
<tr class="separator:a9dcb3e14fc8bb00dcde4f03e25f3ac5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedce99179cfa3891066fcd1dd72ecba1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aedce99179cfa3891066fcd1dd72ecba1">textord_occupancy_threshold</a> = 0.4</td></tr>
<tr class="separator:aedce99179cfa3891066fcd1dd72ecba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f308da31e04ae15487ee136c920446"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ac3f308da31e04ae15487ee136c920446">textord_underline_width</a> = 2.0</td></tr>
<tr class="separator:ac3f308da31e04ae15487ee136c920446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1351fa9ba641f131420149782666b565"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a1351fa9ba641f131420149782666b565">textord_min_blob_height_fraction</a> = 0.75</td></tr>
<tr class="separator:a1351fa9ba641f131420149782666b565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a5415d21bfad8f8e8693860230519df"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a0a5415d21bfad8f8e8693860230519df">textord_xheight_mode_fraction</a> = 0.4</td></tr>
<tr class="separator:a0a5415d21bfad8f8e8693860230519df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed72a4cf1cf5709c096540587eacffbc"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aed72a4cf1cf5709c096540587eacffbc">textord_ascheight_mode_fraction</a> = 0.08</td></tr>
<tr class="separator:aed72a4cf1cf5709c096540587eacffbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933873395501e7e5de97374eef4c20e9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a933873395501e7e5de97374eef4c20e9">textord_ascx_ratio_min</a> = 1.25</td></tr>
<tr class="separator:a933873395501e7e5de97374eef4c20e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d7f3344ad5b8485a32d91a83e4511b4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a1d7f3344ad5b8485a32d91a83e4511b4">textord_ascx_ratio_max</a> = 1.8</td></tr>
<tr class="separator:a1d7f3344ad5b8485a32d91a83e4511b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0d43ef1627ff8a2a8ee79a90ecdf892"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aa0d43ef1627ff8a2a8ee79a90ecdf892">textord_descx_ratio_min</a> = 0.25</td></tr>
<tr class="separator:aa0d43ef1627ff8a2a8ee79a90ecdf892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e93a6f5938ea681bc18b6d6c45f5e0a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a5e93a6f5938ea681bc18b6d6c45f5e0a">textord_descx_ratio_max</a> = 0.6</td></tr>
<tr class="separator:a5e93a6f5938ea681bc18b6d6c45f5e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6de330c2e2d5c231611e776ebb577b3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#aa6de330c2e2d5c231611e776ebb577b3">textord_xheight_error_margin</a> = 0.1</td></tr>
<tr class="separator:aa6de330c2e2d5c231611e776ebb577b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a5a462e77519ae4316a3175a5991daa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a3a5a462e77519ae4316a3175a5991daa">textord_lms_line_trials</a> = 12</td></tr>
<tr class="separator:a3a5a462e77519ae4316a3175a5991daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad38832cdfc8f47c85cb5a626760c7835"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ad38832cdfc8f47c85cb5a626760c7835">textord_new_initial_xheight</a> = true</td></tr>
<tr class="separator:ad38832cdfc8f47c85cb5a626760c7835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b96add97d00045022d1b0818e49253f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a2b96add97d00045022d1b0818e49253f">textord_debug_blob</a> = false</td></tr>
<tr class="separator:a2b96add97d00045022d1b0818e49253f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8c4f2ec0d4f8b83b5dc401f35feca75"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ad8c4f2ec0d4f8b83b5dc401f35feca75">kMinLeaderCount</a> = 5</td></tr>
<tr class="separator:ad8c4f2ec0d4f8b83b5dc401f35feca75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
compute_page_skew</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp0158b604068ba7990c1ebf328988a160"></a>Compute the skew over a full page by averaging the gradients over all the lines. Get the error of the same row. </p>
</td></tr>
<tr class="memitem:af9da918f4c268e7bfd9300632b056be2"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#af9da918f4c268e7bfd9300632b056be2">kNoiseSize</a> = 0.5</td></tr>
<tr class="separator:af9da918f4c268e7bfd9300632b056be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1baaf7ab16613cd7b5a13a28d65412b3"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a1baaf7ab16613cd7b5a13a28d65412b3">kMinSize</a> = 8</td></tr>
<tr class="separator:a1baaf7ab16613cd7b5a13a28d65412b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ad937a552fbb9c0f7f24e94b9d5e09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ab9ad937a552fbb9c0f7f24e94b9d5e09">compute_page_skew</a> (TO_BLOCK_LIST *blocks, float &amp;page_m, float &amp;page_err)</td></tr>
<tr class="separator:ab9ad937a552fbb9c0f7f24e94b9d5e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae71e721bb9641f221b30021a5addff82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#ae71e721bb9641f221b30021a5addff82">vigorous_noise_removal</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block)</td></tr>
<tr class="separator:ae71e721bb9641f221b30021a5addff82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1312db9d386487e3879ed6da1a02fefe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a1312db9d386487e3879ed6da1a02fefe">cleanup_rows_making</a> (<a class="el" href="a02858.html">ICOORD</a> page_tr, <a class="el" href="a02674.html">TO_BLOCK</a> *block, float gradient, <a class="el" href="a02866.html">FCOORD</a> rotation, int32_t block_edge, bool testing_on)</td></tr>
<tr class="separator:a1312db9d386487e3879ed6da1a02fefe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a148adda99d1cb8a8278fd3d89758c976"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01106.html#a148adda99d1cb8a8278fd3d89758c976">delete_non_dropout_rows</a> (<a class="el" href="a02674.html">TO_BLOCK</a> *block, float gradient, <a class="el" href="a02866.html">FCOORD</a> rotation, int32_t block_edge, bool testing_on)</td></tr>
<tr class="separator:a148adda99d1cb8a8278fd3d89758c976"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af64730edc37ce30d66430f2dd54a2089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af64730edc37ce30d66430f2dd54a2089">&#9670;&nbsp;</a></span>MAX_HEIGHT_MODES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_HEIGHT_MODES&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00103">103</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af6c80d96579d43cb4e29057c8f1e0f41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6c80d96579d43cb4e29057c8f1e0f41">&#9670;&nbsp;</a></span>adjust_row_limits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adjust_row_limits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>adjust_row_limits</p>
<p>Change the limits of rows to suit the default fractions. </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01107">1107</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                        {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordtype">float</span> size;                    <span class="comment">//size of row</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordtype">float</span> ymax;                    <span class="comment">//top of row</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordtype">float</span> ymin;                    <span class="comment">//bottom of row</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a>)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Adjusting row limits for block(%d,%d)\n&quot;</span>,</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a>().left(),</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a>().top());</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    row = row_it.data ();</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    size = row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () - row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> ();</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a>)</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Row at %f has min %f, max %f, size %f\n&quot;</span>,</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;              row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>(), row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a>(), row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a>(), size);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    size /= <a class="code" href="a02702.html#a737fdb37b9401ad3d04371c1bd4a0b17">tesseract::CCStruct::kXHeightFraction</a> +</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <a class="code" href="a02702.html#a9d71fddad74d9418e106713cd643b919">tesseract::CCStruct::kAscenderFraction</a> +</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="a02702.html#a7e8a361df0831d295edf1c150c3ca3a3">tesseract::CCStruct::kDescenderFraction</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    ymax = size * (<a class="code" href="a02702.html#a737fdb37b9401ad3d04371c1bd4a0b17">tesseract::CCStruct::kXHeightFraction</a> +</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                   <a class="code" href="a02702.html#a9d71fddad74d9418e106713cd643b919">tesseract::CCStruct::kAscenderFraction</a>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    ymin = -size * <a class="code" href="a02702.html#a7e8a361df0831d295edf1c150c3ca3a3">tesseract::CCStruct::kDescenderFraction</a>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    row-&gt;<a class="code" href="a02670.html#a5a5bfd657e97c2fed2cf6153eca0e98a">set_limits</a> (row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> () + ymin, row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> () + ymax);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    row-&gt;<a class="code" href="a02670.html#a665cb27268d22318e05dea8c17ae9a87">merged</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aadee27bcfa70b6b74be490c1ab356672"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadee27bcfa70b6b74be490c1ab356672">&#9670;&nbsp;</a></span>assign_blobs_to_rows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assign_blobs_to_rows </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reject_misses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>make_new_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>drawing_skew</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02278">2278</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  {</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fd">OVERLAP_STATE</a> overlap_result;  <span class="comment">//what to do with it</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  <span class="keywordtype">float</span> ycoord;                  <span class="comment">//current y</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  <span class="keywordtype">float</span> top, bottom;             <span class="comment">//of blob</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <span class="keywordtype">float</span> g_length = 1.0f;         <span class="comment">//from gradient</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  int16_t row_count;               <span class="comment">//no of rows</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  int16_t left_x;                  <span class="comment">//left edge</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  int16_t last_x;                  <span class="comment">//previous edge</span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <span class="keywordtype">float</span> block_skew;              <span class="comment">//y delta</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="keywordtype">float</span> smooth_factor;           <span class="comment">//for new coords</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="keywordtype">float</span> near_dist;               <span class="comment">//dist to nearest row</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <a class="code" href="a02858.html">ICOORD</a> testpt;                 <span class="comment">//testing only</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <a class="code" href="a02666.html">BLOBNBOX</a> *blob;                <span class="comment">//current blob</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *dest_row = <span class="keyword">nullptr</span>;       <span class="comment">//row to put blob in</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                                 <span class="comment">//iterators</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  BLOBNBOX_IT blob_it = &amp;block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160; </div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  ycoord =</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    (block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a> ().bottom () +</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a> ().top ()) / 2.0f;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <span class="keywordflow">if</span> (gradient != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    g_length = sqrt (1 + *gradient * *gradient);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  <span class="keywordflow">if</span> (drawing_skew)</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <a class="code" href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a>-&gt;<a class="code" href="a03978.html#a730b182e350dfe37b0986d7f0591fee5">SetCursor</a>(block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a> ().left (), ycoord);</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  testpt = <a class="code" href="a02858.html">ICOORD</a> (<a class="code" href="a01106.html#a23b8c104a388b836300c6aaf9592c66f">textord_test_x</a>, <a class="code" href="a01106.html#ac7548cdecc88963c89ab9d235a6c6531">textord_test_y</a>);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  blob_it.sort (<a class="code" href="a01106.html#a71e57df4cbaf6a0d8fb156f0604d1033">blob_x_order</a>);</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  smooth_factor = 1.0;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  block_skew = 0.0f;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  row_count = row_it.length ();  <span class="comment">//might have rows</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  <span class="keywordflow">if</span> (!blob_it.empty ()) {</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    left_x = blob_it.data ()-&gt;bounding_box ().left ();</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  }</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    left_x = block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a> ().left ();</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  }</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  last_x = left_x;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  <span class="keywordflow">for</span> (blob_it.mark_cycle_pt (); !blob_it.cycled_list (); blob_it.forward ()) {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    blob = blob_it.data ();</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">if</span> (gradient != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      block_skew = (1 - 1 / g_length) * blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> ()</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        + *gradient / g_length * blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ();</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    }</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> () - last_x &gt; block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> / 2</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      &amp;&amp; last_x - left_x &gt; block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> * 2</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    &amp;&amp; textord_interpolating_skew) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <span class="comment">//                      tprintf(&quot;Interpolating skew from %g&quot;,block_skew);</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      block_skew *= static_cast&lt;float&gt;(blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> () - left_x)</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        / (last_x - left_x);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <span class="comment">//                      tprintf(&quot;to %g\n&quot;,block_skew);</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    last_x = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ();</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    top = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a5dc64d0677b5d65385bc07a78cf49c4d">top</a> () - block_skew;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    bottom = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> () - block_skew;</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">if</span> (drawing_skew)</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      <a class="code" href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a>-&gt;<a class="code" href="a03978.html#a101de80a4722fe821969f61f6e7303a6">DrawTo</a>(blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> (), ycoord + block_skew);</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">if</span> (!row_it.empty ()) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <span class="keywordflow">for</span> (row_it.move_to_first ();</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        !row_it.at_last () &amp;&amp; row_it.data ()-&gt;min_y () &gt; top;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        row_it.forward ());</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      row = row_it.data ();</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <span class="keywordflow">if</span> (row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () &lt;= top &amp;&amp; row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () &gt;= bottom) {</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <span class="comment">//any overlap</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;        dest_row = row;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        overlap_result = <a class="code" href="a01106.html#a99339b09e5fe1e853068a49be9aea95f">most_overlapping_row</a> (&amp;row_it, dest_row,</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;          top, bottom,</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;          block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>,</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;          blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;          contains (testpt));</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <span class="keywordflow">if</span> (overlap_result == <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdab82f810c0bfdbb5cc6419a4bcea46404">NEW_ROW</a> &amp;&amp; !reject_misses)</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;          overlap_result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a">ASSIGN</a>;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      }</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        overlap_result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdab82f810c0bfdbb5cc6419a4bcea46404">NEW_ROW</a>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        <span class="keywordflow">if</span> (!make_new_rows) {</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;          near_dist = row_it.data_relative (-1)-&gt;min_y () - top;</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                                 <span class="comment">//below bottom</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;          <span class="keywordflow">if</span> (bottom &lt; row-&gt;min_y ()) {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;            <span class="keywordflow">if</span> (row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () - bottom &lt;=</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;              (block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a> -</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>) * <a class="code" href="a02702.html#a7e8a361df0831d295edf1c150c3ca3a3">tesseract::CCStruct::kDescenderFraction</a>) {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                                 <span class="comment">//done it</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;              overlap_result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a">ASSIGN</a>;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;              dest_row = row;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;            }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;          }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (near_dist &gt; 0</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;          &amp;&amp; near_dist &lt; bottom - row-&gt;max_y ()) {</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            row_it.backward ();</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;            dest_row = row_it.data ();</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            <span class="keywordflow">if</span> (dest_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () - bottom &lt;=</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;              (block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a> -</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;            block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>) * <a class="code" href="a02702.html#a7e8a361df0831d295edf1c150c3ca3a3">tesseract::CCStruct::kDescenderFraction</a>) {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                                 <span class="comment">//done it</span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;              overlap_result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a">ASSIGN</a>;</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;            }</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;          }</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;            <span class="keywordflow">if</span> (top - row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () &lt;=</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;              (block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a> -</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;              block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>) * (textord_overlap_x +</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            <a class="code" href="a02702.html#a9d71fddad74d9418e106713cd643b919">tesseract::CCStruct::kAscenderFraction</a>)) {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                                 <span class="comment">//done it</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;              overlap_result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a">ASSIGN</a>;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;              dest_row = row;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;            }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;          }</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      <span class="keywordflow">if</span> (overlap_result == <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a">ASSIGN</a>)</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        dest_row-&gt;<a class="code" href="a02670.html#a0173e9da64e4f2d29f01da14c3a053ee">add_blob</a> (blob_it.extract (), top, bottom,</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;          block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>);</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      <span class="keywordflow">if</span> (overlap_result == <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdab82f810c0bfdbb5cc6419a4bcea46404">NEW_ROW</a>) {</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        <span class="keywordflow">if</span> (make_new_rows &amp;&amp; top - bottom &lt; block-&gt;max_blob_size) {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;          dest_row =</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            <span class="keyword">new</span> <a class="code" href="a02670.html">TO_ROW</a> (blob_it.extract (), top, bottom,</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;            block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>);</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;          row_count++;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;          <span class="keywordflow">if</span> (bottom &gt; row_it.data ()-&gt;min_y ())</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;            row_it.add_before_then_move (dest_row);</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;          <span class="comment">//insert in right place</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            row_it.add_after_then_move (dest_row);</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;          smooth_factor =</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            1.0 / (row_count * <a class="code" href="a01106.html#a99da077fe5f1eb152819880a9e6be164">textord_skew_lag</a> +</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            textord_skewsmooth_offset);</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        }</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;          overlap_result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdaa698e39adf684fd44b5572a7b89444fb">REJECT</a>;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    }</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (make_new_rows &amp;&amp; top - bottom &lt; block-&gt;max_blob_size) {</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      overlap_result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdab82f810c0bfdbb5cc6419a4bcea46404">NEW_ROW</a>;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      dest_row =</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        <span class="keyword">new</span> <a class="code" href="a02670.html">TO_ROW</a>(blob_it.extract(), top, bottom, block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>);</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      row_count++;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      row_it.add_after_then_move(dest_row);</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      smooth_factor = 1.0 / (row_count * <a class="code" href="a01106.html#a99da077fe5f1eb152819880a9e6be164">textord_skew_lag</a> +</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                             textord_skewsmooth_offset2);</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      overlap_result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdaa698e39adf684fd44b5572a7b89444fb">REJECT</a>;</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <span class="keywordflow">if</span> (blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#acfa252ec4b65cbf808349f70fcf62019">contains</a>(testpt) &amp;&amp; <a class="code" href="a01106.html#a2b96add97d00045022d1b0818e49253f">textord_debug_blob</a>) {</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      <span class="keywordflow">if</span> (overlap_result != <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdaa698e39adf684fd44b5572a7b89444fb">REJECT</a>) {</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Test blob assigned to row at (%g,%g) on pass %d\n&quot;</span>,</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;          dest_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a>(), dest_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a>(), pass);</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Test blob assigned to no row on pass %d\n&quot;</span>, pass);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      }</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    }</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="keywordflow">if</span> (overlap_result != <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdaa698e39adf684fd44b5572a7b89444fb">REJECT</a>) {</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <span class="keywordflow">while</span> (!row_it.at_first() &amp;&amp;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;             row_it.data()-&gt;min_y() &gt; row_it.data_relative(-1)-&gt;min_y()) {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        row = row_it.extract();</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;        row_it.backward();</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        row_it.add_before_then_move(row);</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      }</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <span class="keywordflow">while</span> (!row_it.at_last() &amp;&amp;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;             row_it.data ()-&gt;min_y() &lt; row_it.data_relative (1)-&gt;min_y()) {</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        row = row_it.extract();</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        row_it.forward();</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                                 <span class="comment">// Keep rows in order.</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        row_it.add_after_then_move(row);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;      }</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      BLOBNBOX_IT added_blob_it(dest_row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>());</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      added_blob_it.move_to_last();</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;      <a class="code" href="a02898.html">TBOX</a> prev_box = added_blob_it.data_relative(-1)-&gt;bounding_box();</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <span class="keywordflow">if</span> (dest_row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>()-&gt;singleton() ||</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;          !prev_box.<a class="code" href="a02898.html#ade947e3871fa316e3e0b0864905c2997">major_x_overlap</a>(blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>())) {</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        block_skew = (1 - smooth_factor) * block_skew</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;            + smooth_factor * (blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a>() -</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;            dest_row-&gt;<a class="code" href="a02670.html#a62f74c4b5d6cf5f7c1a6a4a9efdf5f96">initial_min_y</a>());</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;      }</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    }</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  }</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt(); !row_it.cycled_list(); row_it.forward()) {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="keywordflow">if</span> (row_it.data()-&gt;blob_list()-&gt;empty())</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <span class="keyword">delete</span> row_it.extract();  <span class="comment">// Discard empty rows.</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  }</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a71e57df4cbaf6a0d8fb156f0604d1033"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e57df4cbaf6a0d8fb156f0604d1033">&#9670;&nbsp;</a></span>blob_x_order()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int blob_x_order </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>item1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>item2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02573">2573</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                                    {</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                                 <span class="comment">//converted ptr</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <span class="keyword">const</span> <a class="code" href="a02666.html">BLOBNBOX</a> *blob1 = *reinterpret_cast&lt;const BLOBNBOX* const*&gt;(item1);</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                                 <span class="comment">//converted ptr</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <span class="keyword">const</span> <a class="code" href="a02666.html">BLOBNBOX</a> *blob2 = *reinterpret_cast&lt;const BLOBNBOX* const*&gt;(item2);</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160; </div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keywordflow">if</span> (blob1-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> () &lt; blob2-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ())</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (blob1-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> () &gt; blob2-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ())</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1312db9d386487e3879ed6da1a02fefe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1312db9d386487e3879ed6da1a02fefe">&#9670;&nbsp;</a></span>cleanup_rows_making()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup_rows_making </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02858.html">ICOORD</a>&#160;</td>
          <td class="paramname"><em>page_tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02866.html">FCOORD</a>&#160;</td>
          <td class="paramname"><em>rotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>block_edge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>cleanup_rows_making</p>
<p>Remove overlapping rows and fit all the blobs to what's left. </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00517">517</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                 <span class="comment">//iterators</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  BLOBNBOX_IT blob_it = &amp;block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#a450c7ef1f93c14c7f3e1d70cb44ef1f9">textord_show_parallel_rows</a> &amp;&amp; testing_on) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <a class="code" href="a01058.html#afd5bee79bdf1ea9c211c3a3519d25251">create_to_win</a>(page_tr);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                 <span class="comment">//get row coords</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="a01106.html#a28df0de48e824ccc887c91caeaf2e7d8">fit_parallel_rows</a>(block,</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    gradient,</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    rotation,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                    block_edge,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                    <a class="code" href="a01106.html#a450c7ef1f93c14c7f3e1d70cb44ef1f9">textord_show_parallel_rows</a> &amp;&amp; testing_on);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="a01106.html#a148adda99d1cb8a8278fd3d89758c976">delete_non_dropout_rows</a>(block,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                          gradient,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                          rotation,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                          block_edge,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                          <a class="code" href="a01106.html#a450c7ef1f93c14c7f3e1d70cb44ef1f9">textord_show_parallel_rows</a> &amp;&amp; testing_on);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="a01106.html#a51573e6a073161cf5c4e9b16040406e2">expand_rows</a>(page_tr, block, gradient, rotation, block_edge, testing_on);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  blob_it.set_to_list (&amp;block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  row_it.set_to_list (block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ());</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ())</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    blob_it.add_list_after (row_it.data ()-&gt;blob_list ());</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">//give blobs back</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <a class="code" href="a01106.html#aadee27bcfa70b6b74be490c1ab356672">assign_blobs_to_rows</a> (block, &amp;gradient, 1, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">//now new rows must be genuine</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  blob_it.set_to_list (&amp;block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  blob_it.add_list_after (&amp;block-&gt;<a class="code" href="a02674.html#aafe2a9baa69300ee71da42e6dc18cfee">large_blobs</a>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="a01106.html#aadee27bcfa70b6b74be490c1ab356672">assign_blobs_to_rows</a> (block, &amp;gradient, 2, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">//safe to use big ones now</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  blob_it.set_to_list (&amp;block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                 <span class="comment">//throw all blobs in</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  blob_it.add_list_after (&amp;block-&gt;<a class="code" href="a02674.html#aa6a3757d385e79ab76f34afb6e8fc684">noise_blobs</a>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  blob_it.add_list_after (&amp;block-&gt;<a class="code" href="a02674.html#ad16b1c18225b44c50674ca46841b0f5f">small_blobs</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="a01106.html#aadee27bcfa70b6b74be490c1ab356672">assign_blobs_to_rows</a> (block, &amp;gradient, 3, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a03acb44a5531c614c00fd012c88e799b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03acb44a5531c614c00fd012c88e799b">&#9670;&nbsp;</a></span>compute_dropout_distances()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_dropout_distances </td>
          <td>(</td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>occupation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>thresholds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>line_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00902">902</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                                {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  int32_t line_index;              <span class="comment">//of thresholds line</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  int32_t <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>;                <span class="comment">//from prev dropout</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  int32_t next_dist;               <span class="comment">//to next dropout</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  int32_t back_index;              <span class="comment">//for back filling</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  int32_t prev_threshold;          <span class="comment">//before overwrite</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> = -line_count;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  line_index = 0;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>--;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      prev_threshold = thresholds[line_index];</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                                 <span class="comment">//distance from prev</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      thresholds[line_index] = <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      line_index++;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">while</span> (line_index &lt; line_count</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      &amp;&amp; (occupation[line_index] &lt; thresholds[line_index]</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      || occupation[line_index - 1] &gt;= prev_threshold));</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">if</span> (line_index &lt; line_count) {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      back_index = line_index - 1;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      next_dist = 1;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">while</span> (next_dist &lt; -distance &amp;&amp; back_index &gt;= 0) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        thresholds[back_index] = next_dist;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        back_index--;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        next_dist++;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>++;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> = 1;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordflow">while</span> (line_index &lt; line_count);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f885e71201e4d2dc7db3c78a98cbb91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f885e71201e4d2dc7db3c78a98cbb91">&#9670;&nbsp;</a></span>compute_height_modes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t compute_height_modes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02918.html">STATS</a> *&#160;</td>
          <td class="paramname"><em>heights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>min_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>max_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>modes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>maxmodes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01623">1623</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                                             {  <span class="comment">// size of modes</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  int32_t pile_count;              <span class="comment">// no in source pile</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  int32_t src_count;               <span class="comment">// no of source entries</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  int32_t src_index;               <span class="comment">// current entry</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  int32_t least_count;             <span class="comment">// height of smalllest</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  int32_t least_index;             <span class="comment">// index of least</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  int32_t dest_count;              <span class="comment">// index in modes</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  src_count = max_height + 1 - min_height;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  dest_count = 0;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  least_count = INT32_MAX;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  least_index = -1;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">for</span> (src_index = 0; src_index &lt; src_count; src_index++) {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    pile_count = heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(min_height + src_index);</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">if</span> (pile_count &gt; 0) {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="keywordflow">if</span> (dest_count &lt; maxmodes) {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        <span class="keywordflow">if</span> (pile_count &lt; least_count) {</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;          <span class="comment">// find smallest in array</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;          least_count = pile_count;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;          least_index = dest_count;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        modes[dest_count++] = min_height + src_index;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pile_count &gt;= least_count) {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="keywordflow">while</span> (least_index &lt; maxmodes - 1) {</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;          modes[least_index] = modes[least_index + 1];</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;          <span class="comment">// shuffle up</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;          least_index++;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        }</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        <span class="comment">// new one on end</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        modes[maxmodes - 1] = min_height + src_index;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <span class="keywordflow">if</span> (pile_count == least_count) {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;          <span class="comment">// new smallest</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;          least_index = maxmodes - 1;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;          least_count = heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(modes[0]);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;          least_index = 0;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;          <span class="keywordflow">for</span> (dest_count = 1; dest_count &lt; maxmodes; dest_count++) {</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;            pile_count = heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(modes[dest_count]);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            <span class="keywordflow">if</span> (pile_count &lt; least_count) {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;              <span class="comment">// find smallest</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;              least_count = pile_count;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;              least_index = dest_count;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;          }</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        }</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      }</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  }</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="keywordflow">return</span> dest_count;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab53d0e7dc865a6960ecbb2dd8d3eee11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab53d0e7dc865a6960ecbb2dd8d3eee11">&#9670;&nbsp;</a></span>compute_line_occupation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_line_occupation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>min_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>max_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>occupation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>deltas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00768">768</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                              {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  int32_t line_count;              <span class="comment">//maxy-miny+1</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  int32_t line_index;              <span class="comment">//of scan line</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordtype">int</span> index;                     <span class="comment">//array index for daft compilers</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <a class="code" href="a02666.html">BLOBNBOX</a> *blob;                <span class="comment">//current blob</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  BLOBNBOX_IT blob_it;           <span class="comment">//iterator</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordtype">float</span> length;                  <span class="comment">//of skew vector</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="a02898.html">TBOX</a> blob_box;                  <span class="comment">//bounding box</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <a class="code" href="a02866.html">FCOORD</a> rotation;               <span class="comment">//inverse of skew</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  line_count = max_y - min_y + 1;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  length = sqrt (gradient * gradient + 1);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  rotation = <a class="code" href="a02866.html">FCOORD</a> (1 / length, -gradient / length);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordflow">for</span> (line_index = 0; line_index &lt; line_count; line_index++)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    deltas[line_index] = 0;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    row = row_it.data ();</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    blob_it.set_to_list (row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ());</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">for</span> (blob_it.mark_cycle_pt (); !blob_it.cycled_list ();</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    blob_it.forward ()) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      blob = blob_it.data ();</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      blob_box = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ();</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      blob_box.<a class="code" href="a02898.html#a428e14544aeb44064bc8637d920211a0">rotate</a> (rotation);<span class="comment">//de-skew it</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      int32_t width = blob_box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a>() - blob_box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a>();</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      index = blob_box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a>() - min_y;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <a class="code" href="a00515.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(index &gt;= 0 &amp;&amp; index &lt; line_count);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">// count transitions</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      deltas[index] += width;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      index = blob_box.<a class="code" href="a02898.html#a5dc64d0677b5d65385bc07a78cf49c4d">top</a>() - min_y;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <a class="code" href="a00515.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(index &gt;= 0 &amp;&amp; index &lt; line_count);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      deltas[index] -= width;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  occupation[0] = deltas[0];</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordflow">for</span> (line_index = 1; line_index &lt; line_count; line_index++)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    occupation[line_index] = occupation[line_index - 1] + deltas[line_index];</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a2d5c881bb140c9199880bcadb6336e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a2d5c881bb140c9199880bcadb6336e">&#9670;&nbsp;</a></span>compute_occupation_threshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_occupation_threshold </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>low_window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>high_window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>line_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>occupation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>thresholds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>compute_occupation_threshold</p>
<p>Compute thresholds for textline or not for the occupation array. </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00821">821</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                                   {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  int32_t line_index;              <span class="comment">//of thresholds line</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  int32_t low_index;               <span class="comment">//in occupation</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  int32_t high_index;              <span class="comment">//in occupation</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  int32_t sum;                     <span class="comment">//current average</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  int32_t divisor;                 <span class="comment">//to get thresholds</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  int32_t min_index;               <span class="comment">//of min occ</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  int32_t min_occ;                 <span class="comment">//min in locality</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  int32_t test_index;              <span class="comment">//for finding min</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  divisor =</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    static_cast&lt;int32_t&gt;(ceil ((low_window + high_window) / <a class="code" href="a01106.html#aedce99179cfa3891066fcd1dd72ecba1">textord_occupancy_threshold</a>));</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordflow">if</span> (low_window + high_window &lt; line_count) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">for</span> (sum = 0, high_index = 0; high_index &lt; low_window; high_index++)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      sum += occupation[high_index];</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">for</span> (low_index = 0; low_index &lt; high_window; low_index++, high_index++)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      sum += occupation[high_index];</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    min_occ = occupation[0];</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    min_index = 0;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">for</span> (test_index = 1; test_index &lt; high_index; test_index++) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordflow">if</span> (occupation[test_index] &lt;= min_occ) {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        min_occ = occupation[test_index];</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        min_index = test_index;  <span class="comment">//find min in region</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">for</span> (line_index = 0; line_index &lt; low_window; line_index++)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      thresholds[line_index] = (sum - min_occ) / divisor + min_occ;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="comment">//same out to end</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">for</span> (low_index = 0; high_index &lt; line_count; low_index++, high_index++) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      sum -= occupation[low_index];</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      sum += occupation[high_index];</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">if</span> (occupation[high_index] &lt;= min_occ) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                                 <span class="comment">//find min in region</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        min_occ = occupation[high_index];</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        min_index = high_index;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                                 <span class="comment">//lost min from region</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">if</span> (min_index &lt;= low_index) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        min_occ = occupation[low_index + 1];</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        min_index = low_index + 1;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">for</span> (test_index = low_index + 2; test_index &lt;= high_index;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        test_index++) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;          <span class="keywordflow">if</span> (occupation[test_index] &lt;= min_occ) {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            min_occ = occupation[test_index];</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                 <span class="comment">//find min in region</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            min_index = test_index;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;          }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      thresholds[line_index++] = (sum - min_occ) / divisor + min_occ;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    min_occ = occupation[0];</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    min_index = 0;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">for</span> (sum = 0, low_index = 0; low_index &lt; line_count; low_index++) {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">if</span> (occupation[low_index] &lt; min_occ) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        min_occ = occupation[low_index];</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        min_index = low_index;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      sum += occupation[low_index];</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    line_index = 0;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">for</span> (; line_index &lt; line_count; line_index++)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    thresholds[line_index] = (sum - min_occ) / divisor + min_occ;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">//same out to end</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9ad937a552fbb9c0f7f24e94b9d5e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9ad937a552fbb9c0f7f24e94b9d5e09">&#9670;&nbsp;</a></span>compute_page_skew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_page_skew </td>
          <td>(</td>
          <td class="paramtype">TO_BLOCK_LIST *&#160;</td>
          <td class="paramname"><em>blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;&#160;</td>
          <td class="paramname"><em>page_m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;&#160;</td>
          <td class="paramname"><em>page_err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00286">286</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                        {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  int32_t row_count;             <span class="comment">//total rows</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  int32_t blob_count;            <span class="comment">//total_blobs</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  int32_t row_err;               <span class="comment">//integer error</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  int32_t row_index;             <span class="comment">//of total</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  TO_BLOCK_IT block_it = blocks; <span class="comment">//iterator</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  row_count = 0;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  blob_count = 0;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">for</span> (block_it.mark_cycle_pt (); !block_it.cycled_list ();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;       block_it.forward ()) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="a02870.html">POLY_BLOCK</a>* pb = block_it.data()-&gt;block-&gt;pdblk.poly_block();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> (pb != <span class="keyword">nullptr</span> &amp;&amp; !pb-&gt;<a class="code" href="a02870.html#a4eb55be5fc2ed33312e4410f5ee2cf88">IsText</a>())</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">continue</span>;  <span class="comment">// Pretend non-text blocks don&#39;t exist.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    row_count += block_it.data ()-&gt;get_rows ()-&gt;length ();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">//count up rows</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    TO_ROW_IT row_it(block_it.data()-&gt;get_rows());</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ())</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      blob_count += row_it.data ()-&gt;blob_list ()-&gt;length ();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">if</span> (row_count == 0) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    page_m = 0.0f;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    page_err = 0.0f;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// of rows</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  std::vector&lt;float&gt; gradients(blob_count);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// of rows</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  std::vector&lt;float&gt; errors(blob_count);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  row_index = 0;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">for</span> (block_it.mark_cycle_pt (); !block_it.cycled_list ();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;       block_it.forward ()) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="a02870.html">POLY_BLOCK</a>* pb = block_it.data()-&gt;block-&gt;pdblk.poly_block();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (pb != <span class="keyword">nullptr</span> &amp;&amp; !pb-&gt;<a class="code" href="a02870.html#a4eb55be5fc2ed33312e4410f5ee2cf88">IsText</a>())</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">continue</span>;  <span class="comment">// Pretend non-text blocks don&#39;t exist.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    TO_ROW_IT row_it(block_it.data ()-&gt;get_rows());</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      row = row_it.data ();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      blob_count = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ()-&gt;length ();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      row_err = static_cast&lt;int32_t&gt;(ceil (row-&gt;<a class="code" href="a02670.html#af28160f5ba759f6d8866b4e7a44f677d">line_error</a> ()));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">if</span> (row_err &lt;= 0)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        row_err = 1;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">if</span> (textord_biased_skewcalc) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        blob_count /= row_err;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">for</span> (blob_count /= row_err; blob_count &gt; 0; blob_count--) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;          gradients[row_index] = row-&gt;<a class="code" href="a02670.html#aeba2135f371c89fd310f0443f79c8f43">line_m</a> ();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;          errors[row_index] = row-&gt;<a class="code" href="a02670.html#af28160f5ba759f6d8866b4e7a44f677d">line_error</a> ();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          row_index++;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (blob_count &gt;= <a class="code" href="a01106.html#a2e0651148ade15830933aa26b1e63c2f">textord_min_blobs_in_row</a>) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                 <span class="comment">//get gradient</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        gradients[row_index] = row-&gt;<a class="code" href="a02670.html#aeba2135f371c89fd310f0443f79c8f43">line_m</a> ();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        errors[row_index] = row-&gt;<a class="code" href="a02670.html#af28160f5ba759f6d8866b4e7a44f677d">line_error</a> ();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        row_index++;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">if</span> (row_index == 0) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                 <span class="comment">//desperate</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">for</span> (block_it.mark_cycle_pt (); !block_it.cycled_list ();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;         block_it.forward ()) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <a class="code" href="a02870.html">POLY_BLOCK</a>* pb = block_it.data()-&gt;block-&gt;pdblk.poly_block();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">if</span> (pb != <span class="keyword">nullptr</span> &amp;&amp; !pb-&gt;<a class="code" href="a02870.html#a4eb55be5fc2ed33312e4410f5ee2cf88">IsText</a>())</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// Pretend non-text blocks don&#39;t exist.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      TO_ROW_IT row_it(block_it.data()-&gt;get_rows());</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list ();</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;           row_it.forward ()) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        row = row_it.data ();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        gradients[row_index] = row-&gt;<a class="code" href="a02670.html#aeba2135f371c89fd310f0443f79c8f43">line_m</a> ();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        errors[row_index] = row-&gt;<a class="code" href="a02670.html#af28160f5ba759f6d8866b4e7a44f677d">line_error</a> ();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        row_index++;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  row_count = row_index;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  row_index = <a class="code" href="a00452.html#adf07d3ffc714e6fd2731a59c34a00bc4">choose_nth_item</a> (static_cast&lt;int32_t&gt;(row_count * <a class="code" href="a01106.html#a0f7b13f26dd172ac8ac430ef10ff62fb">textord_skew_ile</a>),</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    &amp;gradients[0], row_count);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  page_m = gradients[row_index];</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  row_index = <a class="code" href="a00452.html#adf07d3ffc714e6fd2731a59c34a00bc4">choose_nth_item</a> (static_cast&lt;int32_t&gt;(row_count * <a class="code" href="a01106.html#a0f7b13f26dd172ac8ac430ef10ff62fb">textord_skew_ile</a>),</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    &amp;errors[0], row_count);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  page_err = errors[row_index];</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7e4a0a63f3a32dff3bdf329b09ebe3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7e4a0a63f3a32dff3bdf329b09ebe3f">&#9670;&nbsp;</a></span>compute_row_descdrop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t compute_row_descdrop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xheight_blob_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02918.html">STATS</a> *&#160;</td>
          <td class="paramname"><em>asc_heights</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01563">1563</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                                                                       {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">// Count how many potential ascenders are in this row.</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="keywordtype">int</span> i_min = asc_heights-&gt;<a class="code" href="a02918.html#ac31620279068e720a8cbe2c55cc0d186">min_bucket</a>();</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="keywordflow">if</span> ((i_min / row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a>) &lt; <a class="code" href="a01106.html#a933873395501e7e5de97374eef4c20e9">textord_ascx_ratio_min</a>) {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    i_min = static_cast&lt;int&gt;(</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        floor(row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> * <a class="code" href="a01106.html#a933873395501e7e5de97374eef4c20e9">textord_ascx_ratio_min</a> + 0.5));</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="keywordtype">int</span> i_max = asc_heights-&gt;<a class="code" href="a02918.html#a1f159950b60f6662b9b5df6dbb7554d3">max_bucket</a>();</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keywordflow">if</span> ((i_max / row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a>) &gt; <a class="code" href="a01106.html#a1d7f3344ad5b8485a32d91a83e4511b4">textord_ascx_ratio_max</a>) {</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    i_max = static_cast&lt;int&gt;(floor(row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> * <a class="code" href="a01106.html#a1d7f3344ad5b8485a32d91a83e4511b4">textord_ascx_ratio_max</a>));</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  }</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keywordtype">int</span> num_potential_asc = 0;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = i_min; i &lt;= i_max; ++i) {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    num_potential_asc += asc_heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(i);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keyword">auto</span> min_height =</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    static_cast&lt;int32_t&gt;(floor(row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> * <a class="code" href="a01106.html#aa0d43ef1627ff8a2a8ee79a90ecdf892">textord_descx_ratio_min</a> + 0.5));</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keyword">auto</span> max_height =</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    static_cast&lt;int32_t&gt;(floor(row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> * <a class="code" href="a01106.html#a5e93a6f5938ea681bc18b6d6c45f5e0a">textord_descx_ratio_max</a>));</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="keywordtype">float</span> xcentre;                 <span class="comment">// centre of blob</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="keywordtype">float</span> height;                  <span class="comment">// height of blob</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  BLOBNBOX_IT blob_it = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>();</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <a class="code" href="a02666.html">BLOBNBOX</a> *blob;                <span class="comment">// current blob</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <a class="code" href="a02918.html">STATS</a> heights (min_height, max_height + 1);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="keywordflow">for</span> (blob_it.mark_cycle_pt(); !blob_it.cycled_list(); blob_it.forward()) {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    blob = blob_it.data();</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">if</span> (!blob-&gt;<a class="code" href="a02666.html#ab8e7a33dc069de65fa4b6d0cab61d0c1">joined_to_prev</a>()) {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      xcentre = (blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a>() +</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                 blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a>()) / 2.0f;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      height = (gradient * xcentre + row-&gt;<a class="code" href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">parallel_c</a>() -</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a>());</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="keywordflow">if</span> (height &gt;= min_height &amp;&amp; height &lt;= max_height)</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        heights.add(static_cast&lt;int&gt;(floor(height + 0.5)), 1);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="keywordtype">int</span> blob_index = heights.mode();  <span class="comment">// find mode</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="keywordtype">int</span> blob_count = heights.pile_count(blob_index);  <span class="comment">// get count of mode</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="keywordtype">float</span> total_fraction =</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    (textord_descheight_mode_fraction + <a class="code" href="a01106.html#aed72a4cf1cf5709c096540587eacffbc">textord_ascheight_mode_fraction</a>);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordflow">if</span> (static_cast&lt;float&gt;(blob_count + num_potential_asc) &lt;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      xheight_blob_count * total_fraction) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    blob_count = 0;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="keywordtype">int</span> descdrop = blob_count &gt; 0 ? -blob_index : 0;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Descdrop: %d (potential ascenders %d, descenders %d)\n&quot;</span>,</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            descdrop, num_potential_asc, blob_count);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    heights.print();</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  }</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keywordflow">return</span> descdrop;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9857b40ae88ca6fdca117868eb476d01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9857b40ae88ca6fdca117868eb476d01">&#9670;&nbsp;</a></span>compute_row_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_row_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01143">1143</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  int32_t row_index;               <span class="comment">//of median</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *prev_row;              <span class="comment">//previous row</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keywordtype">float</span> iqr;                     <span class="comment">//inter quartile range</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                                 <span class="comment">//number of rows</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  int16_t rowcount = row_it.length ();</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// for choose nth</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  std::vector&lt;TO_ROW*&gt; rows(rowcount);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  rowcount = 0;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  prev_row = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  row_it.move_to_last ();        <span class="comment">//start at bottom</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    row = row_it.data ();</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keywordflow">if</span> (prev_row != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      rows[rowcount++] = prev_row;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      prev_row-&gt;<a class="code" href="a02670.html#a54a1cf2bfa1478d255a8b79f51ca8e59">spacing</a> = row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> () - prev_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> ();</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="keywordflow">if</span> (testing_on)</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Row at %g yields spacing of %g\n&quot;</span>,</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;          row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> (), prev_row-&gt;<a class="code" href="a02670.html#a54a1cf2bfa1478d255a8b79f51ca8e59">spacing</a>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    prev_row = row;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    row_it.backward ();</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keywordflow">while</span> (!row_it.at_last ());</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  block-&gt;<a class="code" href="a02674.html#a6a76a4282791ee8f215c0e8b8dd7db16">key_row</a> = prev_row;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  block-&gt;<a class="code" href="a02674.html#abb8334b4a0c2b2625516a1c4b54cbf1f">baseline_offset</a> =</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    fmod (prev_row-&gt;<a class="code" href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">parallel_c</a> (), block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a>);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keywordflow">if</span> (testing_on)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Blob based spacing=(%g,%g), offset=%g&quot;</span>,</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>, block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a>, block-&gt;<a class="code" href="a02674.html#abb8334b4a0c2b2625516a1c4b54cbf1f">baseline_offset</a>);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordflow">if</span> (rowcount &gt; 0) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    row_index = <a class="code" href="a00452.html#adf07d3ffc714e6fd2731a59c34a00bc4">choose_nth_item</a>(rowcount * 3 / 4, &amp;rows[0], rowcount,</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="keyword">sizeof</span> (<a class="code" href="a02670.html">TO_ROW</a> *), <a class="code" href="a01106.html#aa3013c07bcccb3f1efeb4686ed340609">row_spacing_order</a>);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    iqr = rows[row_index]-&gt;spacing;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    row_index = <a class="code" href="a00452.html#adf07d3ffc714e6fd2731a59c34a00bc4">choose_nth_item</a>(rowcount / 4, &amp;rows[0], rowcount,</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keyword">sizeof</span> (<a class="code" href="a02670.html">TO_ROW</a> *), <a class="code" href="a01106.html#aa3013c07bcccb3f1efeb4686ed340609">row_spacing_order</a>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    iqr -= rows[row_index]-&gt;spacing;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    row_index = <a class="code" href="a00452.html#adf07d3ffc714e6fd2731a59c34a00bc4">choose_nth_item</a>(rowcount / 2, &amp;rows[0], rowcount,</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      <span class="keyword">sizeof</span> (<a class="code" href="a02670.html">TO_ROW</a> *), <a class="code" href="a01106.html#aa3013c07bcccb3f1efeb4686ed340609">row_spacing_order</a>);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    block-&gt;<a class="code" href="a02674.html#a6a76a4282791ee8f215c0e8b8dd7db16">key_row</a> = rows[row_index];</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> (testing_on)</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot; row based=%g(%g)&quot;</span>, rows[row_index]-&gt;spacing, iqr);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">if</span> (rowcount &gt; 2</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    &amp;&amp; iqr &lt; rows[row_index]-&gt;spacing * <a class="code" href="a01106.html#a3fd4348aaf95237fce879822760e2b25">textord_linespace_iqrlimit</a>) {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="a01106.html#ad38832cdfc8f47c85cb5a626760c7835">textord_new_initial_xheight</a>) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="keywordflow">if</span> (rows[row_index]-&gt;spacing &lt; block-&gt;line_spacing</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;          &amp;&amp; rows[row_index]-&gt;spacing &gt; block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>)</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;          <span class="comment">//within range</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;          block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> = rows[row_index]-&gt;spacing;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="comment">//spacing=size</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rows[row_index]-&gt;spacing &gt; block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a>)</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;          block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> = block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="comment">//too big so use max</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">if</span> (rows[row_index]-&gt;spacing &lt; block-&gt;line_spacing)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;          block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> = rows[row_index]-&gt;spacing;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;          block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> = block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="comment">//too big so use max</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="keywordflow">if</span> (block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> &lt; <a class="code" href="a01106.html#a995fba1cadc1bb12bd1861d2e1d4bf4a">textord_min_xheight</a>)</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> = (float) <a class="code" href="a01106.html#a995fba1cadc1bb12bd1861d2e1d4bf4a">textord_min_xheight</a>;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a> = rows[row_index]-&gt;spacing;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      block-&gt;<a class="code" href="a02674.html#abda136ff240577928343ca37453aca7a">max_blob_size</a> =</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a> * <a class="code" href="a01106.html#a9dcb3e14fc8bb00dcde4f03e25f3ac5b">textord_excess_blobsize</a>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    block-&gt;<a class="code" href="a02674.html#abb8334b4a0c2b2625516a1c4b54cbf1f">baseline_offset</a> = fmod (rows[row_index]-&gt;intercept (),</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">if</span> (testing_on)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;\nEstimate line size=%g, spacing=%g, offset=%g\n&quot;</span>,</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>, block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a>, block-&gt;<a class="code" href="a02674.html#abb8334b4a0c2b2625516a1c4b54cbf1f">baseline_offset</a>);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c2a6be7aee93caa4d9f9ca9f919b2a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c2a6be7aee93caa4d9f9ca9f919b2a1">&#9670;&nbsp;</a></span>compute_xheight_from_modes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compute_xheight_from_modes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02918.html">STATS</a> *&#160;</td>
          <td class="paramname"><em>heights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02918.html">STATS</a> *&#160;</td>
          <td class="paramname"><em>floating_heights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cap_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>xheight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>ascrise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01467">1467</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                                                    {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="keywordtype">int</span> blob_index = heights-&gt;<a class="code" href="a02918.html#aec56187613797fe011b1f3b12021e0e1">mode</a>();  <span class="comment">// find mode</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordtype">int</span> blob_count = heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(blob_index);  <span class="comment">// get count of mode</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;min_height=%d, max_height=%d, mode=%d, count=%d, total=%d\n&quot;</span>,</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            min_height, max_height, blob_index, blob_count,</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;            heights-&gt;<a class="code" href="a02918.html#a92ab39b34f7a99ff3272e614a946513c">get_total</a>());</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    heights-&gt;<a class="code" href="a02918.html#a99d575509790164609442b71e4cb9982">print</a>();</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    floating_heights-&gt;<a class="code" href="a02918.html#a99d575509790164609442b71e4cb9982">print</a>();</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  }</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">if</span> (blob_count == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="keywordtype">int</span> modes[<a class="code" href="a01106.html#af64730edc37ce30d66430f2dd54a2089">MAX_HEIGHT_MODES</a>];  <span class="comment">// biggest piles</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordtype">bool</span> in_best_pile = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordtype">int</span> prev_size = -INT32_MAX;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordtype">int</span> best_count = 0;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="keywordtype">int</span> mode_count = <a class="code" href="a01106.html#a1f885e71201e4d2dc7db3c78a98cbb91">compute_height_modes</a>(heights, min_height, max_height,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                                        modes, <a class="code" href="a01106.html#af64730edc37ce30d66430f2dd54a2089">MAX_HEIGHT_MODES</a>);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordflow">if</span> (cap_only &amp;&amp; mode_count &gt; 1)</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    mode_count = 1;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="keywordtype">int</span> x;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;found %d modes: &quot;</span>, mode_count);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">for</span> (x = 0; x &lt; mode_count; x++) <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%d &quot;</span>, modes[x]);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="keywordflow">for</span> (x = 0; x &lt; mode_count - 1; x++) {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">if</span> (modes[x] != prev_size + 1)</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      in_best_pile = <span class="keyword">false</span>;    <span class="comment">// had empty height</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordtype">int</span> modes_x_count = heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(modes[x]) -</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      floating_heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(modes[x]);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span> ((modes_x_count &gt;= blob_count * <a class="code" href="a01106.html#a0a5415d21bfad8f8e8693860230519df">textord_xheight_mode_fraction</a>) &amp;&amp;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        (in_best_pile || modes_x_count &gt; best_count)) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> asc = x + 1; asc &lt; mode_count; asc++) {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <span class="keywordtype">float</span> ratio =</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;          static_cast&lt;float&gt;(modes[asc]) / static_cast&lt;float&gt;(modes[x]);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a01106.html#a933873395501e7e5de97374eef4c20e9">textord_ascx_ratio_min</a> &lt; ratio &amp;&amp;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            ratio &lt; <a class="code" href="a01106.html#a1d7f3344ad5b8485a32d91a83e4511b4">textord_ascx_ratio_max</a> &amp;&amp;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            (heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(modes[asc]) &gt;=</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;             blob_count * <a class="code" href="a01106.html#aed72a4cf1cf5709c096540587eacffbc">textord_ascheight_mode_fraction</a>)) {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;          <span class="keywordflow">if</span> (modes_x_count &gt; best_count) {</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            in_best_pile = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            best_count = modes_x_count;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;          }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;            <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;X=%d, asc=%d, count=%d, ratio=%g\n&quot;</span>,</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                    modes[x], modes[asc]-modes[x], modes_x_count, ratio);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;          }</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;          prev_size = modes[x];</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;          *xheight = static_cast&lt;float&gt;(modes[x]);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;          *ascrise = static_cast&lt;float&gt;(modes[asc] - modes[x]);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keywordflow">if</span> (*xheight == 0) {  <span class="comment">// single mode</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="comment">// Remove counts of the &quot;floating&quot; blobs (the one whose height is too</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="comment">// small in relation to it&#39;s top end of the bounding box) from heights</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="comment">// before computing the single-mode xheight.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment">// Restore the counts in heights after the mode is found, since</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="comment">// floating blobs might be useful for determining potential ascenders</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="comment">// in compute_row_descdrop().</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="keywordflow">if</span> (floating_heights-&gt;<a class="code" href="a02918.html#a92ab39b34f7a99ff3272e614a946513c">get_total</a>() &gt; 0) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="keywordflow">for</span> (x = min_height; x &lt; max_height; ++x) {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        heights-&gt;<a class="code" href="a02918.html#a5ce26a26c81c69a3e27616669998abe2">add</a>(x, -(floating_heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(x)));</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      }</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      blob_index = heights-&gt;<a class="code" href="a02918.html#aec56187613797fe011b1f3b12021e0e1">mode</a>();  <span class="comment">// find the modified mode</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <span class="keywordflow">for</span> (x = min_height; x &lt; max_height; ++x) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        heights-&gt;<a class="code" href="a02918.html#a5ce26a26c81c69a3e27616669998abe2">add</a>(x, floating_heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(x));</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    *xheight = static_cast&lt;float&gt;(blob_index);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    *ascrise = 0.0f;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    best_count = heights-&gt;<a class="code" href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">pile_count</a>(blob_index);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>)</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Single mode xheight set to %g\n&quot;</span>, *xheight);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Multi-mode xheight set to %g, asc=%g\n&quot;</span>, *xheight, *ascrise);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  }</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">return</span> best_count;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a816de2bcfeae782b4ba8506075925284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a816de2bcfeae782b4ba8506075925284">&#9670;&nbsp;</a></span>correct_row_xheight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void correct_row_xheight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>xheight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ascrise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>descdrop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01685">1685</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                                                        {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <a class="code" href="a01109.html#afce0c34ba177573f61217f64c0a04d68">ROW_CATEGORY</a> row_category = <a class="code" href="a01109.html#af91de8a5d97ef84af1d5ef5cadd89bdd">get_row_category</a>(row);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;correcting row xheight: row-&gt;xheight %.4f&quot;</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            <span class="stringliteral">&quot;, row-&gt;acrise %.4f row-&gt;descdrop %.4f\n&quot;</span>,</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a>, row-&gt;<a class="code" href="a02670.html#acf8bf7f0f335788e106955b8142f832a">ascrise</a>, row-&gt;<a class="code" href="a02670.html#acc50308b9a0cd5c73184de33971c55a8">descdrop</a>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="keywordtype">bool</span> normal_xheight =</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <a class="code" href="a01109.html#a06639b8bf2e9edec8aed7e189b312f88">within_error_margin</a>(row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a>, xheight, <a class="code" href="a01106.html#aa6de330c2e2d5c231611e776ebb577b3">textord_xheight_error_margin</a>);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keywordtype">bool</span> cap_xheight =</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <a class="code" href="a01109.html#a06639b8bf2e9edec8aed7e189b312f88">within_error_margin</a>(row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a>, xheight + ascrise,</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                        <a class="code" href="a01106.html#aa6de330c2e2d5c231611e776ebb577b3">textord_xheight_error_margin</a>);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="comment">// Use the average xheight/ascrise for the following cases:</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="comment">// -- the xheight of the row could not be determined at all</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="comment">// -- the row has descenders (e.g. &quot;many groups&quot;, &quot;ISBN 12345 p.3&quot;)</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">//    and its xheight is close to either cap height or average xheight</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">// -- the row does not have ascenders or descenders, but its xheight</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="comment">//    is close to the average block xheight (e.g. row with &quot;www.mmm.com&quot;)</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="keywordflow">if</span> (row_category == <a class="code" href="a01109.html#afce0c34ba177573f61217f64c0a04d68aba1649106cf3c6301a0cd938b01af28e">ROW_ASCENDERS_FOUND</a>) {</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="keywordflow">if</span> (row-&gt;<a class="code" href="a02670.html#acc50308b9a0cd5c73184de33971c55a8">descdrop</a> &gt;= 0.0) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      row-&gt;<a class="code" href="a02670.html#acc50308b9a0cd5c73184de33971c55a8">descdrop</a> = row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> * (descdrop / xheight);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    }</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (row_category == <a class="code" href="a01109.html#afce0c34ba177573f61217f64c0a04d68acd93bee831837976a1dabbccb5583354">ROW_INVALID</a> ||</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;             (row_category == <a class="code" href="a01109.html#afce0c34ba177573f61217f64c0a04d68a25bbfc450f12f60f7a5882e37973a4b6">ROW_DESCENDERS_FOUND</a> &amp;&amp;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;              (normal_xheight || cap_xheight)) ||</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;              (row_category == <a class="code" href="a01109.html#afce0c34ba177573f61217f64c0a04d68ab5102ae2a7fc9f423729da68d441fa7b">ROW_UNKNOWN</a> &amp;&amp; normal_xheight)) {</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;using average xheight\n&quot;</span>);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> = xheight;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    row-&gt;<a class="code" href="a02670.html#acf8bf7f0f335788e106955b8142f832a">ascrise</a> = ascrise;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    row-&gt;<a class="code" href="a02670.html#acc50308b9a0cd5c73184de33971c55a8">descdrop</a> = descdrop;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (row_category == <a class="code" href="a01109.html#afce0c34ba177573f61217f64c0a04d68a25bbfc450f12f60f7a5882e37973a4b6">ROW_DESCENDERS_FOUND</a>) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="comment">// Assume this is a row with mostly lowercase letters and it&#39;s xheight</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="comment">// is computed correctly (unfortunately there is no way to distinguish</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="comment">// this from the case when descenders are found, but the most common</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="comment">// height is capheight).</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;lowercase, corrected ascrise\n&quot;</span>);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    row-&gt;<a class="code" href="a02670.html#acf8bf7f0f335788e106955b8142f832a">ascrise</a> = row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> * (ascrise / xheight);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (row_category == <a class="code" href="a01109.html#afce0c34ba177573f61217f64c0a04d68ab5102ae2a7fc9f423729da68d441fa7b">ROW_UNKNOWN</a>) {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// Otherwise assume this row is an all-caps or small-caps row</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">// and adjust xheight and ascrise of the row.</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160; </div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    row-&gt;<a class="code" href="a02670.html#a242facf2df3fde492b47a38b4c359119">all_caps</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">if</span> (cap_xheight) { <span class="comment">// regular all caps</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;all caps\n&quot;</span>);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> = xheight;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      row-&gt;<a class="code" href="a02670.html#acf8bf7f0f335788e106955b8142f832a">ascrise</a> = ascrise;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      row-&gt;<a class="code" href="a02670.html#acc50308b9a0cd5c73184de33971c55a8">descdrop</a> = descdrop;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    } <span class="keywordflow">else</span> {  <span class="comment">// small caps or caps with an odd xheight</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <span class="keywordflow">if</span> (row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> &lt; xheight + ascrise &amp;&amp; row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> &gt; xheight) {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;          <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;small caps\n&quot;</span>);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;          <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;all caps with irregular xheight\n&quot;</span>);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        }</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      }</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      row-&gt;<a class="code" href="a02670.html#acf8bf7f0f335788e106955b8142f832a">ascrise</a> = row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> * (ascrise / (xheight + ascrise));</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> -= row-&gt;<a class="code" href="a02670.html#acf8bf7f0f335788e106955b8142f832a">ascrise</a>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      row-&gt;<a class="code" href="a02670.html#acc50308b9a0cd5c73184de33971c55a8">descdrop</a> = row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a> * (descdrop / xheight);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>) {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;corrected row-&gt;xheight = %.4f, row-&gt;acrise = %.4f, row-&gt;descdrop&quot;</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            <span class="stringliteral">&quot; = %.4f\n&quot;</span>, row-&gt;<a class="code" href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">xheight</a>, row-&gt;<a class="code" href="a02670.html#acf8bf7f0f335788e106955b8142f832a">ascrise</a>, row-&gt;<a class="code" href="a02670.html#acc50308b9a0cd5c73184de33971c55a8">descdrop</a>);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  }</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a148adda99d1cb8a8278fd3d89758c976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a148adda99d1cb8a8278fd3d89758c976">&#9670;&nbsp;</a></span>delete_non_dropout_rows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_non_dropout_rows </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02866.html">FCOORD</a>&#160;</td>
          <td class="paramname"><em>rotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>block_edge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>delete_non_dropout_rows</p>
<p>Compute the linespacing and offset. </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00570">570</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <a class="code" href="a02898.html">TBOX</a> block_box;                 <span class="comment">//deskewed block</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  int32_t max_y;                   <span class="comment">//in block</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  int32_t min_y;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  int32_t line_index;              <span class="comment">//of scan line</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  int32_t line_count;              <span class="comment">//no of scan lines</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  int32_t <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>;                <span class="comment">//to drop-out</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  int32_t xleft;                   <span class="comment">//of block</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  int32_t ybottom;                 <span class="comment">//of block</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  BLOBNBOX_IT blob_it = &amp;block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">if</span> (row_it.length () == 0)</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">return</span>;                      <span class="comment">//empty block</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  block_box = <a class="code" href="a01106.html#afcd9d2bb6d7f6b16e31ed5a75799f43d">deskew_block_coords</a> (block, gradient);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  xleft = block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a> ().left ();</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  ybottom = block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a> ().bottom ();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  min_y = block_box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> () - 1;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  max_y = block_box.<a class="code" href="a02898.html#a5dc64d0677b5d65385bc07a78cf49c4d">top</a> () + 1;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    line_index = static_cast&lt;int32_t&gt;(floor (row_it.data ()-&gt;intercept ()));</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">if</span> (line_index &lt;= min_y)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      min_y = line_index - 1;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (line_index &gt;= max_y)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      max_y = line_index + 1;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  line_count = max_y - min_y + 1;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordflow">if</span> (line_count &lt;= 0)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span>;                      <span class="comment">//empty block</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// change in occupation</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  std::vector&lt;int32_t&gt; deltas(line_count);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// of pixel coords</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  std::vector&lt;int32_t&gt; occupation(line_count);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <a class="code" href="a01106.html#ab53d0e7dc865a6960ecbb2dd8d3eee11">compute_line_occupation</a>(block, gradient, min_y, max_y, &amp;occupation[0], &amp;deltas[0]);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="a01106.html#a8a2d5c881bb140c9199880bcadb6336e">compute_occupation_threshold</a> (static_cast&lt;int32_t&gt;(ceil (block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a> *</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    (<a class="code" href="a02702.html#a7e8a361df0831d295edf1c150c3ca3a3">tesseract::CCStruct::kDescenderFraction</a> +</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <a class="code" href="a02702.html#a9d71fddad74d9418e106713cd643b919">tesseract::CCStruct::kAscenderFraction</a>))),</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    static_cast&lt;int32_t&gt;(ceil (block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a> *</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    (<a class="code" href="a02702.html#a737fdb37b9401ad3d04371c1bd4a0b17">tesseract::CCStruct::kXHeightFraction</a> +</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="a02702.html#a9d71fddad74d9418e106713cd643b919">tesseract::CCStruct::kAscenderFraction</a>))),</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    max_y - min_y + 1, &amp;occupation[0], &amp;deltas[0]);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">if</span> (testing_on) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="a01058.html#a2aa670264559025dd978a4f78255a2f4">draw_occupation</a>(xleft, ybottom, min_y, max_y, &amp;occupation[0], &amp;deltas[0]);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="a01106.html#a03acb44a5531c614c00fd012c88e799b">compute_dropout_distances</a>(&amp;occupation[0], &amp;deltas[0], line_count);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    row = row_it.data ();</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    line_index = static_cast&lt;int32_t&gt;(floor (row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> ()));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> = deltas[line_index - min_y];</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01106.html#a0483d7251f1054b0ab8697a9cbc0997c">find_best_dropout_row</a> (row, <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>, block-&gt;<a class="code" href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">line_spacing</a> / 2,</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    line_index, &amp;row_it, testing_on)) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">if</span> (testing_on)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <a class="code" href="a01058.html#a45fd44462f3b32c42b22004d951af0b6">plot_parallel_row</a>(row, gradient, block_edge,</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                          <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0eab2b208fc9a5e2774f92cf3e768982">ScrollView::WHITE</a>, rotation);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      blob_it.add_list_after (row_it.data ()-&gt;blob_list ());</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keyword">delete</span> row_it.extract ();  <span class="comment">//too far away</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    blob_it.add_list_after (row_it.data ()-&gt;blob_list ());</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afcd9d2bb6d7f6b16e31ed5a75799f43d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcd9d2bb6d7f6b16e31ed5a75799f43d">&#9670;&nbsp;</a></span>deskew_block_coords()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a02898.html">TBOX</a> deskew_block_coords </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00732">732</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                         {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <a class="code" href="a02898.html">TBOX</a> result;                    <span class="comment">//block bounds</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <a class="code" href="a02898.html">TBOX</a> blob_box;                  <span class="comment">//of block</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="a02866.html">FCOORD</a> rotation;               <span class="comment">//deskew vector</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordtype">float</span> length;                  <span class="comment">//of gradient vector</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="a02666.html">BLOBNBOX</a> *blob;                <span class="comment">//current blob</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  BLOBNBOX_IT blob_it;           <span class="comment">//iterator</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  length = sqrt (gradient * gradient + 1);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  rotation = <a class="code" href="a02866.html">FCOORD</a> (1 / length, -gradient / length);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    row = row_it.data ();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    blob_it.set_to_list (row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ());</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">for</span> (blob_it.mark_cycle_pt (); !blob_it.cycled_list ();</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    blob_it.forward ()) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      blob = blob_it.data ();</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      blob_box = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ();</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      blob_box.<a class="code" href="a02898.html#a428e14544aeb44064bc8637d920211a0">rotate</a> (rotation);<span class="comment">//de-skew it</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      result += blob_box;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a51573e6a073161cf5c4e9b16040406e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51573e6a073161cf5c4e9b16040406e2">&#9670;&nbsp;</a></span>expand_rows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void expand_rows </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02858.html">ICOORD</a>&#160;</td>
          <td class="paramname"><em>page_tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02866.html">FCOORD</a>&#160;</td>
          <td class="paramname"><em>rotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>block_edge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00949">949</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordtype">bool</span> swallowed_row;           <span class="comment">//eaten a neighbour</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordtype">float</span> y_max, y_min;            <span class="comment">//new row limits</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordtype">float</span> y_bottom, y_top;         <span class="comment">//allowed limits</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *test_row;              <span class="comment">//next row</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                 <span class="comment">//iterators</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  BLOBNBOX_IT blob_it = &amp;block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <a class="code" href="a01058.html#afd5bee79bdf1ea9c211c3a3519d25251">create_to_win</a>(page_tr);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <a class="code" href="a01106.html#af6c80d96579d43cb4e29057c8f1e0f41">adjust_row_limits</a>(block);  <span class="comment">//shift min,max.</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#ad38832cdfc8f47c85cb5a626760c7835">textord_new_initial_xheight</a>) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> (block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ()-&gt;length () == 0)</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="a01106.html#a9857b40ae88ca6fdca117868eb476d01">compute_row_stats</a>(block, <a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <a class="code" href="a01106.html#aadee27bcfa70b6b74be490c1ab356672">assign_blobs_to_rows</a> (block, &amp;gradient, 4, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">//get real membership</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="keywordflow">if</span> (block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ()-&gt;length () == 0)</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="a01106.html#a28df0de48e824ccc887c91caeaf2e7d8">fit_parallel_rows</a>(block,</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                    gradient,</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                    rotation,</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                    block_edge,</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    <a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="a01106.html#ad38832cdfc8f47c85cb5a626760c7835">textord_new_initial_xheight</a>)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="a01106.html#a9857b40ae88ca6fdca117868eb476d01">compute_row_stats</a>(block, <a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  row_it.move_to_last ();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    row = row_it.data ();</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    y_max = row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ();       <span class="comment">//get current limits</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    y_min = row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> ();</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    y_bottom = row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> () - block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> * textord_expansion_factor *</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <a class="code" href="a02702.html#a7e8a361df0831d295edf1c150c3ca3a3">tesseract::CCStruct::kDescenderFraction</a>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    y_top = row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> () + block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> * textord_expansion_factor *</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        (<a class="code" href="a02702.html#a737fdb37b9401ad3d04371c1bd4a0b17">tesseract::CCStruct::kXHeightFraction</a> +</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;         <a class="code" href="a02702.html#a9d71fddad74d9418e106713cd643b919">tesseract::CCStruct::kAscenderFraction</a>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (y_min &gt; y_bottom) {      <span class="comment">//expansion allowed</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Expanding bottom of row at %f from %f to %f\n&quot;</span>,</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>(), y_min, y_bottom);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                                 <span class="comment">//expandable</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      swallowed_row = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">while</span> (swallowed_row &amp;&amp; !row_it.at_last ()) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        swallowed_row = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                                 <span class="comment">//get next one</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        test_row = row_it.data_relative (1);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                 <span class="comment">//overlaps space</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keywordflow">if</span> (test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () &gt; y_bottom) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;          <span class="keywordflow">if</span> (test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () &gt; y_bottom) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;              <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Eating row below at %f\n&quot;</span>, test_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>());</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            row_it.forward ();</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;              <a class="code" href="a01058.html#a45fd44462f3b32c42b22004d951af0b6">plot_parallel_row</a>(test_row,</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                                gradient,</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                                block_edge,</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                                <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0eab2b208fc9a5e2774f92cf3e768982">ScrollView::WHITE</a>,</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                                rotation);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            blob_it.set_to_list (row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ());</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            blob_it.add_list_after (test_row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ());</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                                 <span class="comment">//swallow complete row</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <span class="keyword">delete</span> row_it.extract ();</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            row_it.backward ();</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            swallowed_row = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;          }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () &lt; y_min) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                                 <span class="comment">//shorter limit</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            y_bottom = test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ();</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;              <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Truncating limit to %f due to touching row at %f\n&quot;</span>,</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                      y_bottom, test_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>());</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;          }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            y_bottom = y_min;    <span class="comment">//can&#39;t expand it</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;              <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Not expanding limit beyond %f due to touching row at %f\n&quot;</span>,</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                      y_bottom, test_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>());</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;          }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      y_min = y_bottom;          <span class="comment">//expand it</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (y_max &lt; y_top) {         <span class="comment">//expansion allowed</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Expanding top of row at %f from %f to %f\n&quot;</span>,</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>(), y_max, y_top);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      swallowed_row = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">while</span> (swallowed_row &amp;&amp; !row_it.at_first ()) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        swallowed_row = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                                 <span class="comment">//get one above</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        test_row = row_it.data_relative (-1);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keywordflow">if</span> (test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () &lt; y_top) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;          <span class="keywordflow">if</span> (test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () &lt; y_top) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;              <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Eating row above at %f\n&quot;</span>, test_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>());</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            row_it.backward ();</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            blob_it.set_to_list (row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ());</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;              <a class="code" href="a01058.html#a45fd44462f3b32c42b22004d951af0b6">plot_parallel_row</a>(test_row,</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                                gradient,</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                                block_edge,</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                                <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0eab2b208fc9a5e2774f92cf3e768982">ScrollView::WHITE</a>,</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                                rotation);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            blob_it.add_list_after (test_row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ());</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                                 <span class="comment">//swallow complete row</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            <span class="keyword">delete</span> row_it.extract ();</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            row_it.forward ();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            swallowed_row = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;          }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () &lt; y_max) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                                 <span class="comment">//shorter limit</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            y_top = test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> ();</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;              <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Truncating limit to %f due to touching row at %f\n&quot;</span>,</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                      y_top, test_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>());</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;          }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            y_top = y_max;       <span class="comment">//can&#39;t expand it</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a> &amp;&amp; testing_on)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;              <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Not expanding limit beyond %f due to touching row at %f\n&quot;</span>,</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                      y_top, test_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>());</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;          }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      y_max = y_top;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                                 <span class="comment">//new limits</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    row-&gt;<a class="code" href="a02670.html#a5a5bfd657e97c2fed2cf6153eca0e98a">set_limits</a> (y_min, y_max);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    row_it.backward ();</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">while</span> (!row_it.at_last ());</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0bb04d9973fd564b4ada5c96c24adb09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb04d9973fd564b4ada5c96c24adb09">&#9670;&nbsp;</a></span>fill_heights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fill_heights </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02918.html">STATS</a> *&#160;</td>
          <td class="paramname"><em>heights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02918.html">STATS</a> *&#160;</td>
          <td class="paramname"><em>floating_heights</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01406">1406</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                                                                           {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="keywordtype">float</span> xcentre;                 <span class="comment">// centre of blob</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="keywordtype">float</span> top;                     <span class="comment">// top y coord of blob</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="keywordtype">float</span> height;                  <span class="comment">// height of blob</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <a class="code" href="a02666.html">BLOBNBOX</a> *blob;                <span class="comment">// current blob</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="keywordtype">int</span> repeated_set;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  BLOBNBOX_IT blob_it = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>();</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keywordflow">if</span> (blob_it.empty()) <span class="keywordflow">return</span>;  <span class="comment">// no blobs in this row</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="keywordtype">bool</span> has_rep_chars =</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    row-&gt;<a class="code" href="a02670.html#a8e5ff46f920ae85700ae8b281eb0e8d8">rep_chars_marked</a>() &amp;&amp; row-&gt;<a class="code" href="a02670.html#a9d190f827fd90de0b4e98d5a8f47064a">num_repeated_sets</a>() &gt; 0;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    blob = blob_it.data();</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">if</span> (!blob-&gt;<a class="code" href="a02666.html#ab8e7a33dc069de65fa4b6d0cab61d0c1">joined_to_prev</a>()) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      xcentre = (blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a>() +</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                 blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a>()) / 2.0f;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      top = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a5dc64d0677b5d65385bc07a78cf49c4d">top</a>();</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      height = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a72fcb736ed0ddeae95e6a51b3bf8d979">height</a>();</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa6f67dd9a83c5bcda44414b45dd30899">textord_fix_xheight_bug</a>)</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        top -= row-&gt;<a class="code" href="a02670.html#a611050c4612df0ccd0f2d64ca0005b9b">baseline</a>.<a class="code" href="a02886.html#a6d9a420087cfe7fa3349cabb048de02f">y</a>(xcentre);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        top -= gradient * xcentre + row-&gt;<a class="code" href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">parallel_c</a>();</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <span class="keywordflow">if</span> (top &gt;= min_height &amp;&amp; top &lt;= max_height) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        heights-&gt;<a class="code" href="a02918.html#a5ce26a26c81c69a3e27616669998abe2">add</a>(static_cast&lt;int32_t&gt;(floor(top + 0.5)), 1);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        <span class="keywordflow">if</span> (height / top &lt; <a class="code" href="a01106.html#a1351fa9ba641f131420149782666b565">textord_min_blob_height_fraction</a>) {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;          floating_heights-&gt;<a class="code" href="a02918.html#a5ce26a26c81c69a3e27616669998abe2">add</a>(static_cast&lt;int32_t&gt;(floor(top + 0.5)), 1);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      }</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="comment">// Skip repeated chars, since they are likely to skew the height stats.</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">if</span> (has_rep_chars &amp;&amp; blob-&gt;<a class="code" href="a02666.html#a6ac085f4785a04cd96645b8259057040">repeated_set</a>() != 0) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      repeated_set = blob-&gt;<a class="code" href="a02666.html#a6ac085f4785a04cd96645b8259057040">repeated_set</a>();</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      blob_it.forward();</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">while</span> (!blob_it.at_first() &amp;&amp;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;             blob_it.data()-&gt;repeated_set() == repeated_set) {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        blob_it.forward();</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a>)</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;          <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Skipping repeated char when computing xheight\n&quot;</span>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      }</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      blob_it.forward();</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  } <span class="keywordflow">while</span> (!blob_it.at_first());</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0483d7251f1054b0ab8697a9cbc0997c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0483d7251f1054b0ab8697a9cbc0997c">&#9670;&nbsp;</a></span>find_best_dropout_row()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool find_best_dropout_row </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>dist_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>line_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TO_ROW_IT *&#160;</td>
          <td class="paramname"><em>row_it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00652">652</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  int32_t next_index;              <span class="comment">// of neighbouring row</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  int32_t row_offset;              <span class="comment">//from current row</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  int32_t abs_dist;                <span class="comment">//absolute distance</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  int8_t row_inc;                  <span class="comment">//increment to row_index</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *next_row;              <span class="comment">//nextious row</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">if</span> (testing_on)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Row at %g(%g), dropout dist=%d,&quot;</span>,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> (), row-&gt;<a class="code" href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">parallel_c</a> (), <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> &lt; 0) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    row_inc = 1;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    abs_dist = -<a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    row_inc = -1;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    abs_dist = <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span> (abs_dist &gt; dist_limit) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (testing_on) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot; too far - deleting\n&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">if</span> ((distance &lt; 0 &amp;&amp; !row_it-&gt;at_last ())</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  || (<a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> &gt;= 0 &amp;&amp; !row_it-&gt;at_first ())) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    row_offset = row_inc;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      next_row = row_it-&gt;data_relative (row_offset);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      next_index = static_cast&lt;int32_t&gt;(floor (next_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> ()));</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> &lt; 0</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        &amp;&amp; next_index &lt; line_index</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        &amp;&amp; next_index &gt; line_index + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        || (<a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> &gt;= 0</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        &amp;&amp; next_index &gt; line_index</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      &amp;&amp; next_index &lt; line_index + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>)) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">if</span> (testing_on) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;          <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot; nearer neighbour (%d) at %g\n&quot;</span>,</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            line_index + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> - next_index,</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            next_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> ());</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;             <span class="comment">//other is nearer</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (next_index == line_index</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      || next_index == line_index + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">if</span> (row-&gt;<a class="code" href="a02670.html#ac08a8415b95546ecad2bbe47228f6144">believability</a> () &lt;= next_row-&gt;<a class="code" href="a02670.html#ac08a8415b95546ecad2bbe47228f6144">believability</a> ()) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          <span class="keywordflow">if</span> (testing_on) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot; equal but more believable at %g (%g/%g)\n&quot;</span>,</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;              next_row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a> (),</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;              row-&gt;<a class="code" href="a02670.html#ac08a8415b95546ecad2bbe47228f6144">believability</a> (),</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;              next_row-&gt;<a class="code" href="a02670.html#ac08a8415b95546ecad2bbe47228f6144">believability</a> ());</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;          }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;           <span class="comment">//other is more believable</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      row_offset += row_inc;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">while</span> ((next_index == line_index</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      || next_index == line_index + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a> + <a class="code" href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a>)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      &amp;&amp; row_offset &lt; row_it-&gt;length ());</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">if</span> (testing_on)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot; keeping\n&quot;</span>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab33fbd787683743809a9c6036d541ee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab33fbd787683743809a9c6036d541ee9">&#9670;&nbsp;</a></span>fit_lms_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fit_lms_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00266">266</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                               {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordtype">float</span> m, c;                    <span class="comment">// fitted line</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="a02722.html">tesseract::DetLineFit</a> lms;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  BLOBNBOX_IT blob_it = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">for</span> (blob_it.mark_cycle_pt(); !blob_it.cycled_list(); blob_it.forward()) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keyword">const</span> <a class="code" href="a02898.html">TBOX</a>&amp; box = blob_it.data()-&gt;bounding_box();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    lms.<a class="code" href="a02722.html#a4eba2b6e761080e5d1a48c9c797257b2">Add</a>(<a class="code" href="a02858.html">ICOORD</a>((box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a>() + box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a>()) / 2, box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a>()));</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordtype">double</span> error = lms.<a class="code" href="a02722.html#a768ec4a8f90593d8d679981c873f7a56">Fit</a>(&amp;m, &amp;c);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  row-&gt;<a class="code" href="a02670.html#a10818e7d801044a4d569466fa1d5f841">set_line</a>(m, c, error);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f6f87295a49c2966d0487e5fdddad3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f6f87295a49c2966d0487e5fdddad3f">&#9670;&nbsp;</a></span>fit_parallel_lms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fit_parallel_lms </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01973">1973</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                                                   {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <span class="keywordtype">float</span> c;                       <span class="comment">// fitted line</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="keywordtype">int</span> blobcount;                 <span class="comment">// no of blobs</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <a class="code" href="a02722.html">tesseract::DetLineFit</a> lms;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  BLOBNBOX_IT blob_it = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>();</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160; </div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  blobcount = 0;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <span class="keywordflow">for</span> (blob_it.mark_cycle_pt(); !blob_it.cycled_list(); blob_it.forward()) {</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <span class="keywordflow">if</span> (!blob_it.data()-&gt;joined_to_prev()) {</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <span class="keyword">const</span> <a class="code" href="a02898.html">TBOX</a>&amp; box = blob_it.data()-&gt;bounding_box();</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      lms.<a class="code" href="a02722.html#a4eba2b6e761080e5d1a48c9c797257b2">Add</a>(<a class="code" href="a02858.html">ICOORD</a>((box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a>() + box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a>()) / 2, box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a>()));</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      blobcount++;</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    }</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  }</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <span class="keywordtype">double</span> error = lms.<a class="code" href="a02722.html#a6ef9f742eafdfaad81a30a3799800725">ConstrainedFit</a>(gradient, &amp;c);</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  row-&gt;<a class="code" href="a02670.html#a448dbcbfc8d6c3c9c5e8c2fb127fd9d9">set_parallel_line</a>(gradient, c, error);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#afae95a2fffdf477ce99240ad90e63ee2">textord_straight_baselines</a> &amp;&amp; blobcount &gt; <a class="code" href="a01106.html#a3a5a462e77519ae4316a3175a5991daa">textord_lms_line_trials</a>) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    error = lms.<a class="code" href="a02722.html#a768ec4a8f90593d8d679981c873f7a56">Fit</a>(&amp;gradient, &amp;c);</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  }</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                                 <span class="comment">//set the other too</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  row-&gt;<a class="code" href="a02670.html#a10818e7d801044a4d569466fa1d5f841">set_line</a>(gradient, c, error);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a28df0de48e824ccc887c91caeaf2e7d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28df0de48e824ccc887c91caeaf2e7d8">&#9670;&nbsp;</a></span>fit_parallel_rows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fit_parallel_rows </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02866.html">FCOORD</a>&#160;</td>
          <td class="paramname"><em>rotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>block_edge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01931">1931</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> colour;                 <span class="comment">//of row</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  row_it.move_to_first ();</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">if</span> (row_it.data ()-&gt;blob_list ()-&gt;empty ())</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      <span class="keyword">delete</span> row_it.extract ();  <span class="comment">//nothing in it</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <a class="code" href="a01106.html#a7f6f87295a49c2966d0487e5fdddad3f">fit_parallel_lms</a> (gradient, row_it.data ());</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  }</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="keywordflow">if</span> (testing_on) {</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    colour = <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      <a class="code" href="a01058.html#a45fd44462f3b32c42b22004d951af0b6">plot_parallel_row</a> (row_it.data (), gradient,</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;        block_edge, colour, rotation);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      colour = static_cast&lt;ScrollView::Color&gt;(colour + 1);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      <span class="keywordflow">if</span> (colour &gt; <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8aebeaaeee353c6f04b4498b1fef94bbb3">ScrollView::MAGENTA</a>)</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        colour = <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    }</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  }</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  row_it.sort (<a class="code" href="a01106.html#ab27bf80d814903a9eb48e81b2cc09acc">row_y_order</a>);     <span class="comment">//may have gone out of order</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aec82b0edd2573bede6a0d9f4bdaf0782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec82b0edd2573bede6a0d9f4bdaf0782">&#9670;&nbsp;</a></span>linear_spline_baseline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double* linear_spline_baseline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t &amp;&#160;</td>
          <td class="paramname"><em>segments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>xstarts</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02187">2187</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  {</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="keywordtype">int</span> blobcount;                 <span class="comment">//no of blobs</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="keywordtype">int</span> blobindex;                 <span class="comment">//current blob</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <span class="keywordtype">int</span> index1, index2;            <span class="comment">//blob numbers</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="keywordtype">int</span> blobs_per_segment;         <span class="comment">//blobs in each</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <a class="code" href="a02898.html">TBOX</a> box;                      <span class="comment">//blob box</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <a class="code" href="a02898.html">TBOX</a> new_box;                  <span class="comment">//new_it box</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                                 <span class="comment">//blobs</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  BLOBNBOX_IT blob_it = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ();</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  BLOBNBOX_IT new_it = blob_it;  <span class="comment">//front end</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <span class="keywordtype">float</span> b, c;                    <span class="comment">//fitted curve</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <a class="code" href="a02722.html">tesseract::DetLineFit</a> lms;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  int32_t segment;               <span class="comment">//current segment</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;blob_it);</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  xstarts[0] = box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ();</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  blobcount = 1;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keywordflow">while</span> (!blob_it.at_first ()) {</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    blobcount++;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;blob_it);</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  segments = blobcount / <a class="code" href="a01106.html#aa3f1e0813b0d1a67ec8fb489e1d11034">textord_spline_medianwin</a>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="keywordflow">if</span> (segments &lt; 1)</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    segments = 1;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  blobs_per_segment = blobcount / segments;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="comment">// quadratic coeffs</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="keyword">auto</span> *coeffs = <span class="keyword">new</span> <span class="keywordtype">double</span>[segments * 3];</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01112.html#a7129ef948119d5737f021bb765d0aa82">textord_oldbl_debug</a>)</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      (<span class="stringliteral">&quot;Linear splining baseline of %d blobs at (%d,%d), into %d segments of %d blobs\n&quot;</span>,</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      blobcount, box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> (), box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> (), segments, blobs_per_segment);</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  segment = 1;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="keywordflow">for</span> (index2 = 0; index2 &lt; blobs_per_segment / 2; index2++)</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a>(&amp;new_it);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  index1 = 0;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;  blobindex = index2;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    blobindex += blobs_per_segment;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    lms.<a class="code" href="a02722.html#a97c074bfc1d7106ddda618ea8cf45ff7">Clear</a>();</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="keywordflow">while</span> (index1 &lt; blobindex || (segment == segments &amp;&amp; index1 &lt; blobcount)) {</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;blob_it);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="keywordtype">int</span> middle = (box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a>() + box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a>()) / 2;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      lms.<a class="code" href="a02722.html#a4eba2b6e761080e5d1a48c9c797257b2">Add</a>(<a class="code" href="a02858.html">ICOORD</a>(middle, box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a>()));</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      index1++;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">if</span> (index1 == blobindex - blobs_per_segment / 2</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      || index1 == blobcount - 1) {</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        xstarts[segment] = box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ();</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      }</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    lms.<a class="code" href="a02722.html#a768ec4a8f90593d8d679981c873f7a56">Fit</a>(&amp;b, &amp;c);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    coeffs[segment * 3 - 3] = 0;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    coeffs[segment * 3 - 2] = b;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    coeffs[segment * 3 - 1] = c;</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    segment++;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="keywordflow">if</span> (segment &gt; segments)</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160; </div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    blobindex += blobs_per_segment;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    lms.<a class="code" href="a02722.html#a97c074bfc1d7106ddda618ea8cf45ff7">Clear</a>();</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">while</span> (index2 &lt; blobindex || (segment == segments &amp;&amp; index2 &lt; blobcount)) {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      new_box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;new_it);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      <span class="keywordtype">int</span> middle = (new_box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a>() + new_box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a>()) / 2;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      lms.<a class="code" href="a02722.html#a4eba2b6e761080e5d1a48c9c797257b2">Add</a>(<a class="code" href="a02858.html">ICOORD</a> (middle, new_box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a>()));</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      index2++;</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="keywordflow">if</span> (index2 == blobindex - blobs_per_segment / 2</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      || index2 == blobcount - 1) {</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        xstarts[segment] = new_box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ();</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      }</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    }</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    lms.<a class="code" href="a02722.html#a768ec4a8f90593d8d679981c873f7a56">Fit</a>(&amp;b, &amp;c);</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    coeffs[segment * 3 - 3] = 0;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    coeffs[segment * 3 - 2] = b;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    coeffs[segment * 3 - 1] = c;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    segment++;</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  }</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <span class="keywordflow">while</span> (segment &lt;= segments);</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="keywordflow">return</span> coeffs;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aff7570e5894808af04a93d3e967c65a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff7570e5894808af04a93d3e967c65a2">&#9670;&nbsp;</a></span>make_baseline_spline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void make_baseline_spline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02056">2056</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                                           {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="keywordtype">double</span> *coeffs;                <span class="comment">// quadratic coeffs</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  int32_t segments;              <span class="comment">// no of segments</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="comment">// spline boundaries</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="keyword">auto</span> *xstarts = <span class="keyword">new</span> int32_t[row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>()-&gt;length() + 1];</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#a13d7697b36af130fcde8ddf67cf3f9f1">segment_baseline</a>(row, block, segments, xstarts)</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  &amp;&amp; !<a class="code" href="a01106.html#afae95a2fffdf477ce99240ad90e63ee2">textord_straight_baselines</a> &amp;&amp; !<a class="code" href="a01106.html#abee4d483a054b2bb0a7990a22641dd69">textord_parallel_baselines</a>) {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    coeffs = <a class="code" href="a01106.html#aec82b0edd2573bede6a0d9f4bdaf0782">linear_spline_baseline</a>(row, block, segments, xstarts);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    xstarts[1] = xstarts[segments];</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    segments = 1;</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    coeffs = <span class="keyword">new</span> <span class="keywordtype">double</span>[3];</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    coeffs[0] = 0;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    coeffs[1] = row-&gt;<a class="code" href="a02670.html#aeba2135f371c89fd310f0443f79c8f43">line_m</a> ();</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    coeffs[2] = row-&gt;<a class="code" href="a02670.html#a4db47940276e2aa20f409877aa953360">line_c</a> ();</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  }</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  row-&gt;<a class="code" href="a02670.html#a611050c4612df0ccd0f2d64ca0005b9b">baseline</a> = <a class="code" href="a02886.html">QSPLINE</a> (segments, xstarts, coeffs);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="keyword">delete</span>[] coeffs;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="keyword">delete</span>[] xstarts;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a245049058986f065020d28b6c7e369d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a245049058986f065020d28b6c7e369d5">&#9670;&nbsp;</a></span>make_initial_textrows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void make_initial_textrows </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02858.html">ICOORD</a>&#160;</td>
          <td class="paramname"><em>page_tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02866.html">FCOORD</a>&#160;</td>
          <td class="paramname"><em>rotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00226">226</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> colour;                 <span class="comment">//of row</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#a9b6384540f5043c74a97ec6a642d0bbf">textord_show_initial_rows</a> &amp;&amp; testing_on) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="a01058.html#afd5bee79bdf1ea9c211c3a3519d25251">create_to_win</a>(page_tr);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                 <span class="comment">//guess skew</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="a01106.html#aadee27bcfa70b6b74be490c1ab356672">assign_blobs_to_rows</a> (block, <span class="keyword">nullptr</span>, 0, <span class="keyword">true</span>, <span class="keyword">true</span>, <a class="code" href="a01106.html#a9b6384540f5043c74a97ec6a642d0bbf">textord_show_initial_rows</a> &amp;&amp; testing_on);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  row_it.move_to_first ();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ())</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="a01106.html#ab33fbd787683743809a9c6036d541ee9">fit_lms_line</a> (row_it.data ());</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01106.html#a9b6384540f5043c74a97ec6a642d0bbf">textord_show_initial_rows</a> &amp;&amp; testing_on) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    colour = <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <a class="code" href="a01058.html#ac61d56bb753572e573a45e56823b92c0">plot_to_row</a> (row_it.data (), colour, rotation);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      colour = static_cast&lt;ScrollView::Color&gt;(colour + 1);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">if</span> (colour &gt; <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8aebeaaeee353c6f04b4498b1fef94bbb3">ScrollView::MAGENTA</a>)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        colour = <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ade98619ec77aab7e466a06b0940088a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade98619ec77aab7e466a06b0940088a5">&#9670;&nbsp;</a></span>make_rows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float make_rows </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02858.html">ICOORD</a>&#160;</td>
          <td class="paramname"><em>page_tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TO_BLOCK_LIST *&#160;</td>
          <td class="paramname"><em>port_blocks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00200">200</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                                            {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordtype">float</span> port_m;                  <span class="comment">// global skew</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">float</span> port_err;                <span class="comment">// global noise</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  TO_BLOCK_IT block_it;          <span class="comment">// iterator</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  block_it.set_to_list(port_blocks);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">for</span> (block_it.mark_cycle_pt(); !block_it.cycled_list();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;       block_it.forward())</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <a class="code" href="a01106.html#a245049058986f065020d28b6c7e369d5">make_initial_textrows</a>(page_tr, block_it.data(), <a class="code" href="a02866.html">FCOORD</a>(1.0f, 0.0f),</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      !<a class="code" href="a01106.html#a58237d13dfff6d1379f501ba5e14bc9b">textord_test_landscape</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                 <span class="comment">// compute globally</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="a01106.html#ab9ad937a552fbb9c0f7f24e94b9d5e09">compute_page_skew</a>(port_blocks, port_m, port_err);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  block_it.set_to_list(port_blocks);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">for</span> (block_it.mark_cycle_pt(); !block_it.cycled_list(); block_it.forward()) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="a01106.html#a1312db9d386487e3879ed6da1a02fefe">cleanup_rows_making</a>(page_tr, block_it.data(), port_m, <a class="code" href="a02866.html">FCOORD</a>(1.0f, 0.0f),</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                 block_it.data()-&gt;block-&gt;pdblk.bounding_box().left(),</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                 !<a class="code" href="a01106.html#a58237d13dfff6d1379f501ba5e14bc9b">textord_test_landscape</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">return</span> port_m;                 <span class="comment">// global skew</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8aaaa024c4b9d1e61fd2c92a0b679f2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aaaa024c4b9d1e61fd2c92a0b679f2b">&#9670;&nbsp;</a></span>make_single_row()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float make_single_row </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02858.html">ICOORD</a>&#160;</td>
          <td class="paramname"><em>page_tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_sub_blobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TO_BLOCK_LIST *&#160;</td>
          <td class="paramname"><em>blocks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00163">163</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                                              {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  BLOBNBOX_IT blob_it = &amp;block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// Include all the small blobs and large blobs.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  blob_it.add_list_after(&amp;block-&gt;<a class="code" href="a02674.html#ad16b1c18225b44c50674ca46841b0f5f">small_blobs</a>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  blob_it.add_list_after(&amp;block-&gt;<a class="code" href="a02674.html#aa6a3757d385e79ab76f34afb6e8fc684">noise_blobs</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  blob_it.add_list_after(&amp;block-&gt;<a class="code" href="a02674.html#aafe2a9baa69300ee71da42e6dc18cfee">large_blobs</a>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">if</span> (block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>.singleton() &amp;&amp; allow_sub_blobs) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    blob_it.move_to_first();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">float</span> size = MakeRowFromSubBlobs(block, blob_it.data()-&gt;cblob(), &amp;row_it);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (size &gt; block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> = size;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (block-&gt;<a class="code" href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">blobs</a>.empty()) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// Make a fake blob.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="a02922.html">C_BLOB</a>* blob = <a class="code" href="a02922.html#a29479d1a44688cc2d277b9e8f3064ade">C_BLOB::FakeBlob</a>(block-&gt;<a class="code" href="a02674.html#a16e698664028b0d6d2193db64560c16b">block</a>-&gt;<a class="code" href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">pdblk</a>.<a class="code" href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">bounding_box</a>());</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// The blobnbox owns the blob.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">auto</span>* bblob = <span class="keyword">new</span> <a class="code" href="a02666.html">BLOBNBOX</a>(blob);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    blob_it.add_after_then_move(bblob);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  MakeRowFromBlobs(block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>, &amp;blob_it, &amp;row_it);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// Fit an LMS line to the rows.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt(); !row_it.cycled_list(); row_it.forward())</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="a01106.html#ab33fbd787683743809a9c6036d541ee9">fit_lms_line</a>(row_it.data());</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordtype">float</span> gradient;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordtype">float</span> fit_error;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// Compute the skew based on the fitted line.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="a01106.html#ab9ad937a552fbb9c0f7f24e94b9d5e09">compute_page_skew</a>(blocks, gradient, fit_error);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">return</span> gradient;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a20d1c5d4b6ae64bf80b24a155aa7c189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d1c5d4b6ae64bf80b24a155aa7c189">&#9670;&nbsp;</a></span>mark_repeated_chars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_repeated_chars </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02639">2639</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                                      {</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;  BLOBNBOX_IT box_it(row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>());            <span class="comment">// Iterator.</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;  <span class="keywordtype">int</span> num_repeated_sets = 0;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="keywordflow">if</span> (!box_it.empty()) {</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      <a class="code" href="a02666.html">BLOBNBOX</a>* bblob = box_it.data();</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;      <span class="keywordtype">int</span> repeat_length = 1;</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;      <span class="keywordflow">if</span> (bblob-&gt;<a class="code" href="a02666.html#ac5e0fa9b0b9c23c040d6b1e0c61120cc">flow</a>() == <a class="code" href="a00254.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a> &amp;&amp;</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;          !bblob-&gt;<a class="code" href="a02666.html#ab8e7a33dc069de65fa4b6d0cab61d0c1">joined_to_prev</a>() &amp;&amp; bblob-&gt;<a class="code" href="a02666.html#a5d497fdc454feff733889db8fe604868">cblob</a>() != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        BLOBNBOX_IT test_it(box_it);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;        <span class="keywordflow">for</span> (test_it.forward(); !test_it.at_first();) {</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;          bblob = test_it.data();</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;          <span class="keywordflow">if</span> (bblob-&gt;<a class="code" href="a02666.html#ac5e0fa9b0b9c23c040d6b1e0c61120cc">flow</a>() != <a class="code" href="a00254.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>)</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;          test_it.forward();</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;          bblob = test_it.data();</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;          <span class="keywordflow">if</span> (bblob-&gt;<a class="code" href="a02666.html#ab8e7a33dc069de65fa4b6d0cab61d0c1">joined_to_prev</a>() || bblob-&gt;<a class="code" href="a02666.html#a5d497fdc454feff733889db8fe604868">cblob</a>() == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;            repeat_length = 0;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;          }</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;          ++repeat_length;</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;        }</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;      }</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;      <span class="keywordflow">if</span> (repeat_length &gt;= <a class="code" href="a01106.html#ad8c4f2ec0d4f8b83b5dc401f35feca75">kMinLeaderCount</a>) {</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        num_repeated_sets++;</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        <span class="keywordflow">for</span> (; repeat_length &gt; 0; box_it.forward(), --repeat_length) {</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;          bblob = box_it.data();</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;          bblob-&gt;<a class="code" href="a02666.html#a4c2b662bd87162e3a0de4fe96845a449">set_repeated_set</a>(num_repeated_sets);</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        }</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;     } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        bblob-&gt;<a class="code" href="a02666.html#a4c2b662bd87162e3a0de4fe96845a449">set_repeated_set</a>(0);</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        box_it.forward();</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;      }</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    } <span class="keywordflow">while</span> (!box_it.at_first());  <span class="comment">// until all done</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  }</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  row-&gt;<a class="code" href="a02670.html#a38c6b27400b2a5ff3ff9f9f9b4b43d69">set_num_repeated_sets</a>(num_repeated_sets);</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a99339b09e5fe1e853068a49be9aea95f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99339b09e5fe1e853068a49be9aea95f">&#9670;&nbsp;</a></span>most_overlapping_row()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fd">OVERLAP_STATE</a> most_overlapping_row </td>
          <td>(</td>
          <td class="paramtype">TO_ROW_IT *&#160;</td>
          <td class="paramname"><em>row_it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&amp;&#160;</td>
          <td class="paramname"><em>best_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>bottom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>rowsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02478">2478</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  {</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fd">OVERLAP_STATE</a> result;          <span class="comment">//result of tests</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keywordtype">float</span> overlap;                 <span class="comment">//of blob &amp; row</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <span class="keywordtype">float</span> bestover;                <span class="comment">//nearest row</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <span class="keywordtype">float</span> merge_top, merge_bottom; <span class="comment">//size of merged row</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <a class="code" href="a02858.html">ICOORD</a> testpt;                 <span class="comment">//testing only</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">//current row</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *test_row;              <span class="comment">//for multiple overlaps</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  BLOBNBOX_IT blob_it;           <span class="comment">//for merging rows</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160; </div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a">ASSIGN</a>;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  row = row_it-&gt;data ();</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  bestover = top - bottom;</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <span class="keywordflow">if</span> (top &gt; row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ())</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    bestover -= top - row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ();</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="keywordflow">if</span> (bottom &lt; row-&gt;min_y ())</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                                 <span class="comment">//compute overlap</span></div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    bestover -= row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () - bottom;</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <span class="keywordflow">if</span> (testing_blob &amp;&amp; <a class="code" href="a01106.html#a2b96add97d00045022d1b0818e49253f">textord_debug_blob</a>) {</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Test blob y=(%g,%g), row=(%f,%f), size=%g, overlap=%f\n&quot;</span>,</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;            bottom, top, row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a>(), row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a>(), rowsize, bestover);</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  }</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  test_row = row;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordflow">if</span> (!row_it-&gt;at_last ()) {</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      row_it-&gt;forward ();</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      test_row = row_it-&gt;data ();</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="keywordflow">if</span> (test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () &lt;= top &amp;&amp; test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () &gt;= bottom) {</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        merge_top =</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;          test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () &gt;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;          row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ()? test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () : row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ();</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        merge_bottom =</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;          test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () &lt;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;          row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> ()? test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () : row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> ();</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        <span class="keywordflow">if</span> (merge_top - merge_bottom &lt;= rowsize) {</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;          <span class="keywordflow">if</span> (testing_blob &amp;&amp; <a class="code" href="a01106.html#a2b96add97d00045022d1b0818e49253f">textord_debug_blob</a>) {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;            <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Merging rows at (%g,%g), (%g,%g)\n&quot;</span>,</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;              row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> (), row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> (),</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;              test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> (), test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ());</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;          }</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;          test_row-&gt;<a class="code" href="a02670.html#a5a5bfd657e97c2fed2cf6153eca0e98a">set_limits</a> (merge_bottom, merge_top);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;          blob_it.set_to_list (test_row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ());</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;          blob_it.add_list_after (row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ());</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;          blob_it.sort (<a class="code" href="a01106.html#a71e57df4cbaf6a0d8fb156f0604d1033">blob_x_order</a>);</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;          row_it-&gt;backward ();</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;          <span class="keyword">delete</span> row_it-&gt;extract ();</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;          row_it-&gt;forward ();</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;          bestover = -1.0f;      <span class="comment">//force replacement</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        }</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        overlap = top - bottom;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        <span class="keywordflow">if</span> (top &gt; test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ())</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;          overlap -= top - test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> ();</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;        <span class="keywordflow">if</span> (bottom &lt; test_row-&gt;min_y ())</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;          overlap -= test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () - bottom;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;        <span class="keywordflow">if</span> (bestover &gt;= rowsize - 1 &amp;&amp; overlap &gt;= rowsize - 1) {</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;          result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdaa698e39adf684fd44b5572a7b89444fb">REJECT</a>;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        }</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        <span class="keywordflow">if</span> (overlap &gt; bestover) {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;          bestover = overlap;    <span class="comment">//find biggest overlap</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;          row = test_row;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        }</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        <span class="keywordflow">if</span> (testing_blob &amp;&amp; <a class="code" href="a01106.html#a2b96add97d00045022d1b0818e49253f">textord_debug_blob</a>) {</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;          <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Test blob y=(%g,%g), row=(%f,%f), size=%g, overlap=%f-&gt;%f\n&quot;</span>,</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                  bottom, top, test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a>(), test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a>(),</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                  rowsize, overlap, bestover);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        }</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;      }</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    }</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="keywordflow">while</span> (!row_it-&gt;at_last ()</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    &amp;&amp; test_row-&gt;<a class="code" href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">min_y</a> () &lt;= top &amp;&amp; test_row-&gt;<a class="code" href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">max_y</a> () &gt;= bottom);</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <span class="keywordflow">while</span> (row_it-&gt;data () != row)</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    row_it-&gt;backward ();         <span class="comment">//make it point to row</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                                 <span class="comment">//doesn&#39;t overlap much</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <span class="keywordflow">if</span> (top - bottom - bestover &gt; rowsize * textord_overlap_x &amp;&amp;</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;      (!<a class="code" href="a01106.html#aadd49f8db9fa1e1a650d0a2b1f75c096">textord_fix_makerow_bug</a> || bestover &lt; rowsize * textord_overlap_x)</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    &amp;&amp; result == <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a">ASSIGN</a>)</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    result = <a class="code" href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdab82f810c0bfdbb5cc6419a4bcea46404">NEW_ROW</a>;            <span class="comment">//doesn&#39;t overlap enough</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  best_row = row;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a18cd081fdb5a70768e2a93473418c13a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18cd081fdb5a70768e2a93473418c13a">&#9670;&nbsp;</a></span>pre_associate_blobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pre_associate_blobs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02858.html">ICOORD</a>&#160;</td>
          <td class="paramname"><em>page_tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02866.html">FCOORD</a>&#160;</td>
          <td class="paramname"><em>rotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01845">1845</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  {</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> colour;                 <span class="comment">//of boxes</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <a class="code" href="a02666.html">BLOBNBOX</a> *blob;                <span class="comment">//current blob</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <a class="code" href="a02666.html">BLOBNBOX</a> *nextblob;            <span class="comment">//next in list</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <a class="code" href="a02898.html">TBOX</a> blob_box;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <a class="code" href="a02866.html">FCOORD</a> blob_rotation;          <span class="comment">//inverse of rotation</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  BLOBNBOX_IT blob_it;           <span class="comment">//iterator</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  BLOBNBOX_IT start_it;          <span class="comment">//iterator</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160; </div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  colour = <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  blob_rotation = <a class="code" href="a02866.html">FCOORD</a> (rotation.<a class="code" href="a02866.html#aecd85311c159bcd52b485a97a8dcc901">x</a> (), -rotation.<a class="code" href="a02866.html#abb9516f874133b689b0e62ac70874385">y</a> ());</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                                 <span class="comment">//get blobs</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    blob_it.set_to_list (row_it.data ()-&gt;blob_list ());</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">for</span> (blob_it.mark_cycle_pt (); !blob_it.cycled_list ();</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    blob_it.forward ()) {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      blob = blob_it.data ();</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      blob_box = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ();</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      start_it = blob_it;        <span class="comment">//save start point</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="comment">//                      if (testing_on &amp;&amp; textord_show_final_blobs)</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <span class="comment">//                      {</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      <span class="comment">//                              tprintf(&quot;Blob at (%d,%d)-&gt;(%d,%d), addr=%x, count=%d\n&quot;,</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      <span class="comment">//                                      blob_box.left(),blob_box.bottom(),</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="comment">//                                      blob_box.right(),blob_box.top(),</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <span class="comment">//                                      (void*)blob,blob_it.length());</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <span class="comment">//                      }</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordtype">bool</span> overlap;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        overlap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keywordflow">if</span> (!blob_it.at_last ()) {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;          nextblob = blob_it.data_relative(1);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;          overlap = blob_box.<a class="code" href="a02898.html#ade947e3871fa316e3e0b0864905c2997">major_x_overlap</a>(nextblob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>());</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;          <span class="keywordflow">if</span> (overlap) {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;            blob-&gt;<a class="code" href="a02666.html#ae4415dbdf1257052f22ee726f98db893">merge</a>(nextblob); <span class="comment">// merge new blob</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            blob_box = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>(); <span class="comment">// get bigger box</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            blob_it.forward();</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;          }</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="keywordflow">while</span> (overlap);</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      blob-&gt;<a class="code" href="a02666.html#a118eeb16f7c775dc58129a5869425f4b">chop</a> (&amp;start_it, &amp;blob_it,</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        blob_rotation,</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> * <a class="code" href="a02702.html#a737fdb37b9401ad3d04371c1bd4a0b17">tesseract::CCStruct::kXHeightFraction</a> *</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        <a class="code" href="a01106.html#a061c9707b8142c110e65e138c3790ffd">textord_chop_width</a>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <span class="comment">//attempt chop</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    }</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keywordflow">if</span> (testing_on &amp;&amp; <a class="code" href="a01106.html#a311b9c50853dfa06be5da69721d9f341">textord_show_final_blobs</a>) {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        <a class="code" href="a01058.html#afd5bee79bdf1ea9c211c3a3519d25251">create_to_win</a>(page_tr);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <a class="code" href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a>-&gt;<a class="code" href="a03978.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(colour);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <span class="keywordflow">for</span> (blob_it.mark_cycle_pt (); !blob_it.cycled_list ();</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      blob_it.forward ()) {</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        blob = blob_it.data ();</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        blob_box = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a> ();</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        blob_box.<a class="code" href="a02898.html#a428e14544aeb44064bc8637d920211a0">rotate</a> (rotation);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        <span class="keywordflow">if</span> (!blob-&gt;<a class="code" href="a02666.html#ab8e7a33dc069de65fa4b6d0cab61d0c1">joined_to_prev</a> ()) {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;          <a class="code" href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a>-&gt;<a class="code" href="a03978.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a> (blob_box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> (), blob_box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> (),</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;            blob_box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a> (), blob_box.<a class="code" href="a02898.html#a5dc64d0677b5d65385bc07a78cf49c4d">top</a> ());</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      colour = static_cast&lt;ScrollView::Color&gt;(colour + 1);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="keywordflow">if</span> (colour &gt; <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8aebeaaeee353c6f04b4498b1fef94bbb3">ScrollView::MAGENTA</a>)</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        colour = <a class="code" href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    }</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  }</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3013c07bcccb3f1efeb4686ed340609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3013c07bcccb3f1efeb4686ed340609">&#9670;&nbsp;</a></span>row_spacing_order()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int row_spacing_order </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>item1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>item2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02617">2617</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                                         {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                                 <span class="comment">//converted ptr</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  <span class="keyword">const</span> <a class="code" href="a02670.html">TO_ROW</a> *row1 = *reinterpret_cast&lt;const TO_ROW* const*&gt;(item1);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                                 <span class="comment">//converted ptr</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="keyword">const</span> <a class="code" href="a02670.html">TO_ROW</a> *row2 = *reinterpret_cast&lt;const TO_ROW* const*&gt;(item2);</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160; </div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <span class="keywordflow">if</span> (row1-&gt;<a class="code" href="a02670.html#a54a1cf2bfa1478d255a8b79f51ca8e59">spacing</a> &lt; row2-&gt;<a class="code" href="a02670.html#a54a1cf2bfa1478d255a8b79f51ca8e59">spacing</a>)</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (row1-&gt;<a class="code" href="a02670.html#a54a1cf2bfa1478d255a8b79f51ca8e59">spacing</a> &gt; row2-&gt;<a class="code" href="a02670.html#a54a1cf2bfa1478d255a8b79f51ca8e59">spacing</a>)</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab27bf80d814903a9eb48e81b2cc09acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab27bf80d814903a9eb48e81b2cc09acc">&#9670;&nbsp;</a></span>row_y_order()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int row_y_order </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>item1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>item2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02595">2595</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                                   {</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                                 <span class="comment">//converted ptr</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <span class="keyword">const</span> <a class="code" href="a02670.html">TO_ROW</a> *row1 = *reinterpret_cast&lt;const TO_ROW* const*&gt;(item1);</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                                 <span class="comment">//converted ptr</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  <span class="keyword">const</span> <a class="code" href="a02670.html">TO_ROW</a> *row2 = *reinterpret_cast&lt;const TO_ROW* const*&gt;(item2);</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160; </div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  <span class="keywordflow">if</span> (row1-&gt;<a class="code" href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">parallel_c</a> () &gt; row2-&gt;<a class="code" href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">parallel_c</a> ())</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (row1-&gt;<a class="code" href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">parallel_c</a> () &lt; row2-&gt;<a class="code" href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">parallel_c</a> ())</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a13d7697b36af130fcde8ddf67cf3f9f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13d7697b36af130fcde8ddf67cf3f9f1">&#9670;&nbsp;</a></span>segment_baseline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool segment_baseline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02670.html">TO_ROW</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t &amp;&#160;</td>
          <td class="paramname"><em>segments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>xstarts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l02088">2088</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  {</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <span class="keywordtype">bool</span> needs_curve;             <span class="comment">//needs curved line</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <span class="keywordtype">int</span> blobcount;                 <span class="comment">//no of blobs</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keywordtype">int</span> blobindex;                 <span class="comment">//current blob</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="keywordtype">int</span> last_state;                <span class="comment">//above, on , below</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <span class="keywordtype">int</span> state;                     <span class="comment">//of current blob</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordtype">float</span> yshift;                  <span class="comment">//from baseline</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <a class="code" href="a02898.html">TBOX</a> box;                       <span class="comment">//blob box</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <a class="code" href="a02898.html">TBOX</a> new_box;                   <span class="comment">//new_it box</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="keywordtype">float</span> middle;                  <span class="comment">//xcentre of blob</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                                 <span class="comment">//blobs</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  BLOBNBOX_IT blob_it = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ();</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  BLOBNBOX_IT new_it = blob_it;  <span class="comment">//front end</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <a class="code" href="a03762.html">SORTED_FLOATS</a> yshifts;         <span class="comment">//shifts from baseline</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160; </div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  needs_curve = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;blob_it);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  xstarts[0] = box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ();</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  segments = 1;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  blobcount = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a> ()-&gt;length ();</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01112.html#a7129ef948119d5737f021bb765d0aa82">textord_oldbl_debug</a>)</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Segmenting baseline of %d blobs at (%d,%d)\n&quot;</span>,</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      blobcount, box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> (), box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> ());</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="keywordflow">if</span> (blobcount &lt;= <a class="code" href="a01106.html#aa3f1e0813b0d1a67ec8fb489e1d11034">textord_spline_medianwin</a></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  || blobcount &lt; <a class="code" href="a01106.html#a02d851b1e7567c7e037b3b7aded37ba9">textord_spline_minblobs</a>) {</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    blob_it.move_to_last ();</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    box = blob_it.data ()-&gt;bounding_box ();</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    xstarts[1] = box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a> ();</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  }</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  last_state = 0;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  new_it.mark_cycle_pt ();</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keywordflow">for</span> (blobindex = 0; blobindex &lt; <a class="code" href="a01106.html#aa3f1e0813b0d1a67ec8fb489e1d11034">textord_spline_medianwin</a>; blobindex++) {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    new_box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;new_it);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    middle = (new_box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> () + new_box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a> ()) / 2.0;</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    yshift = new_box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> () - row-&gt;<a class="code" href="a02670.html#aeba2135f371c89fd310f0443f79c8f43">line_m</a> () * middle - row-&gt;<a class="code" href="a02670.html#a4db47940276e2aa20f409877aa953360">line_c</a> ();</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                                 <span class="comment">//record shift</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    yshifts.<a class="code" href="a03762.html#aff09f710af9da79dc20b27db549fe008">add</a> (yshift, blobindex);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <span class="keywordflow">if</span> (new_it.cycled_list ()) {</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      xstarts[1] = new_box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a> ();</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    }</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  }</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <span class="keywordflow">for</span> (blobcount = 0; blobcount &lt; <a class="code" href="a01106.html#aa3f1e0813b0d1a67ec8fb489e1d11034">textord_spline_medianwin</a> / 2; blobcount++)</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;blob_it);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    new_box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;new_it);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                                 <span class="comment">//get middle one</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    yshift = yshifts[<a class="code" href="a01106.html#aa3f1e0813b0d1a67ec8fb489e1d11034">textord_spline_medianwin</a> / 2];</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">if</span> (yshift &gt; <a class="code" href="a01106.html#ab35d11ccffc21ae40e9f6dd51b4b81a8">textord_spline_shift_fraction</a> * block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>)</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      state = 1;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (-yshift &gt; <a class="code" href="a01106.html#ab35d11ccffc21ae40e9f6dd51b4b81a8">textord_spline_shift_fraction</a> * block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a>)</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      state = -1;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;      state = 0;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="keywordflow">if</span> (state != 0)</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      needs_curve = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="comment">//              tprintf(&quot;State=%d, prev=%d, shift=%g\n&quot;,</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="comment">//                      state,last_state,yshift);</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <span class="keywordflow">if</span> (state != last_state &amp;&amp; blobcount &gt; <a class="code" href="a01106.html#a02d851b1e7567c7e037b3b7aded37ba9">textord_spline_minblobs</a>) {</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      xstarts[segments++] = box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> ();</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      blobcount = 0;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    }</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    last_state = state;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    yshifts.<a class="code" href="a03762.html#ab91ec5a940aa2c824858fc5c4294cd40">remove</a> (blobindex - <a class="code" href="a01106.html#aa3f1e0813b0d1a67ec8fb489e1d11034">textord_spline_medianwin</a>);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    box = <a class="code" href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a> (&amp;blob_it);</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    middle = (new_box.<a class="code" href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">left</a> () + new_box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a> ()) / 2.0;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    yshift = new_box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> () - row-&gt;<a class="code" href="a02670.html#aeba2135f371c89fd310f0443f79c8f43">line_m</a> () * middle - row-&gt;<a class="code" href="a02670.html#a4db47940276e2aa20f409877aa953360">line_c</a> ();</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    yshifts.<a class="code" href="a03762.html#aff09f710af9da79dc20b27db549fe008">add</a> (yshift, blobindex);</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    blobindex++;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    blobcount++;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  }</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <span class="keywordflow">while</span> (!new_it.cycled_list ());</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="keywordflow">if</span> (blobcount &gt; <a class="code" href="a01106.html#a02d851b1e7567c7e037b3b7aded37ba9">textord_spline_minblobs</a> || segments == 1) {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    xstarts[segments] = new_box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a> ();</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  }</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    xstarts[--segments] = new_box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a> ();</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  }</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01112.html#a7129ef948119d5737f021bb765d0aa82">textord_oldbl_debug</a>)</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Made %d segments on row at (%d,%d)\n&quot;</span>,</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      segments, box.<a class="code" href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">right</a> (), box.<a class="code" href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">bottom</a> ());</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="keywordflow">return</span> needs_curve;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9147d87f5794548cee3480b5b4f2e0de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9147d87f5794548cee3480b5b4f2e0de">&#9670;&nbsp;</a></span>separate_underlines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void separate_underlines </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gradient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a02866.html">FCOORD</a>&#160;</td>
          <td class="paramname"><em>rotation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>testing_on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l01772">1772</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                                          {  <span class="comment">// correct orientation</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <a class="code" href="a02666.html">BLOBNBOX</a> *blob;                <span class="comment">// current blob</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <a class="code" href="a02922.html">C_BLOB</a> *rotated_blob;          <span class="comment">// rotated blob</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <a class="code" href="a02670.html">TO_ROW</a> *row;                   <span class="comment">// current row</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordtype">float</span> length;                  <span class="comment">// of g_vec</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <a class="code" href="a02898.html">TBOX</a> blob_box;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <a class="code" href="a02866.html">FCOORD</a> blob_rotation;          <span class="comment">// inverse of rotation</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <a class="code" href="a02866.html">FCOORD</a> g_vec;                  <span class="comment">// skew rotation</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  BLOBNBOX_IT blob_it;           <span class="comment">// iterator</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                                 <span class="comment">// iterator</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  BLOBNBOX_IT under_it = &amp;block-&gt;<a class="code" href="a02674.html#abe8092e46729fbddf38f16ad7ca07318">underlines</a>;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  BLOBNBOX_IT large_it = &amp;block-&gt;<a class="code" href="a02674.html#aafe2a9baa69300ee71da42e6dc18cfee">large_blobs</a>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a>();</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordtype">int</span> min_blob_height = static_cast&lt;int&gt;(<a class="code" href="a01106.html#a1351fa9ba641f131420149782666b565">textord_min_blob_height_fraction</a> *</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                                         block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> + 0.5);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                                 <span class="comment">// length of vector</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  length = sqrt(1 + gradient * gradient);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  g_vec = <a class="code" href="a02866.html">FCOORD</a>(1 / length, -gradient / length);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  blob_rotation = <a class="code" href="a02866.html">FCOORD</a>(rotation.<a class="code" href="a02866.html#aecd85311c159bcd52b485a97a8dcc901">x</a>(), -rotation.<a class="code" href="a02866.html#abb9516f874133b689b0e62ac70874385">y</a>());</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  blob_rotation.<a class="code" href="a02866.html#a81ca9ea0cac4cd8c1bca0314e29bb28d">rotate</a>(g_vec);  <span class="comment">// undoing everything</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt(); !row_it.cycled_list(); row_it.forward()) {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    row = row_it.data();</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                                 <span class="comment">// get blobs</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    blob_it.set_to_list(row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>());</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">for</span> (blob_it.mark_cycle_pt(); !blob_it.cycled_list();</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;         blob_it.forward()) {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      blob = blob_it.data();</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      blob_box = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>();</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="keywordflow">if</span> (blob_box.<a class="code" href="a02898.html#a70ef69630cbdc605b7b7d5434549d38c">width</a>() &gt; block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> * <a class="code" href="a01106.html#ac3f308da31e04ae15487ee136c920446">textord_underline_width</a>) {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <a class="code" href="a00515.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(blob-&gt;<a class="code" href="a02666.html#a5d497fdc454feff733889db8fe604868">cblob</a>() != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        rotated_blob = <a class="code" href="a00251.html#a4145a126880b1bd685f07c9499903b71">crotate_cblob</a> (blob-&gt;<a class="code" href="a02666.html#a5d497fdc454feff733889db8fe604868">cblob</a>(),</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;          blob_rotation);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a01004.html#a1606f49c0410481c7cbc52a45e1422b3">test_underline</a>(</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            testing_on &amp;&amp; <a class="code" href="a01106.html#a73aa7e6e50011cbd9114a4cd34dbcf47">textord_show_final_rows</a>,</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;            rotated_blob, static_cast&lt;int16_t&gt;(row-&gt;<a class="code" href="a02670.html#a4889480138e3beb93c337e66dc245112">intercept</a>()),</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            static_cast&lt;int16_t&gt;(</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                block-&gt;<a class="code" href="a02674.html#ab106233da0599f3e1595c1c765acadec">line_size</a> *</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                (<a class="code" href="a02702.html#a737fdb37b9401ad3d04371c1bd4a0b17">tesseract::CCStruct::kXHeightFraction</a> +</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                 <a class="code" href="a02702.html#a9d71fddad74d9418e106713cd643b919">tesseract::CCStruct::kAscenderFraction</a> / 2.0f)))) {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;          under_it.add_after_then_move(blob_it.extract());</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;          <span class="keywordflow">if</span> (testing_on &amp;&amp; <a class="code" href="a01106.html#a73aa7e6e50011cbd9114a4cd34dbcf47">textord_show_final_rows</a>) {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Underlined blob at:&quot;</span>);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;              rotated_blob-&gt;bounding_box().print();</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Was:&quot;</span>);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;              blob_box.<a class="code" href="a02898.html#a61af64df548c7638bf005fcd8343c435">print</a>();</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;          }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CountOverlaps(blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>(), min_blob_height,</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                                 row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>()) &gt;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                   textord_max_blob_overlaps) {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;          large_it.add_after_then_move(blob_it.extract());</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;          <span class="keywordflow">if</span> (testing_on &amp;&amp; <a class="code" href="a01106.html#a73aa7e6e50011cbd9114a4cd34dbcf47">textord_show_final_rows</a>) {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            <a class="code" href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Large blob overlaps %d blobs at:&quot;</span>,</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                    CountOverlaps(blob_box, min_blob_height,</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                                  row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>()));</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            blob_box.<a class="code" href="a02898.html#a61af64df548c7638bf005fcd8343c435">print</a>();</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;          }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        }</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <span class="keyword">delete</span> rotated_blob;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      }</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  }</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae71e721bb9641f221b30021a5addff82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae71e721bb9641f221b30021a5addff82">&#9670;&nbsp;</a></span>vigorous_noise_removal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vigorous_noise_removal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02674.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00466">466</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                             {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  TO_ROW_IT row_it = block-&gt;<a class="code" href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">get_rows</a> ();</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">for</span> (row_it.mark_cycle_pt (); !row_it.cycled_list (); row_it.forward ()) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="a02670.html">TO_ROW</a>* row = row_it.data();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    BLOBNBOX_IT b_it = row-&gt;<a class="code" href="a02670.html#a39cee94572e70d35179c27cdf21a3022">blob_list</a>();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">// Estimate the xheight on the row.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordtype">int</span> max_height = 0;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">for</span> (b_it.mark_cycle_pt(); !b_it.cycled_list(); b_it.forward()) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="a02666.html">BLOBNBOX</a>* blob = b_it.data();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">if</span> (blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a72fcb736ed0ddeae95e6a51b3bf8d979">height</a>() &gt; max_height)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        max_height = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a72fcb736ed0ddeae95e6a51b3bf8d979">height</a>();</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="a02918.html">STATS</a> hstats(0, max_height + 1);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">for</span> (b_it.mark_cycle_pt(); !b_it.cycled_list(); b_it.forward()) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="a02666.html">BLOBNBOX</a>* blob = b_it.data();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordtype">int</span> height = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a72fcb736ed0ddeae95e6a51b3bf8d979">height</a>();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">if</span> (height &gt;= <a class="code" href="a01106.html#a1baaf7ab16613cd7b5a13a28d65412b3">kMinSize</a>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        hstats.add(blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>().<a class="code" href="a02898.html#a72fcb736ed0ddeae95e6a51b3bf8d979">height</a>(), 1);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordtype">float</span> xheight = hstats.median();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// Delete small objects.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="a02666.html">BLOBNBOX</a>* prev = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">for</span> (b_it.mark_cycle_pt(); !b_it.cycled_list(); b_it.forward()) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="a02666.html">BLOBNBOX</a>* blob = b_it.data();</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keyword">const</span> <a class="code" href="a02898.html">TBOX</a>&amp; box = blob-&gt;<a class="code" href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">bounding_box</a>();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">if</span> (box.<a class="code" href="a02898.html#a72fcb736ed0ddeae95e6a51b3bf8d979">height</a>() &lt; <a class="code" href="a01106.html#af9da918f4c268e7bfd9300632b056be2">kNoiseSize</a> * xheight) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// Small so delete unless it looks like an i dot.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span> (prev != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;          <span class="keywordflow">if</span> (dot_of_i(blob, prev, row))</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keywordflow">continue</span>;  <span class="comment">// Looks OK.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span> (!b_it.at_last()) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          <a class="code" href="a02666.html">BLOBNBOX</a>* next = b_it.data_relative(1);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          <span class="keywordflow">if</span> (dot_of_i(blob, next, row))</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">continue</span>;  <span class="comment">// Looks OK.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="comment">// It might be noise so get rid of it.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keyword">delete</span> blob-&gt;<a class="code" href="a02666.html#a5d497fdc454feff733889db8fe604868">cblob</a>();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keyword">delete</span> b_it.extract();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        prev = blob;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad8c4f2ec0d4f8b83b5dc401f35feca75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8c4f2ec0d4f8b83b5dc401f35feca75">&#9670;&nbsp;</a></span>kMinLeaderCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int kMinLeaderCount = 5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00105">105</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a1baaf7ab16613cd7b5a13a28d65412b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1baaf7ab16613cd7b5a13a28d65412b3">&#9670;&nbsp;</a></span>kMinSize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int kMinSize = 8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00377">377</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="af9da918f4c268e7bfd9300632b056be2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9da918f4c268e7bfd9300632b056be2">&#9670;&nbsp;</a></span>kNoiseSize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double kNoiseSize = 0.5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00376">376</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aed72a4cf1cf5709c096540587eacffbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed72a4cf1cf5709c096540587eacffbc">&#9670;&nbsp;</a></span>textord_ascheight_mode_fraction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_ascheight_mode_fraction = 0.08</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min pile height to make ascheight" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00091">91</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a1d7f3344ad5b8485a32d91a83e4511b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d7f3344ad5b8485a32d91a83e4511b4">&#9670;&nbsp;</a></span>textord_ascx_ratio_max</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_ascx_ratio_max = 1.8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Max cap/xheight" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00095">95</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a933873395501e7e5de97374eef4c20e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a933873395501e7e5de97374eef4c20e9">&#9670;&nbsp;</a></span>textord_ascx_ratio_min</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_ascx_ratio_min = 1.25</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min cap/xheight" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00094">94</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a061c9707b8142c110e65e138c3790ffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a061c9707b8142c110e65e138c3790ffd">&#9670;&nbsp;</a></span>textord_chop_width</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_chop_width = 1.5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Max width before chopping" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00076">76</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a2b96add97d00045022d1b0818e49253f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b96add97d00045022d1b0818e49253f">&#9670;&nbsp;</a></span>textord_debug_blob</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_debug_blob = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Print test blob information" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00101">101</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aa915328b291b12eac45b757d25d770c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa915328b291b12eac45b757d25d770c6">&#9670;&nbsp;</a></span>textord_debug_xheights</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_debug_xheights = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Test xheight algorithms" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00055">55</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a5e93a6f5938ea681bc18b6d6c45f5e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e93a6f5938ea681bc18b6d6c45f5e0a">&#9670;&nbsp;</a></span>textord_descx_ratio_max</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_descx_ratio_max = 0.6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Max desc/xheight" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00097">97</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aa0d43ef1627ff8a2a8ee79a90ecdf892"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0d43ef1627ff8a2a8ee79a90ecdf892">&#9670;&nbsp;</a></span>textord_descx_ratio_min</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_descx_ratio_min = 0.25</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min desc/xheight" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00096">96</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a9dcb3e14fc8bb00dcde4f03e25f3ac5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dcb3e14fc8bb00dcde4f03e25f3ac5b">&#9670;&nbsp;</a></span>textord_excess_blobsize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_excess_blobsize = 1.3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"New row made if blob makes row this big" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00083">83</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aadd49f8db9fa1e1a650d0a2b1f75c096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadd49f8db9fa1e1a650d0a2b1f75c096">&#9670;&nbsp;</a></span>textord_fix_makerow_bug</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_fix_makerow_bug = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Prevent multiple baselines" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00054">54</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aa6f67dd9a83c5bcda44414b45dd30899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f67dd9a83c5bcda44414b45dd30899">&#9670;&nbsp;</a></span>textord_fix_xheight_bug</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_fix_xheight_bug = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Use spline baseline" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00053">53</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aab5148b0f0769704bb959d0c186270de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab5148b0f0769704bb959d0c186270de">&#9670;&nbsp;</a></span>textord_heavy_nr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_heavy_nr = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Vigorously remove noise" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00042">42</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a3fd4348aaf95237fce879822760e2b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fd4348aaf95237fce879822760e2b25">&#9670;&nbsp;</a></span>textord_linespace_iqrlimit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_linespace_iqrlimit = 0.2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Max iqr/median for linespace" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00074">74</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a3a5a462e77519ae4316a3175a5991daa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a5a462e77519ae4316a3175a5991daa">&#9670;&nbsp;</a></span>textord_lms_line_trials</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int textord_lms_line_trials = 12</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Number of linew fits to do" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00099">99</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a1351fa9ba641f131420149782666b565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1351fa9ba641f131420149782666b565">&#9670;&nbsp;</a></span>textord_min_blob_height_fraction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_min_blob_height_fraction = 0.75</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min blob height/top to include blob top into xheight stats" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00087">87</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a2e0651148ade15830933aa26b1e63c2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e0651148ade15830933aa26b1e63c2f">&#9670;&nbsp;</a></span>textord_min_blobs_in_row</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int textord_min_blobs_in_row = 4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min blobs before gradient counted" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00062">62</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="acb7874c297cd608146eacd6782da2536"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7874c297cd608146eacd6782da2536">&#9670;&nbsp;</a></span>textord_min_linesize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_min_linesize = 1.25</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"* blob height for initial linesize" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00081">81</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a995fba1cadc1bb12bd1861d2e1d4bf4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a995fba1cadc1bb12bd1861d2e1d4bf4a">&#9670;&nbsp;</a></span>textord_min_xheight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int textord_min_xheight = 10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min credible pixel xheight" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00067">67</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a6cbebb25ca3a3a0ac4b6009907c7a51d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cbebb25ca3a3a0ac4b6009907c7a51d">&#9670;&nbsp;</a></span>textord_minxh</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_minxh = 0.25</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"fraction of linesize for min xheight" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00080">80</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="ad38832cdfc8f47c85cb5a626760c7835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad38832cdfc8f47c85cb5a626760c7835">&#9670;&nbsp;</a></span>textord_new_initial_xheight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_new_initial_xheight = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Use test xheight mechanism" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00100">100</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aedce99179cfa3891066fcd1dd72ecba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedce99179cfa3891066fcd1dd72ecba1">&#9670;&nbsp;</a></span>textord_occupancy_threshold</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_occupancy_threshold = 0.4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Fraction of neighbourhood" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00084">84</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="ad94687b9094ddaccb7a022e61cdc53a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad94687b9094ddaccb7a022e61cdc53a3">&#9670;&nbsp;</a></span>textord_old_baselines</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_old_baselines = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Use old baseline algorithm" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00051">51</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a7718429051854813a160987de497731c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7718429051854813a160987de497731c">&#9670;&nbsp;</a></span>textord_old_xheight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_old_xheight = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Use old xheight algorithm" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00052">52</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="abee4d483a054b2bb0a7990a22641dd69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee4d483a054b2bb0a7990a22641dd69">&#9670;&nbsp;</a></span>textord_parallel_baselines</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_parallel_baselines = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Force parallel baselines" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00049">49</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="abb70d23ca372b31c22ad99bce5f8aa70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb70d23ca372b31c22ad99bce5f8aa70">&#9670;&nbsp;</a></span>textord_show_expanded_rows</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_show_expanded_rows = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Display rows after expanding" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00045">45</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a311b9c50853dfa06be5da69721d9f341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a311b9c50853dfa06be5da69721d9f341">&#9670;&nbsp;</a></span>textord_show_final_blobs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_show_final_blobs = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Display blob bounds after pre-ass" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00047">47</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a73aa7e6e50011cbd9114a4cd34dbcf47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73aa7e6e50011cbd9114a4cd34dbcf47">&#9670;&nbsp;</a></span>textord_show_final_rows</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_show_final_rows = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Display rows after final fitting" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00046">46</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a9b6384540f5043c74a97ec6a642d0bbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b6384540f5043c74a97ec6a642d0bbf">&#9670;&nbsp;</a></span>textord_show_initial_rows</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_show_initial_rows = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Display row accumulation" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00043">43</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a450c7ef1f93c14c7f3e1d70cb44ef1f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450c7ef1f93c14c7f3e1d70cb44ef1f9">&#9670;&nbsp;</a></span>textord_show_parallel_rows</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_show_parallel_rows = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Display page correlated rows" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00044">44</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a0f7b13f26dd172ac8ac430ef10ff62fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f7b13f26dd172ac8ac430ef10ff62fb">&#9670;&nbsp;</a></span>textord_skew_ile</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_skew_ile = 0.5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Ile of gradients for page skew" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00072">72</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a99da077fe5f1eb152819880a9e6be164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99da077fe5f1eb152819880a9e6be164">&#9670;&nbsp;</a></span>textord_skew_lag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_skew_lag = 0.02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Lag for skew on row accumulation" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00073">73</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aa3f1e0813b0d1a67ec8fb489e1d11034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3f1e0813b0d1a67ec8fb489e1d11034">&#9670;&nbsp;</a></span>textord_spline_medianwin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int textord_spline_medianwin = 6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Size of window for spline segmentation" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00064">64</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a02d851b1e7567c7e037b3b7aded37ba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02d851b1e7567c7e037b3b7aded37ba9">&#9670;&nbsp;</a></span>textord_spline_minblobs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int textord_spline_minblobs = 8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min blobs in each spline segment" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00063">63</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a512a2aea945d1488b28317c79753bd5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a512a2aea945d1488b28317c79753bd5b">&#9670;&nbsp;</a></span>textord_spline_outlier_fraction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_spline_outlier_fraction = 0.1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Fraction of line spacing for outlier" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00071">71</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="ab35d11ccffc21ae40e9f6dd51b4b81a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab35d11ccffc21ae40e9f6dd51b4b81a8">&#9670;&nbsp;</a></span>textord_spline_shift_fraction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_spline_shift_fraction = 0.02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Fraction of line spacing for quad" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00069">69</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="afae95a2fffdf477ce99240ad90e63ee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afae95a2fffdf477ce99240ad90e63ee2">&#9670;&nbsp;</a></span>textord_straight_baselines</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_straight_baselines = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Force straight baselines" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00050">50</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a58237d13dfff6d1379f501ba5e14bc9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58237d13dfff6d1379f501ba5e14bc9b">&#9670;&nbsp;</a></span>textord_test_landscape</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool textord_test_landscape = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Tests refer to land/port" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00048">48</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a23b8c104a388b836300c6aaf9592c66f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b8c104a388b836300c6aaf9592c66f">&#9670;&nbsp;</a></span>textord_test_x</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int textord_test_x = -INT32_MAX</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"coord of test pt" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00060">60</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="ac7548cdecc88963c89ab9d235a6c6531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7548cdecc88963c89ab9d235a6c6531">&#9670;&nbsp;</a></span>textord_test_y</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int textord_test_y = -INT32_MAX</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"coord of test pt" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00061">61</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="ac3f308da31e04ae15487ee136c920446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3f308da31e04ae15487ee136c920446">&#9670;&nbsp;</a></span>textord_underline_width</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_underline_width = 2.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Multiple of line_size for underline" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00085">85</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aadab669cb0e97eb0aa1b93215c45828b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadab669cb0e97eb0aa1b93215c45828b">&#9670;&nbsp;</a></span>textord_width_limit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_width_limit = 8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Max width of blobs to make rows" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00075">75</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="aa6de330c2e2d5c231611e776ebb577b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6de330c2e2d5c231611e776ebb577b3">&#9670;&nbsp;</a></span>textord_xheight_error_margin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_xheight_error_margin = 0.1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Accepted variation" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00098">98</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
<a id="a0a5415d21bfad8f8e8693860230519df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a5415d21bfad8f8e8693860230519df">&#9670;&nbsp;</a></span>textord_xheight_mode_fraction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double textord_xheight_mode_fraction = 0.4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min pile height to make xheight" <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a01106_source.html#l00089">89</a> of file <a class="el" href="a01106_source.html">makerow.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aa00251_html_a4145a126880b1bd685f07c9499903b71"><div class="ttname"><a href="a00251.html#a4145a126880b1bd685f07c9499903b71">crotate_cblob</a></div><div class="ttdeci">C_BLOB * crotate_cblob(C_BLOB *blob, FCOORD rotation)</div><div class="ttdef"><b>Definition:</b> <a href="a00251_source.html#l00605">blobbox.cpp:605</a></div></div>
<div class="ttc" id="aa01106_html_a1d7f3344ad5b8485a32d91a83e4511b4"><div class="ttname"><a href="a01106.html#a1d7f3344ad5b8485a32d91a83e4511b4">textord_ascx_ratio_max</a></div><div class="ttdeci">double textord_ascx_ratio_max</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00095">makerow.cpp:95</a></div></div>
<div class="ttc" id="aa01106_html_aa6f67dd9a83c5bcda44414b45dd30899"><div class="ttname"><a href="a01106.html#aa6f67dd9a83c5bcda44414b45dd30899">textord_fix_xheight_bug</a></div><div class="ttdeci">bool textord_fix_xheight_bug</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00053">makerow.cpp:53</a></div></div>
<div class="ttc" id="aa02670_html_a38c6b27400b2a5ff3ff9f9f9b4b43d69"><div class="ttname"><a href="a02670.html#a38c6b27400b2a5ff3ff9f9f9b4b43d69">TO_ROW::set_num_repeated_sets</a></div><div class="ttdeci">void set_num_repeated_sets(int num_sets)</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00639">blobbox.h:639</a></div></div>
<div class="ttc" id="aa00452_html_adf07d3ffc714e6fd2731a59c34a00bc4"><div class="ttname"><a href="a00452.html#adf07d3ffc714e6fd2731a59c34a00bc4">choose_nth_item</a></div><div class="ttdeci">int32_t choose_nth_item(int32_t index, float *array, int32_t count)</div><div class="ttdef"><b>Definition:</b> <a href="a00452_source.html#l00609">statistc.cpp:609</a></div></div>
<div class="ttc" id="aa02918_html_a92ab39b34f7a99ff3272e614a946513c"><div class="ttname"><a href="a02918.html#a92ab39b34f7a99ff3272e614a946513c">STATS::get_total</a></div><div class="ttdeci">int32_t get_total() const</div><div class="ttdef"><b>Definition:</b> <a href="a00455_source.html#l00083">statistc.h:83</a></div></div>
<div class="ttc" id="aa01106_html_a450c7ef1f93c14c7f3e1d70cb44ef1f9"><div class="ttname"><a href="a01106.html#a450c7ef1f93c14c7f3e1d70cb44ef1f9">textord_show_parallel_rows</a></div><div class="ttdeci">bool textord_show_parallel_rows</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00044">makerow.cpp:44</a></div></div>
<div class="ttc" id="aa02674_html_ad16b1c18225b44c50674ca46841b0f5f"><div class="ttname"><a href="a02674.html#ad16b1c18225b44c50674ca46841b0f5f">TO_BLOCK::small_blobs</a></div><div class="ttdeci">BLOBNBOX_LIST small_blobs</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00774">blobbox.h:774</a></div></div>
<div class="ttc" id="aa01106_html_a3fd4348aaf95237fce879822760e2b25"><div class="ttname"><a href="a01106.html#a3fd4348aaf95237fce879822760e2b25">textord_linespace_iqrlimit</a></div><div class="ttdeci">double textord_linespace_iqrlimit</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00074">makerow.cpp:74</a></div></div>
<div class="ttc" id="aa02922_html_a29479d1a44688cc2d277b9e8f3064ade"><div class="ttname"><a href="a02922.html#a29479d1a44688cc2d277b9e8f3064ade">C_BLOB::FakeBlob</a></div><div class="ttdeci">static C_BLOB * FakeBlob(const TBOX &amp;box)</div><div class="ttdef"><b>Definition:</b> <a href="a00458_source.html#l00236">stepblob.cpp:236</a></div></div>
<div class="ttc" id="aa02918_html_ac31620279068e720a8cbe2c55cc0d186"><div class="ttname"><a href="a02918.html#ac31620279068e720a8cbe2c55cc0d186">STATS::min_bucket</a></div><div class="ttdeci">int32_t min_bucket() const</div><div class="ttdef"><b>Definition:</b> <a href="a00452_source.html#l00187">statistc.cpp:187</a></div></div>
<div class="ttc" id="aa02674_html_abb8334b4a0c2b2625516a1c4b54cbf1f"><div class="ttname"><a href="a02674.html#abb8334b4a0c2b2625516a1c4b54cbf1f">TO_BLOCK::baseline_offset</a></div><div class="ttdeci">float baseline_offset</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00786">blobbox.h:786</a></div></div>
<div class="ttc" id="aa01106_html_aadd49f8db9fa1e1a650d0a2b1f75c096"><div class="ttname"><a href="a01106.html#aadd49f8db9fa1e1a650d0a2b1f75c096">textord_fix_makerow_bug</a></div><div class="ttdeci">bool textord_fix_makerow_bug</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00054">makerow.cpp:54</a></div></div>
<div class="ttc" id="aa02702_html_a737fdb37b9401ad3d04371c1bd4a0b17"><div class="ttname"><a href="a02702.html#a737fdb37b9401ad3d04371c1bd4a0b17">tesseract::CCStruct::kXHeightFraction</a></div><div class="ttdeci">static const double kXHeightFraction</div><div class="ttdef"><b>Definition:</b> <a href="a00284_source.html#l00034">ccstruct.h:34</a></div></div>
<div class="ttc" id="aa02846_html_a3f06f8e34fc5962f342daff9623463e9"><div class="ttname"><a href="a02846.html#a3f06f8e34fc5962f342daff9623463e9">PDBLK::bounding_box</a></div><div class="ttdeci">void bounding_box(ICOORD &amp;bottom_left, ICOORD &amp;top_right) const</div><div class="ttdoc">get box</div><div class="ttdef"><b>Definition:</b> <a href="a00386_source.html#l00058">pdblock.h:58</a></div></div>
<div class="ttc" id="aa01058_html_afd5bee79bdf1ea9c211c3a3519d25251"><div class="ttname"><a href="a01058.html#afd5bee79bdf1ea9c211c3a3519d25251">create_to_win</a></div><div class="ttdeci">ScrollView * create_to_win(ICOORD page_tr)</div><div class="ttdef"><b>Definition:</b> <a href="a01058_source.html#l00042">drawtord.cpp:42</a></div></div>
<div class="ttc" id="aa01106_html_a7f6f87295a49c2966d0487e5fdddad3f"><div class="ttname"><a href="a01106.html#a7f6f87295a49c2966d0487e5fdddad3f">fit_parallel_lms</a></div><div class="ttdeci">void fit_parallel_lms(float gradient, TO_ROW *row)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l01973">makerow.cpp:1973</a></div></div>
<div class="ttc" id="aa02674_html_aa6a3757d385e79ab76f34afb6e8fc684"><div class="ttname"><a href="a02674.html#aa6a3757d385e79ab76f34afb6e8fc684">TO_BLOCK::noise_blobs</a></div><div class="ttdeci">BLOBNBOX_LIST noise_blobs</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00773">blobbox.h:773</a></div></div>
<div class="ttc" id="aa01004_html_a1606f49c0410481c7cbc52a45e1422b3"><div class="ttname"><a href="a01004.html#a1606f49c0410481c7cbc52a45e1422b3">test_underline</a></div><div class="ttdeci">bool test_underline(bool testing_on, C_BLOB *blob, int16_t baseline, int16_t xheight)</div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00048">blkocc.cpp:48</a></div></div>
<div class="ttc" id="aa01106_html_a1f885e71201e4d2dc7db3c78a98cbb91"><div class="ttname"><a href="a01106.html#a1f885e71201e4d2dc7db3c78a98cbb91">compute_height_modes</a></div><div class="ttdeci">int32_t compute_height_modes(STATS *heights, int32_t min_height, int32_t max_height, int32_t *modes, int32_t maxmodes)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l01623">makerow.cpp:1623</a></div></div>
<div class="ttc" id="aa02870_html_a4eb55be5fc2ed33312e4410f5ee2cf88"><div class="ttname"><a href="a02870.html#a4eb55be5fc2ed33312e4410f5ee2cf88">POLY_BLOCK::IsText</a></div><div class="ttdeci">bool IsText() const</div><div class="ttdef"><b>Definition:</b> <a href="a00404_source.html#l00062">polyblk.h:62</a></div></div>
<div class="ttc" id="aa02666_html_a4c2b662bd87162e3a0de4fe96845a449"><div class="ttname"><a href="a02666.html#a4c2b662bd87162e3a0de4fe96845a449">BLOBNBOX::set_repeated_set</a></div><div class="ttdeci">void set_repeated_set(int set_id)</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00264">blobbox.h:264</a></div></div>
<div class="ttc" id="aa01106_html_a061c9707b8142c110e65e138c3790ffd"><div class="ttname"><a href="a01106.html#a061c9707b8142c110e65e138c3790ffd">textord_chop_width</a></div><div class="ttdeci">double textord_chop_width</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00076">makerow.cpp:76</a></div></div>
<div class="ttc" id="aa02674_html_a6a76a4282791ee8f215c0e8b8dd7db16"><div class="ttname"><a href="a02674.html#a6a76a4282791ee8f215c0e8b8dd7db16">TO_BLOCK::key_row</a></div><div class="ttdeci">TO_ROW * key_row</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00797">blobbox.h:797</a></div></div>
<div class="ttc" id="aa00515_html_a93a603f4063a6b9403d81caa245a583b"><div class="ttname"><a href="a00515.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a></div><div class="ttdeci">#define ASSERT_HOST(x)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00087">errcode.h:87</a></div></div>
<div class="ttc" id="aa02670_html_a448dbcbfc8d6c3c9c5e8c2fb127fd9d9"><div class="ttname"><a href="a02670.html#a448dbcbfc8d6c3c9c5e8c2fb127fd9d9">TO_ROW::set_parallel_line</a></div><div class="ttdeci">void set_parallel_line(float gradient, float new_c, float new_error)</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00611">blobbox.h:611</a></div></div>
<div class="ttc" id="aa02670_html_a54a1cf2bfa1478d255a8b79f51ca8e59"><div class="ttname"><a href="a02670.html#a54a1cf2bfa1478d255a8b79f51ca8e59">TO_ROW::spacing</a></div><div class="ttdeci">float spacing</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00655">blobbox.h:655</a></div></div>
<div class="ttc" id="aa01109_html_afce0c34ba177573f61217f64c0a04d68a25bbfc450f12f60f7a5882e37973a4b6"><div class="ttname"><a href="a01109.html#afce0c34ba177573f61217f64c0a04d68a25bbfc450f12f60f7a5882e37973a4b6">ROW_DESCENDERS_FOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00036">makerow.h:36</a></div></div>
<div class="ttc" id="aa01106_html_afcd9d2bb6d7f6b16e31ed5a75799f43d"><div class="ttname"><a href="a01106.html#afcd9d2bb6d7f6b16e31ed5a75799f43d">deskew_block_coords</a></div><div class="ttdeci">TBOX deskew_block_coords(TO_BLOCK *block, float gradient)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00732">makerow.cpp:732</a></div></div>
<div class="ttc" id="aa01106_html_a99339b09e5fe1e853068a49be9aea95f"><div class="ttname"><a href="a01106.html#a99339b09e5fe1e853068a49be9aea95f">most_overlapping_row</a></div><div class="ttdeci">OVERLAP_STATE most_overlapping_row(TO_ROW_IT *row_it, TO_ROW *&amp;best_row, float top, float bottom, float rowsize, bool testing_blob)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l02478">makerow.cpp:2478</a></div></div>
<div class="ttc" id="aa01106_html_a1baaf7ab16613cd7b5a13a28d65412b3"><div class="ttname"><a href="a01106.html#a1baaf7ab16613cd7b5a13a28d65412b3">kMinSize</a></div><div class="ttdeci">const int kMinSize</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00377">makerow.cpp:377</a></div></div>
<div class="ttc" id="aa02866_html_abb9516f874133b689b0e62ac70874385"><div class="ttname"><a href="a02866.html#abb9516f874133b689b0e62ac70874385">FCOORD::y</a></div><div class="ttdeci">float y() const</div><div class="ttdef"><b>Definition:</b> <a href="a00392_source.html#l00209">points.h:209</a></div></div>
<div class="ttc" id="aa02858_html"><div class="ttname"><a href="a02858.html">ICOORD</a></div><div class="ttdoc">integer coordinate</div><div class="ttdef"><b>Definition:</b> <a href="a00392_source.html#l00030">points.h:30</a></div></div>
<div class="ttc" id="aa01106_html_afae95a2fffdf477ce99240ad90e63ee2"><div class="ttname"><a href="a01106.html#afae95a2fffdf477ce99240ad90e63ee2">textord_straight_baselines</a></div><div class="ttdeci">bool textord_straight_baselines</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00050">makerow.cpp:50</a></div></div>
<div class="ttc" id="aa02670_html_aeba2135f371c89fd310f0443f79c8f43"><div class="ttname"><a href="a02670.html#aeba2135f371c89fd310f0443f79c8f43">TO_ROW::line_m</a></div><div class="ttdeci">float line_m() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00570">blobbox.h:570</a></div></div>
<div class="ttc" id="aa01106_html_a2b96add97d00045022d1b0818e49253f"><div class="ttname"><a href="a01106.html#a2b96add97d00045022d1b0818e49253f">textord_debug_blob</a></div><div class="ttdeci">bool textord_debug_blob</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00101">makerow.cpp:101</a></div></div>
<div class="ttc" id="aa02898_html_a61af64df548c7638bf005fcd8343c435"><div class="ttname"><a href="a02898.html#a61af64df548c7638bf005fcd8343c435">TBOX::print</a></div><div class="ttdeci">void print() const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00277">rect.h:277</a></div></div>
<div class="ttc" id="aa01106_html_ab53d0e7dc865a6960ecbb2dd8d3eee11"><div class="ttname"><a href="a01106.html#ab53d0e7dc865a6960ecbb2dd8d3eee11">compute_line_occupation</a></div><div class="ttdeci">void compute_line_occupation(TO_BLOCK *block, float gradient, int32_t min_y, int32_t max_y, int32_t *occupation, int32_t *deltas)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00768">makerow.cpp:768</a></div></div>
<div class="ttc" id="aa01106_html_a58237d13dfff6d1379f501ba5e14bc9b"><div class="ttname"><a href="a01106.html#a58237d13dfff6d1379f501ba5e14bc9b">textord_test_landscape</a></div><div class="ttdeci">bool textord_test_landscape</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00048">makerow.cpp:48</a></div></div>
<div class="ttc" id="aa01106_html_ab35d11ccffc21ae40e9f6dd51b4b81a8"><div class="ttname"><a href="a01106.html#ab35d11ccffc21ae40e9f6dd51b4b81a8">textord_spline_shift_fraction</a></div><div class="ttdeci">double textord_spline_shift_fraction</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00069">makerow.cpp:69</a></div></div>
<div class="ttc" id="aa02886_html"><div class="ttname"><a href="a02886.html">QSPLINE</a></div><div class="ttdef"><b>Definition:</b> <a href="a00419_source.html#l00031">quspline.h:31</a></div></div>
<div class="ttc" id="aa02866_html_aecd85311c159bcd52b485a97a8dcc901"><div class="ttname"><a href="a02866.html#aecd85311c159bcd52b485a97a8dcc901">FCOORD::x</a></div><div class="ttdeci">float x() const</div><div class="ttdef"><b>Definition:</b> <a href="a00392_source.html#l00206">points.h:206</a></div></div>
<div class="ttc" id="aa02670_html_a58c05cca5086f8fb1b4d6c2a4e2f7d13"><div class="ttname"><a href="a02670.html#a58c05cca5086f8fb1b4d6c2a4e2f7d13">TO_ROW::max_y</a></div><div class="ttdeci">float max_y() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00558">blobbox.h:558</a></div></div>
<div class="ttc" id="aa02898_html_a5dc64d0677b5d65385bc07a78cf49c4d"><div class="ttname"><a href="a02898.html#a5dc64d0677b5d65385bc07a78cf49c4d">TBOX::top</a></div><div class="ttdeci">int16_t top() const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00057">rect.h:57</a></div></div>
<div class="ttc" id="aa02898_html_acfa252ec4b65cbf808349f70fcf62019"><div class="ttname"><a href="a02898.html#acfa252ec4b65cbf808349f70fcf62019">TBOX::contains</a></div><div class="ttdeci">bool contains(const FCOORD pt) const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00330">rect.h:330</a></div></div>
<div class="ttc" id="aa02674_html_a5dd67c54162a6b60b0fd11500d4a3025"><div class="ttname"><a href="a02674.html#a5dd67c54162a6b60b0fd11500d4a3025">TO_BLOCK::blobs</a></div><div class="ttdeci">BLOBNBOX_LIST blobs</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00771">blobbox.h:771</a></div></div>
<div class="ttc" id="aa02918_html_a1f159950b60f6662b9b5df6dbb7554d3"><div class="ttname"><a href="a02918.html#a1f159950b60f6662b9b5df6dbb7554d3">STATS::max_bucket</a></div><div class="ttdeci">int32_t max_bucket() const</div><div class="ttdef"><b>Definition:</b> <a href="a00452_source.html#l00201">statistc.cpp:201</a></div></div>
<div class="ttc" id="aa02918_html_a3c8bc9b57b27780a349d55449366c97f"><div class="ttname"><a href="a02918.html#a3c8bc9b57b27780a349d55449366c97f">STATS::pile_count</a></div><div class="ttdeci">int32_t pile_count(int32_t value) const</div><div class="ttdef"><b>Definition:</b> <a href="a00455_source.html#l00075">statistc.h:75</a></div></div>
<div class="ttc" id="aa01106_html_aedce99179cfa3891066fcd1dd72ecba1"><div class="ttname"><a href="a01106.html#aedce99179cfa3891066fcd1dd72ecba1">textord_occupancy_threshold</a></div><div class="ttdeci">double textord_occupancy_threshold</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00084">makerow.cpp:84</a></div></div>
<div class="ttc" id="aa03978_html_a79855c525ec660b452382e9813d2edb5"><div class="ttname"><a href="a03978.html#a79855c525ec660b452382e9813d2edb5">ScrollView::Pen</a></div><div class="ttdeci">void Pen(Color color)</div><div class="ttdef"><b>Definition:</b> <a href="a01466_source.html#l00717">scrollview.cpp:717</a></div></div>
<div class="ttc" id="aa01106_html_a28df0de48e824ccc887c91caeaf2e7d8"><div class="ttname"><a href="a01106.html#a28df0de48e824ccc887c91caeaf2e7d8">fit_parallel_rows</a></div><div class="ttdeci">void fit_parallel_rows(TO_BLOCK *block, float gradient, FCOORD rotation, int32_t block_edge, bool testing_on)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l01931">makerow.cpp:1931</a></div></div>
<div class="ttc" id="aa03978_html_a101de80a4722fe821969f61f6e7303a6"><div class="ttname"><a href="a03978.html#a101de80a4722fe821969f61f6e7303a6">ScrollView::DrawTo</a></div><div class="ttdeci">void DrawTo(int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="a01466_source.html#l00524">scrollview.cpp:524</a></div></div>
<div class="ttc" id="aa01058_html_a45fd44462f3b32c42b22004d951af0b6"><div class="ttname"><a href="a01058.html#a45fd44462f3b32c42b22004d951af0b6">plot_parallel_row</a></div><div class="ttdeci">void plot_parallel_row(TO_ROW *row, float gradient, int32_t left, ScrollView::Color colour, FCOORD rotation)</div><div class="ttdef"><b>Definition:</b> <a href="a01058_source.html#l00117">drawtord.cpp:117</a></div></div>
<div class="ttc" id="aa01106_html_aa915328b291b12eac45b757d25d770c6"><div class="ttname"><a href="a01106.html#aa915328b291b12eac45b757d25d770c6">textord_debug_xheights</a></div><div class="ttdeci">bool textord_debug_xheights</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00055">makerow.cpp:55</a></div></div>
<div class="ttc" id="aa01106_html_ab33fbd787683743809a9c6036d541ee9"><div class="ttname"><a href="a01106.html#ab33fbd787683743809a9c6036d541ee9">fit_lms_line</a></div><div class="ttdeci">void fit_lms_line(TO_ROW *row)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00266">makerow.cpp:266</a></div></div>
<div class="ttc" id="aa01109_html_afce0c34ba177573f61217f64c0a04d68aba1649106cf3c6301a0cd938b01af28e"><div class="ttname"><a href="a01109.html#afce0c34ba177573f61217f64c0a04d68aba1649106cf3c6301a0cd938b01af28e">ROW_ASCENDERS_FOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00035">makerow.h:35</a></div></div>
<div class="ttc" id="aa01106_html_a5e93a6f5938ea681bc18b6d6c45f5e0a"><div class="ttname"><a href="a01106.html#a5e93a6f5938ea681bc18b6d6c45f5e0a">textord_descx_ratio_max</a></div><div class="ttdeci">double textord_descx_ratio_max</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00097">makerow.cpp:97</a></div></div>
<div class="ttc" id="aa01109_html_afce0c34ba177573f61217f64c0a04d68acd93bee831837976a1dabbccb5583354"><div class="ttname"><a href="a01109.html#afce0c34ba177573f61217f64c0a04d68acd93bee831837976a1dabbccb5583354">ROW_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00038">makerow.h:38</a></div></div>
<div class="ttc" id="aa02866_html"><div class="ttname"><a href="a02866.html">FCOORD</a></div><div class="ttdef"><b>Definition:</b> <a href="a00392_source.html#l00187">points.h:187</a></div></div>
<div class="ttc" id="aa02666_html"><div class="ttname"><a href="a02666.html">BLOBNBOX</a></div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00142">blobbox.h:142</a></div></div>
<div class="ttc" id="aa01109_html_abcb4220d5ed91090720f14d9d670c3fd"><div class="ttname"><a href="a01109.html#abcb4220d5ed91090720f14d9d670c3fd">OVERLAP_STATE</a></div><div class="ttdeci">OVERLAP_STATE</div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00027">makerow.h:27</a></div></div>
<div class="ttc" id="aa01106_html_af64730edc37ce30d66430f2dd54a2089"><div class="ttname"><a href="a01106.html#af64730edc37ce30d66430f2dd54a2089">MAX_HEIGHT_MODES</a></div><div class="ttdeci">#define MAX_HEIGHT_MODES</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00103">makerow.cpp:103</a></div></div>
<div class="ttc" id="aa02722_html"><div class="ttname"><a href="a02722.html">tesseract::DetLineFit</a></div><div class="ttdef"><b>Definition:</b> <a href="a00302_source.html#l00056">detlinefit.h:56</a></div></div>
<div class="ttc" id="aa00254_html_aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f"><div class="ttname"><a href="a00254.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a></div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00120">blobbox.h:120</a></div></div>
<div class="ttc" id="aa02674_html_abe8092e46729fbddf38f16ad7ca07318"><div class="ttname"><a href="a02674.html#abe8092e46729fbddf38f16ad7ca07318">TO_BLOCK::underlines</a></div><div class="ttdeci">BLOBNBOX_LIST underlines</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00772">blobbox.h:772</a></div></div>
<div class="ttc" id="aa01106_html_a02d851b1e7567c7e037b3b7aded37ba9"><div class="ttname"><a href="a01106.html#a02d851b1e7567c7e037b3b7aded37ba9">textord_spline_minblobs</a></div><div class="ttdeci">int textord_spline_minblobs</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00063">makerow.cpp:63</a></div></div>
<div class="ttc" id="aa02922_html"><div class="ttname"><a href="a02922.html">C_BLOB</a></div><div class="ttdef"><b>Definition:</b> <a href="a00461_source.html#l00036">stepblob.h:36</a></div></div>
<div class="ttc" id="aa02898_html_a428e14544aeb44064bc8637d920211a0"><div class="ttname"><a href="a02898.html#a428e14544aeb44064bc8637d920211a0">TBOX::rotate</a></div><div class="ttdeci">void rotate(const FCOORD &amp;vec)</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00196">rect.h:196</a></div></div>
<div class="ttc" id="aa01058_html_ac61d56bb753572e573a45e56823b92c0"><div class="ttname"><a href="a01058.html#ac61d56bb753572e573a45e56823b92c0">plot_to_row</a></div><div class="ttdeci">void plot_to_row(TO_ROW *row, ScrollView::Color colour, FCOORD rotation)</div><div class="ttdef"><b>Definition:</b> <a href="a01058_source.html#l00084">drawtord.cpp:84</a></div></div>
<div class="ttc" id="aa01106_html_aadee27bcfa70b6b74be490c1ab356672"><div class="ttname"><a href="a01106.html#aadee27bcfa70b6b74be490c1ab356672">assign_blobs_to_rows</a></div><div class="ttdeci">void assign_blobs_to_rows(TO_BLOCK *block, float *gradient, int pass, bool reject_misses, bool make_new_rows, bool drawing_skew)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l02278">makerow.cpp:2278</a></div></div>
<div class="ttc" id="aa01106_html_a995fba1cadc1bb12bd1861d2e1d4bf4a"><div class="ttname"><a href="a01106.html#a995fba1cadc1bb12bd1861d2e1d4bf4a">textord_min_xheight</a></div><div class="ttdeci">int textord_min_xheight</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00067">makerow.cpp:67</a></div></div>
<div class="ttc" id="aa02898_html_a72fcb736ed0ddeae95e6a51b3bf8d979"><div class="ttname"><a href="a02898.html#a72fcb736ed0ddeae95e6a51b3bf8d979">TBOX::height</a></div><div class="ttdeci">int16_t height() const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00107">rect.h:107</a></div></div>
<div class="ttc" id="aa01106_html_ac3f308da31e04ae15487ee136c920446"><div class="ttname"><a href="a01106.html#ac3f308da31e04ae15487ee136c920446">textord_underline_width</a></div><div class="ttdeci">double textord_underline_width</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00085">makerow.cpp:85</a></div></div>
<div class="ttc" id="aa02722_html_a97c074bfc1d7106ddda618ea8cf45ff7"><div class="ttname"><a href="a02722.html#a97c074bfc1d7106ddda618ea8cf45ff7">tesseract::DetLineFit::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="a00299_source.html#l00045">detlinefit.cpp:45</a></div></div>
<div class="ttc" id="aa01106_html_a9dcb3e14fc8bb00dcde4f03e25f3ac5b"><div class="ttname"><a href="a01106.html#a9dcb3e14fc8bb00dcde4f03e25f3ac5b">textord_excess_blobsize</a></div><div class="ttdeci">double textord_excess_blobsize</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00083">makerow.cpp:83</a></div></div>
<div class="ttc" id="aa01106_html_a311b9c50853dfa06be5da69721d9f341"><div class="ttname"><a href="a01106.html#a311b9c50853dfa06be5da69721d9f341">textord_show_final_blobs</a></div><div class="ttdeci">bool textord_show_final_blobs</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00047">makerow.cpp:47</a></div></div>
<div class="ttc" id="aa01106_html_a71e57df4cbaf6a0d8fb156f0604d1033"><div class="ttname"><a href="a01106.html#a71e57df4cbaf6a0d8fb156f0604d1033">blob_x_order</a></div><div class="ttdeci">int blob_x_order(const void *item1, const void *item2)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l02573">makerow.cpp:2573</a></div></div>
<div class="ttc" id="aa01109_html_af91de8a5d97ef84af1d5ef5cadd89bdd"><div class="ttname"><a href="a01109.html#af91de8a5d97ef84af1d5ef5cadd89bdd">get_row_category</a></div><div class="ttdeci">ROW_CATEGORY get_row_category(const TO_ROW *row)</div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00121">makerow.h:121</a></div></div>
<div class="ttc" id="aa01106_html_abee4d483a054b2bb0a7990a22641dd69"><div class="ttname"><a href="a01106.html#abee4d483a054b2bb0a7990a22641dd69">textord_parallel_baselines</a></div><div class="ttdeci">bool textord_parallel_baselines</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00049">makerow.cpp:49</a></div></div>
<div class="ttc" id="aa01106_html_a0a5415d21bfad8f8e8693860230519df"><div class="ttname"><a href="a01106.html#a0a5415d21bfad8f8e8693860230519df">textord_xheight_mode_fraction</a></div><div class="ttdeci">double textord_xheight_mode_fraction</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00089">makerow.cpp:89</a></div></div>
<div class="ttc" id="aa02670_html_a62f74c4b5d6cf5f7c1a6a4a9efdf5f96"><div class="ttname"><a href="a02670.html#a62f74c4b5d6cf5f7c1a6a4a9efdf5f96">TO_ROW::initial_min_y</a></div><div class="ttdeci">float initial_min_y() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00567">blobbox.h:567</a></div></div>
<div class="ttc" id="aa01109_html_afce0c34ba177573f61217f64c0a04d68"><div class="ttname"><a href="a01109.html#afce0c34ba177573f61217f64c0a04d68">ROW_CATEGORY</a></div><div class="ttdeci">ROW_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00034">makerow.h:34</a></div></div>
<div class="ttc" id="aa02670_html_a665cb27268d22318e05dea8c17ae9a87"><div class="ttname"><a href="a02670.html#a665cb27268d22318e05dea8c17ae9a87">TO_ROW::merged</a></div><div class="ttdeci">bool merged</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00644">blobbox.h:644</a></div></div>
<div class="ttc" id="aa02670_html_a8e5ff46f920ae85700ae8b281eb0e8d8"><div class="ttname"><a href="a02670.html#a8e5ff46f920ae85700ae8b281eb0e8d8">TO_ROW::rep_chars_marked</a></div><div class="ttdeci">bool rep_chars_marked() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00630">blobbox.h:630</a></div></div>
<div class="ttc" id="aa02802_html_a9e4346e037f2cc01c3c51d888531da74"><div class="ttname"><a href="a02802.html#a9e4346e037f2cc01c3c51d888531da74">BLOCK::pdblk</a></div><div class="ttdeci">PDBLK pdblk</div><div class="ttdoc">Page Description Block.</div><div class="ttdef"><b>Definition:</b> <a href="a00350_source.html#l00189">ocrblock.h:189</a></div></div>
<div class="ttc" id="aa02674_html_aafe2a9baa69300ee71da42e6dc18cfee"><div class="ttname"><a href="a02674.html#aafe2a9baa69300ee71da42e6dc18cfee">TO_BLOCK::large_blobs</a></div><div class="ttdeci">BLOBNBOX_LIST large_blobs</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00775">blobbox.h:775</a></div></div>
<div class="ttc" id="aa01106_html_a9857b40ae88ca6fdca117868eb476d01"><div class="ttname"><a href="a01106.html#a9857b40ae88ca6fdca117868eb476d01">compute_row_stats</a></div><div class="ttdeci">void compute_row_stats(TO_BLOCK *block, bool testing_on)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l01143">makerow.cpp:1143</a></div></div>
<div class="ttc" id="aa02898_html_ade947e3871fa316e3e0b0864905c2997"><div class="ttname"><a href="a02898.html#ade947e3871fa316e3e0b0864905c2997">TBOX::major_x_overlap</a></div><div class="ttdeci">bool major_x_overlap(const TBOX &amp;box) const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00403">rect.h:403</a></div></div>
<div class="ttc" id="aa01106_html_aa3f1e0813b0d1a67ec8fb489e1d11034"><div class="ttname"><a href="a01106.html#aa3f1e0813b0d1a67ec8fb489e1d11034">textord_spline_medianwin</a></div><div class="ttdeci">int textord_spline_medianwin</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00064">makerow.cpp:64</a></div></div>
<div class="ttc" id="aa01106_html_a03acb44a5531c614c00fd012c88e799b"><div class="ttname"><a href="a01106.html#a03acb44a5531c614c00fd012c88e799b">compute_dropout_distances</a></div><div class="ttdeci">void compute_dropout_distances(int32_t *occupation, int32_t *thresholds, int32_t line_count)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00902">makerow.cpp:902</a></div></div>
<div class="ttc" id="aa01109_html_a06639b8bf2e9edec8aed7e189b312f88"><div class="ttname"><a href="a01109.html#a06639b8bf2e9edec8aed7e189b312f88">within_error_margin</a></div><div class="ttdeci">bool within_error_margin(float test, float num, float margin)</div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00127">makerow.h:127</a></div></div>
<div class="ttc" id="aa02674_html_a16e698664028b0d6d2193db64560c16b"><div class="ttname"><a href="a02674.html#a16e698664028b0d6d2193db64560c16b">TO_BLOCK::block</a></div><div class="ttdeci">BLOCK * block</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00776">blobbox.h:776</a></div></div>
<div class="ttc" id="aa01106_html_a3a5a462e77519ae4316a3175a5991daa"><div class="ttname"><a href="a01106.html#a3a5a462e77519ae4316a3175a5991daa">textord_lms_line_trials</a></div><div class="ttdeci">int textord_lms_line_trials</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00099">makerow.cpp:99</a></div></div>
<div class="ttc" id="aa01106_html_ad8c4f2ec0d4f8b83b5dc401f35feca75"><div class="ttname"><a href="a01106.html#ad8c4f2ec0d4f8b83b5dc401f35feca75">kMinLeaderCount</a></div><div class="ttdeci">const int kMinLeaderCount</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00105">makerow.cpp:105</a></div></div>
<div class="ttc" id="aa03978_html_a100504544a5423a94222149ee9ed0fe8aebeaaeee353c6f04b4498b1fef94bbb3"><div class="ttname"><a href="a03978.html#a100504544a5423a94222149ee9ed0fe8aebeaaeee353c6f04b4498b1fef94bbb3">ScrollView::MAGENTA</a></div><div class="ttdef"><b>Definition:</b> <a href="a01469_source.html#l00109">scrollview.h:109</a></div></div>
<div class="ttc" id="aa02722_html_a6ef9f742eafdfaad81a30a3799800725"><div class="ttname"><a href="a02722.html#a6ef9f742eafdfaad81a30a3799800725">tesseract::DetLineFit::ConstrainedFit</a></div><div class="ttdeci">double ConstrainedFit(const FCOORD &amp;direction, double min_dist, double max_dist, bool debug, ICOORD *line_pt)</div><div class="ttdef"><b>Definition:</b> <a href="a00299_source.html#l00130">detlinefit.cpp:130</a></div></div>
<div class="ttc" id="aa01109_html_abcb4220d5ed91090720f14d9d670c3fdab82f810c0bfdbb5cc6419a4bcea46404"><div class="ttname"><a href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdab82f810c0bfdbb5cc6419a4bcea46404">NEW_ROW</a></div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00046">makerow.h:46</a></div></div>
<div class="ttc" id="aa01106_html_af6c80d96579d43cb4e29057c8f1e0f41"><div class="ttname"><a href="a01106.html#af6c80d96579d43cb4e29057c8f1e0f41">adjust_row_limits</a></div><div class="ttdeci">void adjust_row_limits(TO_BLOCK *block)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l01107">makerow.cpp:1107</a></div></div>
<div class="ttc" id="aa01112_html_a7129ef948119d5737f021bb765d0aa82"><div class="ttname"><a href="a01112.html#a7129ef948119d5737f021bb765d0aa82">textord_oldbl_debug</a></div><div class="ttdeci">bool textord_oldbl_debug</div><div class="ttdef"><b>Definition:</b> <a href="a01112_source.html#l00038">oldbasel.cpp:38</a></div></div>
<div class="ttc" id="aa01106_html_a99da077fe5f1eb152819880a9e6be164"><div class="ttname"><a href="a01106.html#a99da077fe5f1eb152819880a9e6be164">textord_skew_lag</a></div><div class="ttdeci">double textord_skew_lag</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00073">makerow.cpp:73</a></div></div>
<div class="ttc" id="aa01106_html_a0f7b13f26dd172ac8ac430ef10ff62fb"><div class="ttname"><a href="a01106.html#a0f7b13f26dd172ac8ac430ef10ff62fb">textord_skew_ile</a></div><div class="ttdeci">double textord_skew_ile</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00072">makerow.cpp:72</a></div></div>
<div class="ttc" id="aa02670_html_a9d190f827fd90de0b4e98d5a8f47064a"><div class="ttname"><a href="a02670.html#a9d190f827fd90de0b4e98d5a8f47064a">TO_ROW::num_repeated_sets</a></div><div class="ttdeci">int num_repeated_sets() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00636">blobbox.h:636</a></div></div>
<div class="ttc" id="aa02666_html_ab8e7a33dc069de65fa4b6d0cab61d0c1"><div class="ttname"><a href="a02666.html#ab8e7a33dc069de65fa4b6d0cab61d0c1">BLOBNBOX::joined_to_prev</a></div><div class="ttdeci">bool joined_to_prev() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00255">blobbox.h:255</a></div></div>
<div class="ttc" id="aa01106_html_ac7548cdecc88963c89ab9d235a6c6531"><div class="ttname"><a href="a01106.html#ac7548cdecc88963c89ab9d235a6c6531">textord_test_y</a></div><div class="ttdeci">int textord_test_y</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00061">makerow.cpp:61</a></div></div>
<div class="ttc" id="aa02670_html_a957f0052e222e7eaeb32aa911248bd8d"><div class="ttname"><a href="a02670.html#a957f0052e222e7eaeb32aa911248bd8d">TO_ROW::parallel_c</a></div><div class="ttdeci">float parallel_c() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00579">blobbox.h:579</a></div></div>
<div class="ttc" id="aa02898_html_a70ef69630cbdc605b7b7d5434549d38c"><div class="ttname"><a href="a02898.html#a70ef69630cbdc605b7b7d5434549d38c">TBOX::width</a></div><div class="ttdeci">int16_t width() const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00114">rect.h:114</a></div></div>
<div class="ttc" id="aa01106_html_a9b6384540f5043c74a97ec6a642d0bbf"><div class="ttname"><a href="a01106.html#a9b6384540f5043c74a97ec6a642d0bbf">textord_show_initial_rows</a></div><div class="ttdeci">bool textord_show_initial_rows</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00043">makerow.cpp:43</a></div></div>
<div class="ttc" id="aa01106_html_a2e0651148ade15830933aa26b1e63c2f"><div class="ttname"><a href="a01106.html#a2e0651148ade15830933aa26b1e63c2f">textord_min_blobs_in_row</a></div><div class="ttdeci">int textord_min_blobs_in_row</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00062">makerow.cpp:62</a></div></div>
<div class="ttc" id="aa01106_html_a1351fa9ba641f131420149782666b565"><div class="ttname"><a href="a01106.html#a1351fa9ba641f131420149782666b565">textord_min_blob_height_fraction</a></div><div class="ttdeci">double textord_min_blob_height_fraction</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00087">makerow.cpp:87</a></div></div>
<div class="ttc" id="aa01106_html_aa0d43ef1627ff8a2a8ee79a90ecdf892"><div class="ttname"><a href="a01106.html#aa0d43ef1627ff8a2a8ee79a90ecdf892">textord_descx_ratio_min</a></div><div class="ttdeci">double textord_descx_ratio_min</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00096">makerow.cpp:96</a></div></div>
<div class="ttc" id="aa02898_html_a9fee4521e71300975cb34ebb21e3fca5"><div class="ttname"><a href="a02898.html#a9fee4521e71300975cb34ebb21e3fca5">TBOX::bottom</a></div><div class="ttdeci">int16_t bottom() const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00064">rect.h:64</a></div></div>
<div class="ttc" id="aa02702_html_a9d71fddad74d9418e106713cd643b919"><div class="ttname"><a href="a02702.html#a9d71fddad74d9418e106713cd643b919">tesseract::CCStruct::kAscenderFraction</a></div><div class="ttdeci">static const double kAscenderFraction</div><div class="ttdef"><b>Definition:</b> <a href="a00284_source.html#l00035">ccstruct.h:35</a></div></div>
<div class="ttc" id="aa01106_html_af9da918f4c268e7bfd9300632b056be2"><div class="ttname"><a href="a01106.html#af9da918f4c268e7bfd9300632b056be2">kNoiseSize</a></div><div class="ttdeci">const double kNoiseSize</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00376">makerow.cpp:376</a></div></div>
<div class="ttc" id="aa03978_html_a100504544a5423a94222149ee9ed0fe8a0eab2b208fc9a5e2774f92cf3e768982"><div class="ttname"><a href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0eab2b208fc9a5e2774f92cf3e768982">ScrollView::WHITE</a></div><div class="ttdef"><b>Definition:</b> <a href="a01469_source.html#l00103">scrollview.h:103</a></div></div>
<div class="ttc" id="aa01106_html_a13d7697b36af130fcde8ddf67cf3f9f1"><div class="ttname"><a href="a01106.html#a13d7697b36af130fcde8ddf67cf3f9f1">segment_baseline</a></div><div class="ttdeci">bool segment_baseline(TO_ROW *row, TO_BLOCK *block, int32_t &amp;segments, int32_t *xstarts)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l02088">makerow.cpp:2088</a></div></div>
<div class="ttc" id="aa02702_html_a7e8a361df0831d295edf1c150c3ca3a3"><div class="ttname"><a href="a02702.html#a7e8a361df0831d295edf1c150c3ca3a3">tesseract::CCStruct::kDescenderFraction</a></div><div class="ttdeci">static const double kDescenderFraction</div><div class="ttdef"><b>Definition:</b> <a href="a00284_source.html#l00033">ccstruct.h:33</a></div></div>
<div class="ttc" id="aa01106_html_a8a2d5c881bb140c9199880bcadb6336e"><div class="ttname"><a href="a01106.html#a8a2d5c881bb140c9199880bcadb6336e">compute_occupation_threshold</a></div><div class="ttdeci">void compute_occupation_threshold(int32_t low_window, int32_t high_window, int32_t line_count, int32_t *occupation, int32_t *thresholds)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00821">makerow.cpp:821</a></div></div>
<div class="ttc" id="aa02670_html_a819d94a95b9aab802acbcba097c67b2b"><div class="ttname"><a href="a02670.html#a819d94a95b9aab802acbcba097c67b2b">TO_ROW::xheight</a></div><div class="ttdeci">float xheight</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00656">blobbox.h:656</a></div></div>
<div class="ttc" id="aa02666_html_a6ac085f4785a04cd96645b8259057040"><div class="ttname"><a href="a02666.html#a6ac085f4785a04cd96645b8259057040">BLOBNBOX::repeated_set</a></div><div class="ttdeci">int repeated_set() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00261">blobbox.h:261</a></div></div>
<div class="ttc" id="aa01784_html_ab68dc90b23a91cc9fd9eadb62d49f24f"><div class="ttname"><a href="a01784.html#ab68dc90b23a91cc9fd9eadb62d49f24f">distance</a></div><div class="ttdeci">UnicodeText::const_iterator::difference_type distance(const UnicodeText::const_iterator &amp;first, const UnicodeText::const_iterator &amp;last)</div><div class="ttdef"><b>Definition:</b> <a href="a01784_source.html#l00044">unicodetext.cc:44</a></div></div>
<div class="ttc" id="aa02866_html_a81ca9ea0cac4cd8c1bca0314e29bb28d"><div class="ttname"><a href="a02866.html#a81ca9ea0cac4cd8c1bca0314e29bb28d">FCOORD::rotate</a></div><div class="ttdeci">void rotate(const FCOORD vec)</div><div class="ttdef"><b>Definition:</b> <a href="a00392_source.html#l00736">points.h:736</a></div></div>
<div class="ttc" id="aa02674_html_ac17b9c95641b2eebee9d972338c2e5f6"><div class="ttname"><a href="a02674.html#ac17b9c95641b2eebee9d972338c2e5f6">TO_BLOCK::line_spacing</a></div><div class="ttdeci">float line_spacing</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00778">blobbox.h:778</a></div></div>
<div class="ttc" id="aa02670_html_a4db47940276e2aa20f409877aa953360"><div class="ttname"><a href="a02670.html#a4db47940276e2aa20f409877aa953360">TO_ROW::line_c</a></div><div class="ttdeci">float line_c() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00573">blobbox.h:573</a></div></div>
<div class="ttc" id="aa03978_html_a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402"><div class="ttname"><a href="a03978.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a></div><div class="ttdef"><b>Definition:</b> <a href="a01469_source.html#l00104">scrollview.h:104</a></div></div>
<div class="ttc" id="aa02670_html_a0173e9da64e4f2d29f01da14c3a053ee"><div class="ttname"><a href="a02670.html#a0173e9da64e4f2d29f01da14c3a053ee">TO_ROW::add_blob</a></div><div class="ttdeci">void add_blob(BLOBNBOX *blob, float top, float bottom, float row_size)</div><div class="ttdef"><b>Definition:</b> <a href="a00251_source.html#l00723">blobbox.cpp:723</a></div></div>
<div class="ttc" id="aa02918_html"><div class="ttname"><a href="a02918.html">STATS</a></div><div class="ttdef"><b>Definition:</b> <a href="a00455_source.html#l00030">statistc.h:30</a></div></div>
<div class="ttc" id="aa02666_html_acc27a54c9735f05e9152ba5f1c1a8261"><div class="ttname"><a href="a02666.html#acc27a54c9735f05e9152ba5f1c1a8261">BLOBNBOX::bounding_box</a></div><div class="ttdeci">const TBOX &amp; bounding_box() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00229">blobbox.h:229</a></div></div>
<div class="ttc" id="aa01106_html_a73aa7e6e50011cbd9114a4cd34dbcf47"><div class="ttname"><a href="a01106.html#a73aa7e6e50011cbd9114a4cd34dbcf47">textord_show_final_rows</a></div><div class="ttdeci">bool textord_show_final_rows</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00046">makerow.cpp:46</a></div></div>
<div class="ttc" id="aa01109_html_afce0c34ba177573f61217f64c0a04d68ab5102ae2a7fc9f423729da68d441fa7b"><div class="ttname"><a href="a01109.html#afce0c34ba177573f61217f64c0a04d68ab5102ae2a7fc9f423729da68d441fa7b">ROW_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00037">makerow.h:37</a></div></div>
<div class="ttc" id="aa02918_html_aec56187613797fe011b1f3b12021e0e1"><div class="ttname"><a href="a02918.html#aec56187613797fe011b1f3b12021e0e1">STATS::mode</a></div><div class="ttdeci">int32_t mode() const</div><div class="ttdef"><b>Definition:</b> <a href="a00452_source.html#l00100">statistc.cpp:100</a></div></div>
<div class="ttc" id="aa02674_html_a4846ebdcc832b4b0a762d87c0d83a056"><div class="ttname"><a href="a02674.html#a4846ebdcc832b4b0a762d87c0d83a056">TO_BLOCK::get_rows</a></div><div class="ttdeci">TO_ROW_LIST * get_rows()</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00703">blobbox.h:703</a></div></div>
<div class="ttc" id="aa00251_html_a3728c3433d1e8f6a2178bb796aa21fad"><div class="ttname"><a href="a00251.html#a3728c3433d1e8f6a2178bb796aa21fad">box_next_pre_chopped</a></div><div class="ttdeci">TBOX box_next_pre_chopped(BLOBNBOX_IT *it)</div><div class="ttdef"><b>Definition:</b> <a href="a00251_source.html#l00657">blobbox.cpp:657</a></div></div>
<div class="ttc" id="aa01106_html_ab27bf80d814903a9eb48e81b2cc09acc"><div class="ttname"><a href="a01106.html#ab27bf80d814903a9eb48e81b2cc09acc">row_y_order</a></div><div class="ttdeci">int row_y_order(const void *item1, const void *item2)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l02595">makerow.cpp:2595</a></div></div>
<div class="ttc" id="aa01106_html_abb70d23ca372b31c22ad99bce5f8aa70"><div class="ttname"><a href="a01106.html#abb70d23ca372b31c22ad99bce5f8aa70">textord_show_expanded_rows</a></div><div class="ttdeci">bool textord_show_expanded_rows</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00045">makerow.cpp:45</a></div></div>
<div class="ttc" id="aa01106_html_a0483d7251f1054b0ab8697a9cbc0997c"><div class="ttname"><a href="a01106.html#a0483d7251f1054b0ab8697a9cbc0997c">find_best_dropout_row</a></div><div class="ttdeci">bool find_best_dropout_row(TO_ROW *row, int32_t distance, float dist_limit, int32_t line_index, TO_ROW_IT *row_it, bool testing_on)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00652">makerow.cpp:652</a></div></div>
<div class="ttc" id="aa02886_html_a6d9a420087cfe7fa3349cabb048de02f"><div class="ttname"><a href="a02886.html#a6d9a420087cfe7fa3349cabb048de02f">QSPLINE::y</a></div><div class="ttdeci">double y(double x) const</div><div class="ttdef"><b>Definition:</b> <a href="a00416_source.html#l00202">quspline.cpp:202</a></div></div>
<div class="ttc" id="aa02670_html_a4889480138e3beb93c337e66dc245112"><div class="ttname"><a href="a02670.html#a4889480138e3beb93c337e66dc245112">TO_ROW::intercept</a></div><div class="ttdeci">float intercept() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00588">blobbox.h:588</a></div></div>
<div class="ttc" id="aa02666_html_ae4415dbdf1257052f22ee726f98db893"><div class="ttname"><a href="a02666.html#ae4415dbdf1257052f22ee726f98db893">BLOBNBOX::merge</a></div><div class="ttdeci">void merge(BLOBNBOX *nextblob)</div><div class="ttdef"><b>Definition:</b> <a href="a00251_source.html#l00091">blobbox.cpp:91</a></div></div>
<div class="ttc" id="aa02666_html_ac5e0fa9b0b9c23c040d6b1e0c61120cc"><div class="ttname"><a href="a02666.html#ac5e0fa9b0b9c23c040d6b1e0c61120cc">BLOBNBOX::flow</a></div><div class="ttdeci">BlobTextFlowType flow() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00294">blobbox.h:294</a></div></div>
<div class="ttc" id="aa02670_html_ac08a8415b95546ecad2bbe47228f6144"><div class="ttname"><a href="a02670.html#ac08a8415b95546ecad2bbe47228f6144">TO_ROW::believability</a></div><div class="ttdeci">float believability() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00585">blobbox.h:585</a></div></div>
<div class="ttc" id="aa02898_html_a8e9dce0d30d2213598cd4befe0028c99"><div class="ttname"><a href="a02898.html#a8e9dce0d30d2213598cd4befe0028c99">TBOX::left</a></div><div class="ttdeci">int16_t left() const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00071">rect.h:71</a></div></div>
<div class="ttc" id="aa02918_html_a5ce26a26c81c69a3e27616669998abe2"><div class="ttname"><a href="a02918.html#a5ce26a26c81c69a3e27616669998abe2">STATS::add</a></div><div class="ttdeci">void add(int32_t value, int32_t count)</div><div class="ttdef"><b>Definition:</b> <a href="a00452_source.html#l00087">statistc.cpp:87</a></div></div>
<div class="ttc" id="aa01106_html_ad38832cdfc8f47c85cb5a626760c7835"><div class="ttname"><a href="a01106.html#ad38832cdfc8f47c85cb5a626760c7835">textord_new_initial_xheight</a></div><div class="ttdeci">bool textord_new_initial_xheight</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00100">makerow.cpp:100</a></div></div>
<div class="ttc" id="aa02670_html_a9edf4e04c3b16db7ca06175ef3fb5dab"><div class="ttname"><a href="a02670.html#a9edf4e04c3b16db7ca06175ef3fb5dab">TO_ROW::min_y</a></div><div class="ttdeci">float min_y() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00561">blobbox.h:561</a></div></div>
<div class="ttc" id="aa02722_html_a768ec4a8f90593d8d679981c873f7a56"><div class="ttname"><a href="a02722.html#a768ec4a8f90593d8d679981c873f7a56">tesseract::DetLineFit::Fit</a></div><div class="ttdeci">double Fit(ICOORD *pt1, ICOORD *pt2)</div><div class="ttdef"><b>Definition:</b> <a href="a00302_source.html#l00075">detlinefit.h:75</a></div></div>
<div class="ttc" id="aa01106_html_a245049058986f065020d28b6c7e369d5"><div class="ttname"><a href="a01106.html#a245049058986f065020d28b6c7e369d5">make_initial_textrows</a></div><div class="ttdeci">void make_initial_textrows(ICOORD page_tr, TO_BLOCK *block, FCOORD rotation, bool testing_on)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00226">makerow.cpp:226</a></div></div>
<div class="ttc" id="aa02898_html_af74fa3bf628c9426cd6f1141a87dc2e0"><div class="ttname"><a href="a02898.html#af74fa3bf628c9426cd6f1141a87dc2e0">TBOX::right</a></div><div class="ttdeci">int16_t right() const</div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00078">rect.h:78</a></div></div>
<div class="ttc" id="aa01106_html_a148adda99d1cb8a8278fd3d89758c976"><div class="ttname"><a href="a01106.html#a148adda99d1cb8a8278fd3d89758c976">delete_non_dropout_rows</a></div><div class="ttdeci">void delete_non_dropout_rows(TO_BLOCK *block, float gradient, FCOORD rotation, int32_t block_edge, bool testing_on)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00570">makerow.cpp:570</a></div></div>
<div class="ttc" id="aa02722_html_a4eba2b6e761080e5d1a48c9c797257b2"><div class="ttname"><a href="a02722.html#a4eba2b6e761080e5d1a48c9c797257b2">tesseract::DetLineFit::Add</a></div><div class="ttdeci">void Add(const ICOORD &amp;pt)</div><div class="ttdef"><b>Definition:</b> <a href="a00299_source.html#l00051">detlinefit.cpp:51</a></div></div>
<div class="ttc" id="aa00581_html_a0c2bcd4462ec67ab0971b34a0f610f55"><div class="ttname"><a href="a00581.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a></div><div class="ttdeci">DLLSYM void tprintf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="a00581_source.html#l00034">tprintf.cpp:34</a></div></div>
<div class="ttc" id="aa03762_html_aff09f710af9da79dc20b27db549fe008"><div class="ttname"><a href="a03762.html#aff09f710af9da79dc20b27db549fe008">SORTED_FLOATS::add</a></div><div class="ttdeci">void add(float value, int32_t key)</div><div class="ttdef"><b>Definition:</b> <a href="a01136_source.html#l00026">sortflts.cpp:26</a></div></div>
<div class="ttc" id="aa01106_html_a933873395501e7e5de97374eef4c20e9"><div class="ttname"><a href="a01106.html#a933873395501e7e5de97374eef4c20e9">textord_ascx_ratio_min</a></div><div class="ttdeci">double textord_ascx_ratio_min</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00094">makerow.cpp:94</a></div></div>
<div class="ttc" id="aa02870_html"><div class="ttname"><a href="a02870.html">POLY_BLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="a00404_source.html#l00026">polyblk.h:26</a></div></div>
<div class="ttc" id="aa03762_html"><div class="ttname"><a href="a03762.html">SORTED_FLOATS</a></div><div class="ttdef"><b>Definition:</b> <a href="a01139_source.html#l00041">sortflts.h:41</a></div></div>
<div class="ttc" id="aa02670_html"><div class="ttname"><a href="a02670.html">TO_ROW</a></div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00543">blobbox.h:543</a></div></div>
<div class="ttc" id="aa01106_html_aec82b0edd2573bede6a0d9f4bdaf0782"><div class="ttname"><a href="a01106.html#aec82b0edd2573bede6a0d9f4bdaf0782">linear_spline_baseline</a></div><div class="ttdeci">double * linear_spline_baseline(TO_ROW *row, TO_BLOCK *block, int32_t &amp;segments, int32_t xstarts[])</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l02187">makerow.cpp:2187</a></div></div>
<div class="ttc" id="aa02670_html_a10818e7d801044a4d569466fa1d5f841"><div class="ttname"><a href="a02670.html#a10818e7d801044a4d569466fa1d5f841">TO_ROW::set_line</a></div><div class="ttdeci">void set_line(float new_m, float new_c, float new_error)</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00603">blobbox.h:603</a></div></div>
<div class="ttc" id="aa03978_html_a730b182e350dfe37b0986d7f0591fee5"><div class="ttname"><a href="a03978.html#a730b182e350dfe37b0986d7f0591fee5">ScrollView::SetCursor</a></div><div class="ttdeci">void SetCursor(int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="a01466_source.html#l00518">scrollview.cpp:518</a></div></div>
<div class="ttc" id="aa02670_html_acf8bf7f0f335788e106955b8142f832a"><div class="ttname"><a href="a02670.html#acf8bf7f0f335788e106955b8142f832a">TO_ROW::ascrise</a></div><div class="ttdeci">float ascrise</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00658">blobbox.h:658</a></div></div>
<div class="ttc" id="aa02670_html_a242facf2df3fde492b47a38b4c359119"><div class="ttname"><a href="a02670.html#a242facf2df3fde492b47a38b4c359119">TO_ROW::all_caps</a></div><div class="ttdeci">bool all_caps</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00645">blobbox.h:645</a></div></div>
<div class="ttc" id="aa03978_html_a100504544a5423a94222149ee9ed0fe8"><div class="ttname"><a href="a03978.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a></div><div class="ttdeci">Color</div><div class="ttdef"><b>Definition:</b> <a href="a01469_source.html#l00100">scrollview.h:100</a></div></div>
<div class="ttc" id="aa02666_html_a5d497fdc454feff733889db8fe604868"><div class="ttname"><a href="a02666.html#a5d497fdc454feff733889db8fe604868">BLOBNBOX::cblob</a></div><div class="ttdeci">C_BLOB * cblob() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00267">blobbox.h:267</a></div></div>
<div class="ttc" id="aa01106_html_a23b8c104a388b836300c6aaf9592c66f"><div class="ttname"><a href="a01106.html#a23b8c104a388b836300c6aaf9592c66f">textord_test_x</a></div><div class="ttdeci">int textord_test_x</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00060">makerow.cpp:60</a></div></div>
<div class="ttc" id="aa02670_html_a611050c4612df0ccd0f2d64ca0005b9b"><div class="ttname"><a href="a02670.html#a611050c4612df0ccd0f2d64ca0005b9b">TO_ROW::baseline</a></div><div class="ttdeci">QSPLINE baseline</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00669">blobbox.h:669</a></div></div>
<div class="ttc" id="aa03978_html_ac2a8fdf5d37967ea4a298dc092b6ed0e"><div class="ttname"><a href="a03978.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">ScrollView::Rectangle</a></div><div class="ttdeci">void Rectangle(int x1, int y1, int x2, int y2)</div><div class="ttdef"><b>Definition:</b> <a href="a01466_source.html#l00599">scrollview.cpp:599</a></div></div>
<div class="ttc" id="aa02670_html_acc50308b9a0cd5c73184de33971c55a8"><div class="ttname"><a href="a02670.html#acc50308b9a0cd5c73184de33971c55a8">TO_ROW::descdrop</a></div><div class="ttdeci">float descdrop</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00659">blobbox.h:659</a></div></div>
<div class="ttc" id="aa02674_html_abda136ff240577928343ca37453aca7a"><div class="ttname"><a href="a02674.html#abda136ff240577928343ca37453aca7a">TO_BLOCK::max_blob_size</a></div><div class="ttdeci">float max_blob_size</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00785">blobbox.h:785</a></div></div>
<div class="ttc" id="aa02670_html_a5a5bfd657e97c2fed2cf6153eca0e98a"><div class="ttname"><a href="a02670.html#a5a5bfd657e97c2fed2cf6153eca0e98a">TO_ROW::set_limits</a></div><div class="ttdeci">void set_limits(float new_min, float new_max)</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00621">blobbox.h:621</a></div></div>
<div class="ttc" id="aa01106_html_aa3013c07bcccb3f1efeb4686ed340609"><div class="ttname"><a href="a01106.html#aa3013c07bcccb3f1efeb4686ed340609">row_spacing_order</a></div><div class="ttdeci">int row_spacing_order(const void *item1, const void *item2)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l02617">makerow.cpp:2617</a></div></div>
<div class="ttc" id="aa01106_html_aa6de330c2e2d5c231611e776ebb577b3"><div class="ttname"><a href="a01106.html#aa6de330c2e2d5c231611e776ebb577b3">textord_xheight_error_margin</a></div><div class="ttdeci">double textord_xheight_error_margin</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00098">makerow.cpp:98</a></div></div>
<div class="ttc" id="aa03762_html_ab91ec5a940aa2c824858fc5c4294cd40"><div class="ttname"><a href="a03762.html#ab91ec5a940aa2c824858fc5c4294cd40">SORTED_FLOATS::remove</a></div><div class="ttdeci">void remove(int32_t key)</div><div class="ttdef"><b>Definition:</b> <a href="a01136_source.html#l00051">sortflts.cpp:51</a></div></div>
<div class="ttc" id="aa01058_html_a262d35f0a34031a666b9ae158eb9f01f"><div class="ttname"><a href="a01058.html#a262d35f0a34031a666b9ae158eb9f01f">to_win</a></div><div class="ttdeci">ScrollView * to_win</div><div class="ttdef"><b>Definition:</b> <a href="a01058_source.html#l00034">drawtord.cpp:34</a></div></div>
<div class="ttc" id="aa02918_html_a99d575509790164609442b71e4cb9982"><div class="ttname"><a href="a02918.html#a99d575509790164609442b71e4cb9982">STATS::print</a></div><div class="ttdeci">void print() const</div><div class="ttdef"><b>Definition:</b> <a href="a00452_source.html#l00509">statistc.cpp:509</a></div></div>
<div class="ttc" id="aa02670_html_af28160f5ba759f6d8866b4e7a44f677d"><div class="ttname"><a href="a02670.html#af28160f5ba759f6d8866b4e7a44f677d">TO_ROW::line_error</a></div><div class="ttdeci">float line_error() const</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00576">blobbox.h:576</a></div></div>
<div class="ttc" id="aa02666_html_a118eeb16f7c775dc58129a5869425f4b"><div class="ttname"><a href="a02666.html#a118eeb16f7c775dc58129a5869425f4b">BLOBNBOX::chop</a></div><div class="ttdeci">void chop(BLOBNBOX_IT *start_it, BLOBNBOX_IT *blob_it, FCOORD rotation, float xheight)</div><div class="ttdef"><b>Definition:</b> <a href="a00251_source.html#l00118">blobbox.cpp:118</a></div></div>
<div class="ttc" id="aa01109_html_abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a"><div class="ttname"><a href="a01109.html#abcb4220d5ed91090720f14d9d670c3fda52a9b031766fa116251f70e65a84c01a">ASSIGN</a></div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00044">makerow.h:44</a></div></div>
<div class="ttc" id="aa01106_html_ab9ad937a552fbb9c0f7f24e94b9d5e09"><div class="ttname"><a href="a01106.html#ab9ad937a552fbb9c0f7f24e94b9d5e09">compute_page_skew</a></div><div class="ttdeci">void compute_page_skew(TO_BLOCK_LIST *blocks, float &amp;page_m, float &amp;page_err)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00286">makerow.cpp:286</a></div></div>
<div class="ttc" id="aa01109_html_abcb4220d5ed91090720f14d9d670c3fdaa698e39adf684fd44b5572a7b89444fb"><div class="ttname"><a href="a01109.html#abcb4220d5ed91090720f14d9d670c3fdaa698e39adf684fd44b5572a7b89444fb">REJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="a01109_source.html#l00045">makerow.h:45</a></div></div>
<div class="ttc" id="aa02670_html_a39cee94572e70d35179c27cdf21a3022"><div class="ttname"><a href="a02670.html#a39cee94572e70d35179c27cdf21a3022">TO_ROW::blob_list</a></div><div class="ttdeci">BLOBNBOX_LIST * blob_list()</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00599">blobbox.h:599</a></div></div>
<div class="ttc" id="aa01106_html_a51573e6a073161cf5c4e9b16040406e2"><div class="ttname"><a href="a01106.html#a51573e6a073161cf5c4e9b16040406e2">expand_rows</a></div><div class="ttdeci">void expand_rows(ICOORD page_tr, TO_BLOCK *block, float gradient, FCOORD rotation, int32_t block_edge, bool testing_on)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00949">makerow.cpp:949</a></div></div>
<div class="ttc" id="aa01058_html_a2aa670264559025dd978a4f78255a2f4"><div class="ttname"><a href="a01058.html#a2aa670264559025dd978a4f78255a2f4">draw_occupation</a></div><div class="ttdeci">void draw_occupation(int32_t xleft, int32_t ybottom, int32_t min_y, int32_t max_y, int32_t occupation[], int32_t thresholds[])</div><div class="ttdef"><b>Definition:</b> <a href="a01058_source.html#l00157">drawtord.cpp:157</a></div></div>
<div class="ttc" id="aa02898_html"><div class="ttname"><a href="a02898.html">TBOX</a></div><div class="ttdef"><b>Definition:</b> <a href="a00431_source.html#l00033">rect.h:33</a></div></div>
<div class="ttc" id="aa02674_html_ab106233da0599f3e1595c1c765acadec"><div class="ttname"><a href="a02674.html#ab106233da0599f3e1595c1c765acadec">TO_BLOCK::line_size</a></div><div class="ttdeci">float line_size</div><div class="ttdef"><b>Definition:</b> <a href="a00254_source.html#l00784">blobbox.h:784</a></div></div>
<div class="ttc" id="aa01106_html_a1312db9d386487e3879ed6da1a02fefe"><div class="ttname"><a href="a01106.html#a1312db9d386487e3879ed6da1a02fefe">cleanup_rows_making</a></div><div class="ttdeci">void cleanup_rows_making(ICOORD page_tr, TO_BLOCK *block, float gradient, FCOORD rotation, int32_t block_edge, bool testing_on)</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00517">makerow.cpp:517</a></div></div>
<div class="ttc" id="aa01106_html_aed72a4cf1cf5709c096540587eacffbc"><div class="ttname"><a href="a01106.html#aed72a4cf1cf5709c096540587eacffbc">textord_ascheight_mode_fraction</a></div><div class="ttdeci">double textord_ascheight_mode_fraction</div><div class="ttdef"><b>Definition:</b> <a href="a01106_source.html#l00091">makerow.cpp:91</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_930fe0a3c40775bbdbdb97cea0f56396.html">textord</a></li><li class="navelem"><a class="el" href="a01106.html">makerow.cpp</a></li>
    <li class="footer">Generated on Thu Jan 30 2020 14:22:22 for tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
